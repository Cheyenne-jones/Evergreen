Release notes
=============

Upgrade notes
-------------

Z39.50 server definitions
~~~~~~~~~~~~~~~~~~~~~~~
Z39.50 server target definitions have been removed from the sample
`opensrf.xml.example` file. To migrate existing settings from your
`opensrf.xml` configuration file to the database, peform the
following steps:

    1. First, set up your custom Z39.50 sources in the database. For
      each entry in `z3950/services`, map the following XML paths to the
      corresponding `config.z3950_source` table column as follows:
+
      ** `z3950/services/<entry>` = name
      ** `//<entry>/name` = label
      ** `//<entry>/host` = host
      ** `//<entry>/port` = port
      ** `//<entry>/db` = db
      ** `//<entry>/record_format` = record_format
      ** `//<entry>/transmission_format` = transmission_format
+
    2. Then, for each attribute defined in the `<attrs>` element for
       a given service, map the following XML paths to the corresponding
       `config.z3950_attr` table column as follows:
+
      ** `z3950/services/<entry>` = source
      ** `//<entry>/attrs/<attr>` = name
      ** `//<entry>/attrs/<attr>/code` = code
      ** `//<entry>/attrs/<attr>/format` = format
+
    3. After adding the new Z39.50 sources and corresponding attributes,
       you will need to log out of the staff client and log back into the
       staff client to retrieve the new entry values. If a given Z39.50
       server does not work for a given attribute, pay attention to the
       `truncation` column for the attribute.


New features
------------

Administration
~~~~~~~~~~~~

Custom Org Unit Trees
^^^^^^^^^^^^^^^^^^^^^
Evergreen enables you to create an organizational tree that describes the systems, branches, or other units that comprise your organization. By default, the org unit tree that appears to patrons in the OPAC is identical to the one that appears to users of the staff client. Using this feature, you can condense or re-order the organizational tree into a simpler structure for patrons using the OPAC while maintaining the complex organizational tree that is available to users of the staff client.

As a further enhancement, you can hide a parental org unit yet still make its child org units visible in the OPAC. In previous versions of Evergreen, child org units inherited the visibility setting of their parents.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Fine Accrual on Closed Dates
^^^^^^^^^^^^^^^^^^^^^^^^^^^^
By default, fines accrue only on dates that the library is open. This feature enables you to charge patrons fines on dates the library is closed. Fines accrue during scheduled closings as well as during normal weekly closed dates.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Target Copies for Holds at Closed Libraries
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
By default, when a patron places a hold on a title, the hold targeter will search for copies to fill the hold only at circulating libraries that are open. Copies at closed libraries are not targeted to fill holds. When turned on, this feature enables Evergreen to target copies that have closed circulating libraries to fill holds. Two new org unit settings control this feature.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


OPAC
~~

Auto Suggest in Catalog Search
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
The auto suggest feature suggests the completion of search terms as the user enters his query.  By default, the user will see ten suggestions although this number is configurable at the database level.  Scroll through suggestions with your mouse, or use the arrow keys to scroll through the suggestions. Select a suggestion to view records that are linked to this suggestion. 

This feature is not turned on by default. You must turn it on in the Admin module.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Copy Location Groups
^^^^^^^^^^^^^^^^^^^^
This feature allows staff to create and name sets of copy locations to use as
a search filter in the catalog.  OPAC-visible groups will display within the
library selector in the template toolkit OPAC.  When a user selects a group
and performs a search, the set of results will be limited to records that have
copies in one of the copy locations within the group.  Groups can live at any
level of the library hierarchy and may include copy locations from any parent 
org unit or child org unit.

For advanced users, this change includes a new Query Parser filter called
location_groups().  

My Lists
^^^^^^^^
The My Lists feature replaces the bookbag feature that was available in versions proior to 2.2. This feature enables you to create temporary and permanent lists; create and edit notes for items in lists; place holds on items in lists; and share lists via RSS feeds and CSV files.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/  

SMS Text Messaging
^^^^^^^^^^^^^^^^^^
The SMS Text Messaging feature enables users to receive hold notices via text message. Users can opt-in to this hold notification as their default setting for all holds, or they can receive specific hold notifications via text message. Users can also send call numbers and copy locations via text message.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/



Acquisitions
~~~~~~~~~~

Vandelay Integration into Acquisitions
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
The Acquisitions Load MARC Order Record interface enables you to add MARC records to selection lists and purchase orders and upload the records into the catalog. The Vandelay interface enables you to create specific match points between incoming MARC records and exisiting catalog records. Combining these two features enables you to track on order MARC records through the Acquisitions interface and to utilize the record matching mechanisms available in Vandelay when importing acquisitions records.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Receive Items from an Invoice
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
This feature enables users to receive items from an invoice. Staff can receive individual copies, or they can receive items in batch.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Cataloging
~~~~~~~~

Authority Control Sets
^^^^^^^^^^^^^^^^^^^^^^
The tags and subfields that display in authority records in Evergreen are proscribed by control sets. The Library of Congress control set is the default control set in all versions of Evergreen. However, in Evergreen release 2.2, you can create customized control sets for authority records, and you can define thesauri and authority fields for these control sets.

Patrons and staff will be able to browse authorities in the OPAC. The following fields are browsable by default: author, series, subject, title, and topic. You will be able to add custom browse axes in addition to these default fields.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Batch Importing MARC Records
^^^^^^^^^^^^^^^^^^^^^^^^^^^^
The MARC Batch Import interface features improved matching of records and managing of your import queue. In version 2.2, you can specify match points between incoming and existing records to better detect matching records and prevent record duplication. You can also create quality controls to ensure that incoming matching records are superior in quality to existing catalog records.  

You also have new options for managing your queue.  You can apply filters to your queue, and you can generate a list of import errors. You can also print your queue, email your queue, or export your queue as a CSV file.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Hide Fields in Copy Editor
^^^^^^^^^^^^^^^^^^^^^^^^^^
Customize the Copy Editor for your staff by hiding fields in the Copy Editor that are not relevant to your staff.  You can set these fields by org unit(s).  Select the top level org unit that will use these settings, and the descendant org units will also recieve these settings.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/  


Prevent bibliographic records from having attached copies
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
To enable libraries to designate specific sets of records as only for use
as electronic resources, it is possible to configure a bibliographic source
such that physical copies or MFHD records may not be attached to records
from that source. The `config.bib_source` table now includes a new Boolean
column, `can_have_copies`, that controls this behavior. If `can_have_copies`
for a given bibliographic source is `TRUE`, then the staff client will prevent
a cataloger from adding volumes or MFHD records to records belonging to that
source.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Overlay Existing Catalog Record via Z39.50 Import
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
This feature enables you to replace a catalog record with a record obtained through a Z39.50 search. No new permissions or administrative settings are needed to use this feature.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Restrict Z39.50 sources by permission group
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
This new feature enables you to use a permission to restrict users' access to Z39.50 servers. You can apply a permission to the Z39.50 servers to restrict access to that server, and then assign that permission to users or groups so that they can access the restricted servers.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Switch copy location name and library short name in copy editor
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
By default, the copy editor shows the library shortname ('BR1' or 'CONS')
followed by the copy location name ('Stacks', 'Reference').  A new workstation
setting, under *Admin -> Workstation Administration -> Copy Editor: Copy
Location Name First*, enables staff to change the display so that the copy
location name is displayed first, followed by the library shortname. This
may be particularly useful for libraries that have defined one set of copy
locations at the consortial level and want to enable quick keyboard navigation
to copy locations by typing just the first letters of the copy location.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


User Activity Types
^^^^^^^^^^^^^^^^^^^
The User Activity Types feature enables you to specify the user activity that you want to record in the database. You can use this feature for reporting purposes. This function will also display a last activity date in a user's account.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Authentication proxy
~~~~~~~~~~~~~~~~~~
To support integration of Evergreen with organizational authentication systems,
and to reduce the proliferation of user names and passwords, Evergreen offers 
a new service called `open-ils.auth_proxy`. If you enable the service,
`open-ils.auth_proxy` supports different authentication mechanisms
that implement the `authenticate` method. You can define a chain of these
authentication mechanisms to be tried in order within the `<authenticators>`
element of the `opensrf.xml` configuration file, with the option of falling
back to the `native` mode that uses Evergreen's internal method of password
authentication.

This service only provides authentication; there is no support for automatic
provisioning of accounts. To authenticate against any authentication system,
the user account must first be defined within the Evergreen system, and
authentication will be based on the user name as it exists in Evergreen.

A sample authentication mechanism for LDAP is provided in
`Open-ILS::Application::AuthProxy::LDAP_AUTH`, and corresponding sample
attributes can be found in `opensrf.xml.example`.

Reports
~~~~~

New views for reporting sources
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
To support the creation of collection development reports, the following
reporting sources have been added:

  * 'Last Circulation or Creation Date' is a source that offers the copy ID,
    the last circulation date or creation date, and the last circulation date
  * 'Hold/Copy Ratio per Bib and Pickup Library' is a source that calculates
    the number of holds per copy per bibliographic record, with granularity
    by pickup library.


Staff Client Navigation
~~~~~~~~~~~~~~~~~~~~~

Customizable Toolbar
^^^^^^^^^^^^^^^^^^^^
By default, two toolbars are available in the staff client: circulation and cataloging. This feature enables you to customize toolbars in the staff client. You can add buttons that will enable quick access to a variety of features.  You can create toolbars for specific org unit(s), workstation(s), or login(s).  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Double Clicking in the Staff Client
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
You can search for a patron's record, and double click on a result to access that record. You can double click on an item in the Holdings Maintenance screen to access copy information. The item is linked to the Volume/Copy Creator, if you turned it on in the staff client's org unit settings. If you did not turn on the Volume/Copy Creator, then the item links to the Item Attributes.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Recent Staff Searches
^^^^^^^^^^^^^^^^^^^^^
This feature enables you to view your recent searches as you perform them in the staff client. By default, staff can view then recent searches although the number is configurable.  This feature is only available through the staff client; it is not available to patrons in the OPAC.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Return to Search Results from MARC Record
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
This feature enables you to return to your title search results directly from any view of the MARC record, including the OPAC View, MARC Record, MARC Edit, and Holdings Maintenance. You can use this feature to page through records in the MARC Record View or Edit interfaces. You do not have to return to the OPAC View to access title results.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Sorting Columns
^^^^^^^^^^^^^^^
This feature enables you to sort display columns so that you can find easily the information that you need on a screen that contains multiple columns. You can sort display columns on any screen that is built on a grid, such as the Check In screen or the On Shelf Pull List.

You can also sort the columns on the following Administration screens: Circulation Policies, Hold Policies, Circulation Limit Sets, Barcode Completion, Acquisitions User Request List, and Vandelay Import Errors.

You can sort items in an ascending or descending order, and you can prioritize the order in which columns will sort. Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


Tab Button
^^^^^^^^^^
This feature enables you to add a new tab to the Evergreen staff client by clicking the + sign adjacent to the tab that you currently have opened. As in previous versions, you can also add new tabs by clicking File -> New Tab, or use the hotkey, Ctrl+T.  Documentation for this feature is available in the Book of Evergreen at http://docs.evergreen-ils.org/2.2/


License
-------
This work is licensed under the Creative Commons Attribution-ShareAlike 3.0
Unported License. To view a copy of this license, visit
http://creativecommons.org/licenses/by-sa/3.0/ or send a letter to Creative
Commons, 444 Castro Street, Suite 900, Mountain View, California, 94041, USA.
