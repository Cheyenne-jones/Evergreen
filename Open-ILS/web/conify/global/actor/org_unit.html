<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Confiy :: Global :: Actor :: Org Units</title>

		<style type="text/css">
			@import "/conify/js/dijit/themes/tundra/tundra.css";
			@import "conify/js/dojo/resources/dojo.css"
		</style>

		<!-- The OpenSRF API writ JS -->
		<script language='javascript' src='<!--#echo var="OILS_JS_BASE"-->/utils.js' type='text/javascript'></script>
		<script language='javascript' src='<!--#echo var="OILS_JS_BASE"-->/Cookies.js' type='text/javascript'></script>
		<script language='javascript' src='<!--#echo var="OILS_JS_BASE"-->/CGI.js' type='text/javascript'></script>
		<script language='javascript' src='<!--#echo var="OILS_JS_BASE"-->/JSON_v1.js' type='text/javascript'></script>
		<script language='javascript' src='<!--#echo var="OILS_JS_BASE"-->/opensrf.js' type='text/javascript'></script>
		<script language='javascript' src='<!--#echo var="OILS_JS_BASE"-->/opensrf_xhr.js' type='text/javascript'></script>

		<!-- Fieldmapper objects -->
		<script language='javascript' src='<!--#echo var="OILS_JS_BASE"-->/fmall.js' type='text/javascript'></script>
		<script language='javascript' src='<!--#echo var="OILS_JS_BASE"-->/fmgen.js' type='text/javascript'></script>

		<!-- Dojo goodness -->
		<script type="text/javascript" src="/confiy/js/dojo/dojo.js" djConfig="parseOnLoad: true"></script>
		<script type="text/javascript">
			dojo.require('dojo.parser');
			dojo.require('dijit.Tree');
			dojo.require('dijit.layout.ContentPane');
			dojo.require('dijit.layout.TabContainer');
			dojo.require('dijit.layout.SplitContainer');
		</script>

		<script type="text/javascript">
			var cgi = new CGI();
			var cookieManager = new HTTP.Cookies();

			var ses = cookieManager.read('ses') || cgi.param('ses');

			var pCRUD = new OpenSRF.ClientSession('open-ils.permacrud');

			var ou_list_store = {label : 'shortname', identifier : 'id', items : [] };

			var req = pCRUD.request({
				method : 'open-ils.permacrud.search.aou',
				params : [ses, { id : { "!=" : null } } ];
				onresponse : function (r) { ou_list_store.items.push( r.recv().content.toHash() ); }
			});
			req.send();

		</script>
	</head>
	<body>

		<div
		  dojoType="dijit.layout.SplitContainer"
		  orientation="horizontal"
		  activeSizing="true"
		  style="width: 100%; height: 100%;"
		>
			<div dojoType="dijit.layout.ContentPane" sizeMin="150">
				<div id="dijit_ou_tree" dojoType="dijit.Tree" store="ou_list_store" label="Org Units"/>
			</div>
			<div dojoType="dijit.layout.ContentPane"/>
		</div>

	</body>
</html>
