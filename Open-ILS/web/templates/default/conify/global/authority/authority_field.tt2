[% WRAPPER default/base.tt2 %]
[% ctx.page_title = 'Configure Control Set Authority Fields' %]
<div dojoType="dijit.layout.ContentPane" layoutAlign="client">
    <div dojoType="dijit.layout.ContentPane" layoutAlign="top" class='oils-header-panel'>
        <div>Thesauri</div>
        <div>
            <button dojoType='dijit.form.Button' onClick='acsafGrid.showCreateDialog()'>New Control Set Authority Field</button>
            <button dojoType='dijit.form.Button' onClick='acsafGrid.deleteSelected()'>Delete Selected</button>
        </div>
    </div>
    <div>
    <table  jsId="acsafGrid"
            dojoType="openils.widget.AutoGrid"
            autoHeight='true'
            fieldOrder="['control_set','name','tag','sf_list','description','main_entry']"
            suppressFields="['id']"
            suppressEditFields="['id']"
            query="{id: '*'}"
            fmClass='acsaf'
            editOnEnter='true'/>
</div>

<script type="text/javascript">
    dojo.require("openils.widget.PCrudAutocompleteBox");
    dojo.require('openils.widget.AutoGrid');

    openils.Util.addOnLoad(
        function() {
            acsafGrid.overrideEditWidgets.control_set =
                new openils.widget.PCrudAutocompleteBox({
                    "fmclass": "acs", "searchAttr": "name"
                });
            acsafGrid.overrideEditWidgets.control_set.shove = {"create": ""};
            acsafGrid.loadAll({order_by:{acsaf : 'name'}}, {"id": {"!=": null}});
        }
    );
</script>
[% END %]


