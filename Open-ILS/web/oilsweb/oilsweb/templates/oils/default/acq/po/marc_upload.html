# -*- coding: utf-8 -*-
<%inherit file='base.html'/>
<%def name="page_title()">${_('MARC File Upload')}</%def>
<%def name="block_content()">

<style>
    @import url(${c.oils.core.media_prefix.value}/js/dojo/dojox/widget/FileInput/FileInput.css);
</style>

<script>
    dojo.require('dijit.form.Form');
    dojo.require('dijit.form.Button');
    dojo.require('dijit.form.FilteringSelect');
    dojo.require('openils.acq.Provider');
    dojo.require('dojox.widget.FileInput');
    dojo.require('dojo.data.ItemFileReadStore');
    function load() {
        openils.acq.Provider.createStore(
            function(store) {
                providerSelector.store =
                new dojo.data.ItemFileReadStore({data:store});
            },
            'MANAGE_PROVIDER'
        );
    }
    dojo.addOnLoad(load);
</script>

<form dojoType='dijit.form.Form' enctype="multipart/form-data" name='marc_upload_form'
        action='${c.oils.acq.prefix.value}/po/marc_upload' method='post'>
    <style>#oils-acq-po-marc-upload-table td {padding: 5px;}</style>
    <script type="dojo/method" event="onSubmit">
        document.forms.marc_upload_form.authtoken.value = openils.User.authtoken;
        return true;
    </script>
    <input name='authtoken' type='hidden'> </input>
    <table id='oils-acq-po-marc-upload-table' style='width:auto;'>
        <tbody>
            <tr>
                <td><label for='provider'>${_('Provider')}</label></td>
                <td> 
                    <select name='provider' style='overflow-y:auto;' labelAttr='code' searchAttr='code'
                        jsId="providerSelector" dojoType="dijit.form.FilteringSelect"> </select>
                </td>
            </tr>
            <tr>
                <td><label for='marc_file'>MARC File</label></td>
                <td nowrap='nowrap'>
                    <input dojoType="dojox.widget.FileInput" name="marc_file" id='marc_file'/> </input>
                </td>
            </tr>
            <tr>
                <td colspan='2'>
                    <div dojoType='dijit.form.Button' type='submit'>${_("Upload File")}</div>
                </td>
            </tr>
        </tbody>
    </table>
</form>

</%def>

