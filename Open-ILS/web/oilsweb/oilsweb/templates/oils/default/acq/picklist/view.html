# -*- coding: utf-8 -*-
<!-- 
 vim:ft=mako: 
-->
<%inherit file='../base.html'/>
<%def name="page_title()">${_('Picklist')}</%def>
<%def name="block_content()">

<%include file='picklist_summary.html'/>

<table id='oils-acq-picklist-table'>
    <thead>
        <tr>
            <td colspan='4'>
                <%
                    c.oils.acq.offset = int(c.oils.acq.offset)
                    c.oils.acq.limit = int(c.oils.acq.limit)
                    # set up the paging info
                    paging = _('Entries %(offset)s - %(limit)s') % {
                        'offset': c.oils.acq.offset + 1,
                        'limit': c.oils.acq.limit + c.oils.acq.offset
                    }
                %>
                ${paging}
                % if c.oils.acq.offset > 0:
                    <a href='?${c.oils.acq.offset_.cgi_name}=${c.oils.acq.offset - c.oils.acq.limit}'>&#171;</a>
                % endif
                <a href='?${c.oils.acq.offset_.cgi_name}=${c.oils.acq.offset + c.oils.acq.limit}'>&#187;</a>
            </td>
        </tr>
    </thead>
    <tbody>
    % for entry in c.oils.acq.picklist.entries():
    <tr class='oils-acq-picklist-records-title-row'>
        <td rowspan='3'>
            <img class='oils-acq-picklist-records-jacket'
                src='${c.oils.core.ac_prefix}/jacket/small/${c.oils.util.scrub_isbn(c.oils.acq.find_entry_attr(entry, "isbn"))}'/>
        </td>
        <td>
            <a href='../view_entry/${entry.id()}'>${c.oils.acq.find_entry_attr(entry, "title")}</a>
        </td>
        <td class='oils-acq-picklist-records-service-td'>
            % if entry.provider():
                ${entry.provider().name()}
            % endif
        </td>
        <td><input type='checkbox' name='${c.oils.acq.picklist_id_list_.cgi_name}' value='${c.oils.acq.picklist.id()}'/></td>
    </tr>

    <tr class='oils-acq-picklist-records-author-row'>
        <td colspan='4'>${c.oils.acq.find_entry_attr(entry, "author")}
    </tr>
    <tr class='oils-acq-picklist-records-phys_desc-row'>
        <td colspan='4'>
            ${c.oils.acq.find_entry_attr(entry, "isbn")} |
            ${c.oils.acq.find_entry_attr(entry, "pubdate")} |
            ${c.oils.acq.find_entry_attr(entry, "pagination")}
            <a class='oils-acq-picklist-entry-delete-link' href='${c.oils.acq.prefix}/picklist/delete_entry/${entry.id()}'>${_('Delete')}</a>
        </td>
    </tr>
    % endfor
    </tbody>
</table>
</%def>
