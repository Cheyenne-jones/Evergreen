# -*- coding: utf-8 -*-
<%inherit file='../base.html'/>
<%namespace file='../../common/widgets.html' name='widget'/>
<%def name="page_title()">${_('Funding Sources')}</%def>
<%def name="block_content()">

<div id='oils-acq-list-header' class='container'>
    <div id='oils-acq-list-header-label'>${_('Funding Sources')}</div>
    <!--
    <div id='oils-acq-list-header-actions'>
        <a href='${c.oils.acq.prefix.value}/funding_source/create'>${_('New Funding Source')}</a>
    </div>
    -->
</div>


<script type="text/javascript">
    dojo.require("dijit.Dialog");
    dojo.require("dijit.form.ComboBox");
    function checkPw(fields) {
        alert('name = ' + fields.name);
    }
</script>

<div dojoType="dijit.form.DropDownButton">
    <span>${('New Funding Source')}</span>
    <div dojoType="dijit.TooltipDialog" execute="checkPw(arguments[0]);">
        <table>
            <tr>
                <td><label for="name">${_('Name:')} </label></td>
                <td><input dojoType="dijit.form.TextBox" name="name"></td>
            </tr>
            <tr>
                <td><label for="loc">${_('Owning Location:')} </label></td>
                <td>
                    <select name="owner" dojoType="dijit.form.ComboBox" autocomplete="false" >
                        <option >Illinois</option>
                        <option >New York</option>
                        <option >Texas</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><label for="currency_type">${_('Currency Type:')}</label></td>
                <td><input dojoType="dijit.form.TextBox" name="currency_type"></td>
            </tr>
            <tr>
                <td><button dojoType=dijit.form.Button type="submit">${_('Create')}</button></td>
                <td><button dojoType=dijit.form.Button type="submit">${_('Cancel')}</button></td>
            </tr>
        </table>
    </div>
</div> 

<div id='oils-acq-funding-source-grid'> </div>

<script>
    dojo.require('openils.acq.FundingSource');

    /* define the layout columns */
    var cols = [
        {name: '${_("ID")}', field: 'id', 'class':'id-column'},
        {name: '${_("Name")}', field: "name"}, 
        {name: '${_("Owner")}', field: "owner"}, 
        {name: '${_("Currency Type")}', field: "currency_type"},
        {name: '${_("Balance")}', field: "balance"}
    ];

    /* build the funding-source grid on page load */
    dojo.addOnLoad(
        function(){
            var fsGrid = openils.acq.FundingSource.loadGrid('oils-acq-funding-source-grid', cols);
            fsGrid.onRowClick = function(evt) {
                /** XXX Need to make this more user friendly / obvious ... */
                id = fsGrid.model.getDatum(evt.rowIndex, 0);
                location.href = '${c.oils.acq.prefix.value}/funding_source/view/' + id;
            };
        }
    );
</script>
</%def>
