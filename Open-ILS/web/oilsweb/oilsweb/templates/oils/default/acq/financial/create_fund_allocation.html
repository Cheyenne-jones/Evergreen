# -*- coding: utf-8 -*-
<!-- vim:set filetype=mako: -->
<%inherit file='../base.html'/>
<%namespace file='../../common/widgets.html' name='widget'/>
<%def name="page_title()">${_('Create Funding Allocation')}</%def>
<%def name="block_content()">

<form action='${c.oils.acq.prefix.value}/fund/allocate' method='POST'>
    <table class='oils-admin-table'>
        <tbody>
            <tr>
                <td class='oils-admin-label'>${_('Fund')}</td>
                <td>
                    <input type='hidden' name='${c.oils.acq.fund_allocation_fund.cgi_name}' value='${c.oils.acq.fund_id.value}'/>
                    <span>${c.oils.acq.fund.value.name()}</span>
                    <span>${c.oils.acq.fund.value.org().shortname()}</span>
                </td>
            </tr>
            <tr>
                <td class='oils-admin-label'>${_('Funding Source')}</td>
                <td> 
                    <select name='${c.oils.acq.fund_allocation_source.cgi_name}'>
                        % for source in c.oils.acq.funding_source_list.value:
                            <% source_label = _('%(name)s (balance = %(b)s)') % {'name':source.name(), 'b': source.summary()['balance']} %>
                            <option value='${source.id()}'>${source_label}</option>
                        % endfor
                    </select>
                </td>
            </tr>
            <tr>
                <td class='oils-admin-label'>${_('Allocation Amount')}</td>
                <td> 
                    <input type='text' size='12' name='${c.oils.acq.fund_allocation_amount.cgi_name}'/>
                </td>
            </tr>
            <tr>
                <td class='oils-admin-label'>${_('Allocation Percent')}</td>
                <td> 
                    <input type='text' size='4' name='${c.oils.acq.fund_allocation_percent.cgi_name}'/>
                </td>
            </tr>
            <tr>
                <td class='oils-admin-label'>${_('Note')}</td>
                <td> 
                    <textarea name='${c.oils.acq.fund_allocation_note.cgi_name}'> </textarea>
                </td>
            </tr>
            <tr>
                <td colspan='2'>
                    <input type='submit' value='${_("Allocate Funds")}'/>
                </td>
            </tr>
        </tbody>
    </table>
</form>
</%def>
