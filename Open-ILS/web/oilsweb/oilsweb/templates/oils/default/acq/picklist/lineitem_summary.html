<%namespace file='../../common/widgets.html' name='widget' />
<%
    from oilsweb.lib.acq.picklist import PicklistMgr
%>
<div id='oils-acq-lineitem-header'>
    ${PicklistMgr.find_lineitem_attr(c.oils.acq.lineitem.value, 'title')}
    <div class='oils-acq-lineitem-attributes'>
        <%
	provider_map = [(provider.id(), provider.name()) for provider in c.oils.acq.provider_list.value]

        provider = c.oils.acq.lineitem.value.provider()
	if provider:
            provider = provider.id()
        meta = _("Source %s") % c.oils.acq.lineitem.value.source_label()
        meta3 = _("Create date %s") % c.oils.acq.lineitem.value.create_time()
        meta4 = _("Last update time %s") % c.oils.acq.lineitem.value.edit_time()
        %>
        <div>${meta}</div>
        <div>${meta3}</div>
        <div>${meta4}</div>
        <div>
	    <form method="post"
		  action="${c.oils.acq.prefix.value}/picklist/update_lineitem">
	        ${_("Provider")}
		${widget.build_selector(c.oils.acq.provider_id.cgi_name, provider_map, provider)}
	        <button name="${c.oils.acq.lineitem_id.cgi_name}"
			value="${c.oils.acq.lineitem.value.id()}">
		    ${_("Update")}
		</button>
		  
	    </form>
	</div>
	<div>
	    <form method="post"
		    action="${c.oils.acq.prefix.value}/picklist/approve_lineitem">
	      
	        <button name="${c.oils.acq.lineitem_id.cgi_name}"
			value="${c.oils.acq.lineitem.value.id()}">
		    ${_("Approve for Purchase")}
		</button>
	    </form>
	</div>
    </div>
</div>



