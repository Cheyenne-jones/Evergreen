# -*- coding: utf-8 -*-
<%inherit file='base.html'/>
<%namespace file='/oils/default/common/jubgrid.html' name='jubgrid'/>
<%def name="page_title()">${_('Title Search')}</%def>

<%def name="block_content()">
    <script src='${c.oils.core.media_prefix.value}/ui_js/oils/default/acq/picklist/bib_search.js'> </script>
    <style>
        /* import the checkedmultiselect css */
        @import url(${c.oils.core.media_prefix.value}/js/dojo/dojox/form/resources/CheckedMultiSelect.css);
    </style>

    <script>
        var searchOffset = ${c.oils.acq.offset.value} || 0;
    </script>

    <div id='oils-acq-search-block' class='container'>
        <form dojoType='dijit.form.Form' action='' method=''>
            <script type="dojo/method" event="onSubmit">
                doSearch(this.getValues());
                return false; /* don't redirect */
            </script>
            <div id='oils-acq-search-sources-block'>
                <div id='oils-acq-search-sources-label'>${_('Search Sources')}</div>
                <select style='overflow-y:auto;' id='oils-acq-search-source-select' 
                        multiple='true' jsId="bibSourceSelect" dojoType="dojox.form.CheckedMultiSelect">
                    <option value='native-evergreen-catalog'>${_('Evergreen Catalog')}</option>
                </select>
                <div id='oils-acq-search-progress'>
                    <div dojoType="dijit.ProgressBar" style="width:300px" jsId="searchProgress" id="searchProgress"></div>
                </div>
                <script>dojo.style('searchProgress', 'visibility', 'hidden');</script>
            </div>
            <div id='oils-acq-search-form-block'>
                <div id='oils-acq-search-fields-label'>${_('Search Fields')}</div>
                <div id='oils-acq-search-fields'>
                </div>
                <table>
                    <tbody id='oils-acq-search-fields-tbody'>
                        <tr id='oils-acq-search-fields-template'>
                            <td name='label'> </td>
                            <td name='input'> </td>
                        </tr>
                        <tr id='oils-acq-seach-fields-count-row'>
                            <td name='label'>Hits Per Source</td>
                            <td><input name='limit'
                                dojoType='dijit.form.NumberSpinner'
                                constraints='{min:5,max:50}'
                                value='10'></input>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div id='oils-acq-search-fields-submit-block'>
                    <div dojoType='dijit.form.Button' type='submit'>${_("Submit")}</div>
                </div>
            </div>
        </div>
    </form>
    <div id='oils-acq-pl-search-results' style='height:100%'>
        <script>
            dojo.require('dijit.form.FilteringSelect');
            dojo.require('dijit.Dialog');
        </script>
        <div dojoType="dijit.form.DropDownButton">
            <span>${('Save Results')}</span>
            <div dojoType="dijit.TooltipDialog" execute="saveResults(arguments[0]);">
                <script type='dojo/connect' event='onOpen'>
                </script>
                <table class='dijitTooltipTable'>
                    <tr>
                        <td><label for="name">${_('Save as picklist:')} </label></td>
                        <td><input dojoType="dijit.form.TextBox" name="name"></td>
                    </tr>
                    <tr>
                        <td colspan='2' align='center'>
                            <button dojoType=dijit.form.Button type="submit">${_('Save')}</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div> 
        ${jubgrid.jubgrid('oils-acq-lineitem', 'plResultGrid', True)}
    </div>
    <script>dojo.style('oils-acq-pl-search-results', 'visibility', 'hidden');</script>
</%def>


