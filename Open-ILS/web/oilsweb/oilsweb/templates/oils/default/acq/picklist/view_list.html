# -*- coding: utf-8 -*-
<%inherit file='../base.html'/>
<%def name="page_title()">${_('Evergreen My Picklists')}</%def>
<%def name="block_content()">

<div id='oils-acq-list-header' class='container'>
    <div id='oils-acq-picklist-my-list-header'>
        <div id='oils-acq-list-header-label'>${_('My Picklists')}</div>
        <div id='oils-acq-list-header-actions'>
            <a id='oils-acq-picklist-view-all' href="${c.oils.acq.prefix.value}/picklist/listall">${_('View All Picklists')}</a>
        </div>
    </div>
    <div id='oils-acq-picklist-all-list-header'>
        <div id='oils-acq-list-header-label'>${_('All Picklists')}</div>
        <div id='oils-acq-list-header-actions'>
            <a id='oils-acq-picklist-view-mine' href="${c.oils.acq.prefix.value}/picklist/list">${_('View My Picklists')}</a>
        </div>
    </div>
</div>

<script src='${c.oils.core.media_prefix.value}/ui_js/oils/default/acq/picklist/view_list.js'> </script>

<script>
    if(location.href.match(/listall$/)) {
        listAll = true;
        dojo.style('oils-acq-picklist-my-list-header', 'visibility', 'hidden');
        dojo.style('oils-acq-picklist-my-list-header', 'display', 'none');
    } else {
        dojo.style('oils-acq-picklist-all-list-header', 'visibility', 'hidden');
        dojo.style('oils-acq-picklist-all-list-header', 'display', 'none');
    }
</script>


<div class='oils-acq-actions-div'>
    <div dojoType="dijit.form.DropDownButton">
        <span>${('New Picklist')}</span>
        <div dojoType="dijit.TooltipDialog" execute="createPL(arguments[0]);">
            <table class='dijitTooltipTable'>
                <tr>
                    <td><label for="name">${_('Name:')} </label></td>
                    <td><input dojoType="dijit.form.TextBox" name="name"></td>
                </tr>
                <tr>
                    <td colspan='2' align='center'>
                        <button dojoType=dijit.form.Button type="submit">${_('Create')}</button>
                    </td>
                </tr>
            </table>
        </div>
    </div> 
    <button dojoType="dijit.form.Button" onclick="deleteFromGrid();">
        ${_('Delete Selected')}
    </button>
</div>


<script>
    function getName(rowIndex) {
        data = plListGrid.model.getRow(rowIndex);
        if(!data) return;
        return '<a href="${c.oils.acq.prefix.value}/picklist/view/'+data.id+'">'+data.name+'</a>';
    }

    var plListGridStructure = [{
        cells : [[
            {name: '${_("ID")}', field: 'id'},
            {name: '${_("Name")}', width:'auto', get:getName}, 
            {name: '${_("Selector")}', field:'owner'},
            {name: '${_("Create Time")}', field: 'create_time'}, 
            {name: '${_("Edit Time")}', field: 'edit_time'},
            {name: '${_("Entry Count")}', field: 'entry_count'},
        ]]
    }];
</script>
<div jsId='plListGrid' dojoType="dojox.Grid" structure='plListGridStructure'></div>

</%def>
