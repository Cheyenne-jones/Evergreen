2010-11-24  phasefx

	* merge r18806 from rel_1_6 for caching this setting (at least
	  within a given page load)

2010-11-29  miker

	* Patch from Jeff Godin, backported from trunkified version:
	  
	  In the staff client, the holds context menu option "Edit
	  PickupLibrary" displays and allows selection of org units that it
	  shouldn't.
	  
	  Org units whose type has can_have_users = FALSE are not valid
	  pickup locations.
	  
	  Using the default types as an example, CONS and SYS1 are invalid
	  pickup locations.
	  
	  The OPAC enforces this when allowing patrons to edit a hold.
	  
	  The staff client does not enforce this when staff edit a hold.
	  
	  The can_have_users() method of the au object returns a string 't'
	  or 'f' which is then compared to 0.
	  
	  The attached patch corrects this issue. ( foo == 0 becomes
	  !isTrue(foo) ).

	* logic error (inversion) in retargetting of previous copy when no
	  other holds are looking at it

2010-11-30  erickson

	* back-porting cstoreditor fixes to help prevent transaction
	  leaking

2010-11-30  senator

	* Backport some booking related commits from trunk.
	  
	  r17563: Booking: stop the "new resource type" dialog from
	  executing a naughty
	  query
	  
	  The dialog will no longer offer a field for selecting a
	  bibliographic record,
	  but then again you wouldn't need it. Bibliographically-based
	  resource types
	  can be set up through a context menu option in the staff OPAC
	  browser, whereas
	  this interface is only suited to non-bib-based resource types,
	  like meeting
	  rooms, laptops, etc.
	  --
	  r17980: more transaction cleanups
	  --
	  r18502: Booking: make the circ module avoid booking code if the
	  booking service
	  isn't up
	  
	  Previously, it was not possible to turn the booking service off
	  and have
	  working circ. Now you should be able to turn it off if you don't
	  need it.
	  --
	  r18514: If we already know we're not using booking, skip a
	  redundant and
	  expensive test for the possibility of capturing a hold. We're
	  just going to
	  try actually doing it a little farther down.
	  --
	  r18580: Patch from Steve Callender to address a booking-related
	  collection
	  agency reporting problem

2010-11-30  gmc

	* protect some of the supercat browse interfaces from unboundedness
	  
	  E.g., browsing from a call number that contains forward slashes,
	  e.g.,
	  
	  "02/05/2004"
	  
	  Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2010-12-02  senator

	* Belated backport of r18688 from trunk
	  
	  Booking: fix bug reported by Robert Soulliere wherein the items
	  associated
	  with picked-up reservations didn't actually get their status set
	  to 'checked
	  out' like they should have.
	  
	  Robert reported this bug on Launchpad (#672748) and provided a
	  patch, but
	  there were some neighboring bugs in the circulation logic anyway,
	  so they've
	  all been fixed together.
	  
	  Update: Robert and I aren't yet actually certain whether this
	  fixed the problem
	  when using legacy circ scripts. Investigation continues on
	  Launchpad.

2010-12-03  miker

	* Normalize spaces in notcontains advance search query terms to
	  address bug https://bugs.launchpad.net/evergreen/+bug/677122

2010-12-03  senator

	* Be consistent with a misspelled field. Credit to Robert Soulliere
	  for pointing
	  out my mistaken understanding of where this was already fixed and
	  where it
	  wasn't.

2010-12-09  dbs

	* Enable Ingest to ingest multiple located URIs for a single
	  org-unit at once
	  
	  Previous logic incorrectly restricted a given bib record to have
	  one located
	  URI per org-unit - unless you reingested it multiple times, each
	  time adding
	  one more URI per org-unit.
	  
	  We also add the strict pragma and adjust some syntax accordingly.

2010-12-09  phasefx

	* transit isn't in payload first time through with ROUTE_ITEM
	  checkin, fallback on check.org

	* big thinko. Going by the stock receipt template, this should be
	  the workstation lib. Destination is handled by a different
	  variable

2010-12-10  miker

	* Prepping for 1.6.1.5 with initial upgrade script.
	  
	  Addressing https://bugs.launchpad.net/evergreen/+bug/638309 --
	  Thanks to Steve Callender for the original report and diagnosis.

	* Patch from James Fournie to address
	  https://bugs.launchpad.net/evergreen/+bug/622908 wherein we learn
	  that related item physical description might be used as the main
	  PD of the main item, if the main item lacks such a field in the
	  MARC

2010-12-10  phasefx

	* backport r14033 from trunk for unsetting (nullifying) a circ
	  modifier

2010-12-10  miker

	* .: Tagging 1.6.1.5

