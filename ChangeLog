2011-08-12  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql, README: Bumping version
	numbers

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-12  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/2.0-2.1-upgrade-db.sql: Upgrade script (based
	on 2.0.8, currently)

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-12  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0599.data.fix_author_other_index.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_author_other_index.sql: Stamped
	upgrade script for "lp 823496: do not fail to index personal names
	that have relators"

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-09  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_author_other_index.sql: lp
	823496: don't fail to index personal names that have relators The default definition for the author|other index inadvertantly
	excluded names from 600, 700, 720, and 800 fields that have relator
	values ($e) or codes ($4).

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-12  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/chrome/content/util/print.js: Don't
	escape_html numbers in util/print.js

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-10  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/chrome/content/util/print.js: Escape
	HTML characters in template subs This prevents injection of random HTML from various sources.  Like bad bib records, org unit settings, patron info, etc.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-10  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/chrome/content/util/print.js: Use
	openDialog to make go_print workaround vanish By passing params and the go_print function into openDialog we get
	to ignore race conditions, as the window is created with the passed
	in arguments.  Oh, and we can stop using js2JSON and such.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-10  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/chrome/content/util/window.js: Add
	openDialog to window class Uses window.openDialog instead of window.open.
	https://developer.mozilla.org/en/DOM/window.openDialog

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-12  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/skin/cat.css: No more lightpink
	for disabled copy editor Folks can still provide custom CSS against those class hooks if
	desired

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-11  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/cat/copy_editor.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.xul,
	Open-ILS/xul/staff_client/server/skin/cat.css,
	Open-ILS/xul/staff_client/server/skin/global.css: in lieu of Ready
	Item Editor We're trying to prevent folks from using the item attribute editor
	in the unified interface when the volume pane is still updating its
	information (i.e. building the copies to feed to the attribute
	editor), so that a given editing widget isn't ripped out from under
	staff while its being used.  This change removes the heavy-handed
	Ready Item Editor button and instead tries to more gracefully manage
	the editor state based on change and keypress events.  Also change
	the color scheme for a disabled editor from red to light pink.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-08  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/display.js: Fix stop sign
	page race condition with checkout This would happen most often when retrieving multiple patrons at the
	same time from patron search--the stop sign page would show but then
	get trampled by the checkout interface, which normally loads first.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-08-08  Mike Rylander <mrylander@gmail.com>

	* : commit e0b53ca41132ce228117706128de0b638e5ce8a9 Author: Lebbeous
	Fogle-Weekley <lebbeous@esilibrary.com> Date:   Fri Aug 5 16:01:09
	2011 -0400


2011-08-05  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm: In
	a middle-layer method for returning holdable formats on a
	metarecord, Do a better test of copy holdability than we were doing previously.
	We can't do a perfect test: we don't really know what patron we're
	doing this for, and even if we did, from here it's nontrivial to
	figure out whether we're doing indb holds or script-based, much less
	run the tests.  Still, we can test whether a copy's in a holdable status, a holdable
	location, and is itself not explicitly marked unholdable.


	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-04  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/items.js: mrpeters caught
	this; wrong variable fed to error dialog

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-04  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Cat/AssetCommon.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Vandelay.pm: Repaired
	copy private/public note vandelay bug Previously, all copy notes imported through vandelay were coming in
	as public copy notes.

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-08-04  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0592.data.ACQ_INVOICE_REOPEN-perm.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.lp818311.sql: Stamped upgrade
	script for ACQ_INVOICE_REOPEN permission addition

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-04  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.lp818311.sql: Upgrade script for
	LP818311 branch.


	Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-04  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: LP#818311:
	ACQ_INVOICE_REOPEN is missing This patch adds the missing ACQ_INVOICE_REOPEN to the Acquisitions
	Administrator user.


	Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>

2011-08-03  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/holds.js: Fix staff client
	Clear Expired Hold Shelf action Accomodate an API change.  FIXME: See if can remove some of the
	redundant and/or un-needed data being sent over the wire.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-28  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Only update MARC
	on full entry of fixed fields AKA: Lang is 3 characters long. Entering 1 character would cause
	focus to leave.  MARC would also update incorrectly.  This only triggers the update when the full 3 characters are
	entered.  This not only prevents issues with catalogers editing
	multi-character fixed fields but also makes it less likely they
	accidentally corrupt the records.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-04  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0591.schema.circ_holds_history_repairs.
	sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.circ_holds_history_repairs.
	sql: Stamped upgrade script for schema.circ_holds_history_repairs

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-04  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.circ_holds_history_repairs.
	sql: Repair holds history func; sort circ history desc.  Update holds history to use oils_json_to_text instead of
	oils_json_to_string, which does not exist.  Sort circ history newest to oldest by default.

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-03  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0590.schema.more_cache_visibility_break
	age.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.more_cache_visibility_breakage.sql: 
	Stamped upgrade script for more_cache_visbility_breakage

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-25  Thomas Berezansky <tsbere@mvlc.org>

	*
	Open-ILS/src/sql/Pg/upgrade/XXXX.more_cache_visibility_breakage.sql: 
	Unwrapped upgrade script for more_cache_visbility_breakage

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-25  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/999.functions.global.sql: Extraneous
	semicolons break SQL Remove them so that cache_copy_visibility can function.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-01  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/copy_editor.js: Fix
	overzealous template application The idea was that we'd track templates if they were applied prior to
	copies actually being specified in the unified interface, and then
	apply them "for real" once copies were entered.  But these
	remembered templates kept applying themselves whenever changes were
	made in the volume/copy creator portion of the interface (possibly
	overriding tweaks made by staff).  So now we delete the list of
	tracked templates once they're applied to actual copies.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-01  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/util/widgets.js,
	Open-ILS/xul/staff_client/server/cat/copy_editor.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.xul,
	Open-ILS/xul/staff_client/server/skin/global.css: robustify (and
	klunkify) unified volume copy creator Disable/style the Item Editor while changes in the volume/item pane
	are being considered, and require an explicit press of a Ready Item
	Editor button to enable the interface.  This reduces the chance of
	editing widgets in the item editor from being ripped out from under
	you (for example, if you try to go straight from editing a call
	number to editing an item attribute).

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-21  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties: 
	lp#792595: Don't allow pre-cats into record buckets via Item Status
	-> Actions for Catalogers Alerts with the number of pre-cat records skipped prior to invoking
	the title bucket dialog.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-28  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/web/conify/global/actor/org_unit.html,
	Open-ILS/web/conify/global/actor/org_unit.js,
	Open-ILS/web/opac/locale/en-US/conify.dtd: This adds a SAN box to
	the org unit editor's address editor pane.


	Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-29  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Vandelay.pm,
	Open-ILS/web/js/ui/default/vandelay/vandelay.js,
	Open-ILS/web/templates/default/vandelay/inc/queue.tt2,
	Open-ILS/web/templates/default/vandelay/inc/upload.tt2: Vandelay fix
	for merging without loading new This fix is derivative of da3a453442050482a419deff91d3dc92fdbf132a
	in master, but with new feature code removed for backport to 2.1 and
	2.0.  It does the following: - renames 'vlUploadQueueAutoImport' to 'vlUploadQueueImportNoMatch'
	  to match identical change in master and to increase code clarity - honors this flag when doing a merge.  Previously, if you checked one of the two auto-merge boxes, any
	records which did not merge loaded as new records even if the
	'Auto-Import Non-Colliding Records' box was not checked.  You can
	now do one, the other, or both together (auto-importing and merging)
	as needed.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-20  Liam Whalen <lwhalen@evergreen-dev.catalogue.nrcan.gc.ca>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm: 
	Deleted a line the removed single quotes (') from search strings The multiclass_query function replaces single quotes with spaces (')
	( ).  This causes a problem when toggling between Advanced and Basic
	search.  If a search is conducted with a ' in it, that quote appears
	in the basic search box displayed above the results.  However, if
	the user then clicks the 'Advanced' button to toggle to the advanced
	search the single quote is missing from the search term.  By
	removing the line $query =~ /s/'/ /go; from Biblio.pm this problem
	is resolved.

	Signed-off-by: Liam Whalen <lwhalen@evergreen-dev.catalogue.nrcan.gc.ca>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-03  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0589.money.materialized_summary_payment
	-triggers.sql: Upgrade script for a patch from Steven Callender
	addressing payment types in money.materialized_summary_payment

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-28  Steven Callender <stevecallender@esilibrary.com>

	* Open-ILS/src/sql/Pg/080.schema.money.sql,
	Open-ILS/src/sql/Pg/1.4.0.5-1.6.0.0-upgrade-db.sql: A fix so that
	the last payment types will be cash_payment and check_payment rather
	than bnm_payment for cash and check payments.


	Signed-off-by: Steven Callender <stevecallender@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-02  Joseph Lewis <joehms22@gmail.com>

	* Open-ILS/web/Makefile.am,
	Open-ILS/web/opac/skin/craftsman/css/default.css,
	Open-ILS/web/opac/skin/craftsman/css/layout.css,
	Open-ILS/web/opac/skin/craftsman/js/rdetail.js,
	Open-ILS/web/opac/skin/craftsman/js/result_common.js,
	Open-ILS/web/opac/skin/craftsman/js/search_bar.js,
	Open-ILS/web/opac/skin/craftsman/js/sidebar.js,
	Open-ILS/web/opac/skin/craftsman/xml/advanced/adv_global_row.xml,
	Open-ILS/web/opac/skin/craftsman/xml/advanced/advanced_global.xml,
	Open-ILS/web/opac/skin/craftsman/xml/body.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/altcanvas.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/cn_browse.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/css_common.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/fonts.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/holds.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/libselect.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/login.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/logo.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/orgtree.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/searchbar.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/sidebar.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/statusbar.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/tips.xml,
	Open-ILS/web/opac/skin/craftsman/xml/footer.xml,
	Open-ILS/web/opac/skin/craftsman/xml/home/homesearch.xml,
	Open-ILS/web/opac/skin/craftsman/xml/home/index_body.xml,
	Open-ILS/web/opac/skin/craftsman/xml/page_cnbrowse.xml,
	Open-ILS/web/opac/skin/craftsman/xml/page_myopac.xml,
	Open-ILS/web/opac/skin/craftsman/xml/page_rdetail.xml,
	Open-ILS/web/opac/skin/craftsman/xml/rdetail/rdetail_cn_details.xml
	,
	Open-ILS/web/opac/skin/craftsman/xml/rdetail/rdetail_copyinfo.xml,
	Open-ILS/web/opac/skin/craftsman/xml/rdetail/rdetail_extras.xml,
	Open-ILS/web/opac/skin/craftsman/xml/rdetail/rdetail_summary.xml,
	Open-ILS/web/opac/skin/craftsman/xml/result/filtersort.xml,
	Open-ILS/web/opac/skin/craftsman/xml/result/result_info.xml,
	Open-ILS/web/opac/skin/craftsman/xml/result/result_lowhits.xml,
	Open-ILS/web/opac/skin/craftsman/xml/result/result_table.xml,
	Open-ILS/web/opac/theme/craftsman/css/colors.css: Remove craftsman
	skin.   Via LP: https://bugs.launchpad.net/evergreen/+bug/820010 And this email thread:

	http://libmail.georgialibraries.org/pipermail/open-ils-dev/2010-August/006269.html

	Signed-off-by: Joseph Lewis <joehms22@gmail.com>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-24  Dan Scott <dan@coffeecode.net>

	* README: Format an unordered list appropriately The list of developer prereqs was munged inline rather than as a
	list.

	Signed-off-by: Dan Scott <dan@coffeecode.net>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-21  Dan Scott <dan@coffeecode.net>

	* README: Provide Fedora-friendly instructions for the DBD libraries We had only provided the Debian / Ubuntu location of the
	libdbi-libdbd libraries, so add the Fedora location as well.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-21  Dan Scott <dan@coffeecode.net>

	* README: Bring more of the wiki docs over to the README Document Perl prerequisites for a standalone PostgreSQL server.
	Include a section on starting Evergreen and basic troubleshooting.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-21  Dan Scott <dan@coffeecode.net>

	* README: Update the README to include database installation
	instructions A long time ago, the database server was installed by default.
	Nowadays, installing the database server is a separate step reserved
	for whatever machine you want to devote to PostgreSQL.  Not that you
	can't put it on the same machine as the rest of Evergreen and
	OpenSRF...

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-21  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/extras/Makefile.install: Correct varname for
	PostgreSQL RPMs On Fedora, Red Hat, and CentOS, we were still trying to install the
	set of PostgreSQL RPMs for PostgreSQL 8.4 using PGSQL_84_RPMS.  This
	had been updated to PGSQL_90_RPMS to match the updated database
	version - using the right varname resolves the problem (at least on
	Fedora).

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-08-02  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0588.schema.replace_field-default-value
	.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.replace_field-default-value
	.sql: Stamped upgrade script for user/miker/replace_field_fix

	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-08-02  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.replace_field-default-value
	.sql: Have replace_field return input XML when no replace rule is
	provided

	Signed-off-by: Mike Rylander <mrylander@gmail.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-08-01  Bill Erickson <berick@esilibrary.com>

	*
	Open-ILS/web/templates/default/conify/global/config/record_attr_def
	inition.tt2: Avoid xml_transform retrieval in record attr def editor config.xml_transform stores large chunks of XML.  Fetching it angers
	Ejabberd on my test system.  All we need is the name, so use the new
	AutoFieldWidget.searchOptions param to do just that.

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-08-01  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js: 
	AutoFieldWidget support for augmenting pcrud search options Adds a new searchOptions attribute to AutoFieldWidget for specifying
	additional parameters to pcrud when retrieving linked objects.  The
	initial use case is for supporting a "select" list to allow
	AutoFieldWidget to retrieve only the display column of a linked
	object and not the whole object.  Example:  // fetch 'remote_field_name' on the remote objects instead of  // fetching the entire object  myGrid.overrideWidgetArgs.some_field = {searchOptions :  {"select":{"some_hint":["remote_field_name"]}}};

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-14  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ.pm: calculate
	penalties when letting Mark Item Damaged add bills

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-08-02  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Fix
	oils_i18n_gettext id numbers config.metabib_field ids 29/30 had 28 for translation id.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-31  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/spine_labels.js: use isNaN
	here, since NaN == NaN => false

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-21  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/standing_penalties.js: 
	Correctly populate certain columns in the patron Messages interface When applying penalties, the csp's referenced by the ausp's are
	fleshed.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-07-28  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/test/mfhd.t: Fix
	broken builds due to test that can't find its data LP 817699 reports a problem that began with commit
	e9cd992fa4dbf1013346336193cb7469ecee10a8, reintroducing a problem
	that had previously been resolved with commit
	f017d1261c369b9b5cc3c9cfc4f50d3cdf12a445. In short, tests can and
	are run from different directories, but a new test opened a file
	without making any allowance that the test might be run from
	anything other than the /test/ directory.  This fix uses the dirname(__FILE__) approach to provide the
	appropriate relative directory for the test data, and enables the
	tests to be processed without dying.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-28  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/js/dojo/openils/acq/nls/acq.js,
	Open-ILS/web/js/ui/default/acq/common/li_table.js: Make users
	confirm they really want to delete lineitems from POs...  ... when they've already been ordered. There's really no reason to
	ever make such a deletion this that I can think of, but I use a
	confirm() instead of stricter measures in case I'm missing
	something.


	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-28  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0587.maintain_control_numbers_with_OCLC
	_awareness.sql,
	Open-ILS/src/sql/Pg/upgrade/xxxx.maintain_control_numbers_with_OCLC
	_awareness.sql: Stamped upgrade for user/dbs/oclcnumbers

	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-07-21  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/upgrade/xxxx.maintain_control_numbers_with_OCLC
	_awareness.sql: Prevent control numbers from duplicating In maintain_control_numbers(), if you have more than one 001 or 003,
	and at least one is the correct one, you will end up duplicating the
	correct number every time the record is saved.  For example, if the incoming record was record ID # 12345, and the
	record contained: 001: 12345 001: ocm10202 ... then after maintain_control_numbers() ran, the record would
	contain: 001: 12345 001: 12345 Also, clean up some leftovers from the refactor I suggested in the
	previous commit.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-07-21  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/xxxx.maintain_control_numbers_with_OCLC
	_awareness.sql: Add an unwrapped upgrade script for OCLC-aware
	control numbers The upgrade script creates the SCN and LCCN search indexes and
	populates them using metabib.full_rec as a source; cheating, but the
	normalized values will work for non-exact search purposes. Sites can
	reingest all of their bibs if they want exact search to work.  Also, refactor maintain_control_numbers() using a suggestion by Dan
	Wells to eliminate some duplicate code.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-07-21  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql: Treat OCLC numbers
	specially in maintain_control_numbers For some reason, many records that come with OCLC numbers in the 001
	field are not populated with a 003 field. This resulted in the OCLC
	number being thrown away entirely, rather than being moved into the
	035, as there was no corresponding control number identifier field.  However, given that we know that control numbers starting with "ocm"
	or "ocn" are special OCLC numbers, we can generate the 035
	accordingly even in the absence of a 003. This update to
	maintain_control_numbers() teaches it to do the right thing for OCLC
	numbers.  In addition, add an identifier search index so we can easily find
	records by their system control numbers (035 $a subfields).

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-07-25  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/extras/Makefile.install: Ubuntu Lucid needs
	MARC::Record from CPAN As Ubuntu Lucid ships with MARC::Record 2.0.0, and Serials requires
	2.0.1 or greater, we must install MARC::Record from CPAN or face
	failing open-ils.search requests.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-07-21  Michael Peters <mrpeters@library.in.gov>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/CopyLocations.pm: 
	LP#813151 Copy Location sort order in Advanced Search This patch addresses the unintuitive copy location sort order in
	Advanced Search when searching at a specific branch. Thanks to Dan
	Wells for the code suggestion which changes the order in the listbox
	to alphabetical sort by asset.copy_location.name.  Tested, and
	confirmed working in 2.0.4 test and production environments.


	Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-06-10  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_extras.xml,
	Open-ILS/web/opac/skin/default/xml/result/result_table.xml: 
	NOVELIST/CHILIFRESH include statements missing a hash which was
	causing (none) errors.


	Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/patron/util.js: adjust legacy xul
	column definitions for dates/timestamps to ensure correct  sorting

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-18  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/admin/transit_list.js,
	Open-ILS/xul/staff_client/server/admin/work_log.js,
	Open-ILS/xul/staff_client/server/cat/copy_browser.js,
	Open-ILS/xul/staff_client/server/cat/copy_buckets.js,
	Open-ILS/xul/staff_client/server/cat/copy_summary.xul,
	Open-ILS/xul/staff_client/server/cat/record_buckets.js,
	Open-ILS/xul/staff_client/server/cat/z3950.js,
	Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.js,
	Open-ILS/xul/staff_client/server/circ/checkin.js,
	Open-ILS/xul/staff_client/server/circ/checkout.js,
	Open-ILS/xul/staff_client/server/circ/copy_details.xul,
	Open-ILS/xul/staff_client/server/circ/copy_status.js,
	Open-ILS/xul/staff_client/server/circ/in_house_use.js,
	Open-ILS/xul/staff_client/server/circ/renew.js,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/patron/hold_details.js,
	Open-ILS/xul/staff_client/server/patron/holds.js,
	Open-ILS/xul/staff_client/server/patron/items.js,
	Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_items.js,
	Open-ILS/xul/staff_client/server/serial/manage_subs.js: remove
	circ.util.std_map_row_to_columns; default to the one provided by
	list.js

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-18  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/util/list.js,
	Open-ILS/xul/staff_client/server/circ/util.js: Better sort support
	for xul lists (see launchpad bug
	://bugs.launchpad.net/evergreen/+bug/751745) Example of supplying a
	sort_value function for item Create Date, and automatic sort_value
	for fm_columns-generated timestamp and money column definitions.
	Need to provide more such functions, and eventually move everything
	over to fm_columns

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-25  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/web/opac/skin/default/js/holds.js,
	Open-ILS/web/opac/theme/default/css/colors.css: Manage parts holds
	warning (and removal) w/ CSS Use add/removeCSSClass to apply and remove holds parts selector
	warning instead of inline style.border management, which (when using
	'auto') causes problems in IE.

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/circ/util.js: sort hold Queue
	Position column correctly in xul lists

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-25  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/web/opac/skin/default/js/holds.js: Comment out line that
	breaks holds placement in IE auto is not a valid option for a border, and IE faults on it.  Other
	browsers seem to ignore it, as far as I can tell.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-20  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/xul/staff_client/server/circ/checkout.js: LP#647121 Event
	handling on override abort Discussed on IRC, phasefx discovered that several events were not
	being properly handled when they were empty strings.  Tested and
	working on Evergreen 2.0.4.


	Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-19  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/Holding.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/test/mfhd.t,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/test/mfhddata2.txt: 
	MFHD compressed holding fixes 1. Add new utility method to MFHD.pm:     holdings_by_caption(): return all holdings attached to a     given caption 2. Add 'passthru_open_ended' option to get_decompressed_holdings()     Previously, attempts to decompress an open-ended holding     would error out.  Now, in the absence of this option,     open-ended holdings are discarded and you get a warning     (since they cannot logically be decompressed), while if     this option is 'true' they are passed back unaffected 3. compressed_to_last() on an open-ended holding now more    correctly returns 'undef' rather than the unaltered holding 4. get_compressed_holdings() will now honor an open-ended holding    by treating it as "infinite", and thus absorbing any holdings    which would follow 5. Overloaded comparison operator now correctly detects "swap"    cases (where only the second operand is a holding) 6. Overloaded comparison operator now consistently treats    open-ended holdings as "greater-than" a single or closed    holding which has the same starting point 7. Fix 2 thinkos in comparison operator for overlapping    compressed holdings 8. Add new compressed_end() method to Holding.pm which can add    or set a new ending to a holding, making compressed if needed 9. Correctly recognize partially compressed holdings     If a holding is defined as:         863 40 $81.1 $a1 $b2-10     this actually means:         863 40 $81.1 $a1-1 $b2-10     so let's make sure to treat it that way.  9. Expand the MFHD test suite to better cover the improvements    in this commit There is also the beginnings of a _get_truncated_holdings() method
	for handling odd cases where an open-ended holding is followed by a
	single/closed holding, but it is currently commented out, pending
	further design consideration.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-19  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0583.schema.aging_circ_view.sql: rerun
	DB update 0582 to avoid upgrade problem This implements the same update as 0582.schema.aging_circ_view.sql,
	and exists purely the the sake of avoid a potential upgrade glitch
	for somebody who's upgrading from 2.0.8+ that includes a version of
	this fix that's not compatible with with 2.1+.

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-18  Steven Callender <stevecallender@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/display.js: lp#812550:
	Removed nulls from showing for patron penalties when no note
	attached to penalty.



	Signed-off-by: Steven Callender <stevecallender@esilibrary.com>
	Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-18  Dan Scott <dan@coffeecode.net>

	* Open-ILS/xul/staff_client/server/cat/spine_labels.js: Address
	minor code formatting consistency The rest of the code has spaces around the conditional clause in an
	if() statement, so do likewise here.

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-06  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/xul/staff_client/server/cat/spine_labels.js: Spine label
	editor assumes LC as reported in LP #780665.  This patch encapsulates the LC-assuming code in an IF block which
	considers the asset.call_number.volume.label_class.  If that is
	equal to 3, it will use the LC formatting.


	Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-07-14  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/bill2.js: fix bill ui
	display update bug where total owed and total checked were not
	updated if the total owed as paid off in full

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0582.schema.aging_circ_view.sql,
	Open-ILS/src/sql/Pg/upgrade/XXX.schema.aging_circ_view.sql: Stamping
	upgrade script for "Bad join condition all_circulation view"

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/upgrade/XXX.schema.aging_circ_view.sql: Bad join
	condition in secondary (physical) address lookup, causing terrible
	performance of circ aging

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-13  mrpeters-isl <mrpeters@library.in.gov>

	* Open-ILS/xul/staff_client/server/cat/copy_browser.js: LP795032 Fix
	cursor rendering and dropdown position in holdings maintenance OU
	dropdown

	Signed-off-by: mrpeters-isl <mrpeters@library.in.gov>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0581.data.opac_renewal_reuse_circ_lib.s
	ql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.opac_renewal_reuse_circ_lib.sql: 
	Stamping upgrade script for "Opac Renewal at original circ library"

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.opac_renewal_reuse_circ_lib.sql: 
	Default to existing behaviour for the new circ-behaviour global flag

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-05  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm: 
	Cache global flag at first use This way only the first opac renewal per backend has to ask the
	database for the global flag.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-05  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.opac_renewal_reuse_circ_lib.sql: 
	Unwrapped upgrade script

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-02  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql: Opac Renewal at
	original circ library Fixes multiple potential issues: 1 - Bad home ou on patron breaks
	    circ rules Ex. Patron edited while editor would let you pick bad
	home ou 2 - Item not allowed to circ at patron home ou     Ex. Patron went to where they were allowed to pick it up 3 -
	    Fines change to patron home ou fine rules Ex. Patron's home ou
	    doesn't charge fines but circ lib does Ex. Circ lib doesn't charge
	fines but Patron's home ou does

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0580.schema.aou_parent_protect.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.aou_parent_protect.sql: Stamping
	upgrade script for "Prevent OU loops at DB level"

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-15  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.aou_parent_protect.sql: Unwrapped
	upgrade script for ou loop protect May need to be split into "create function" and "add trigger"
	pieces.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-15  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/005.schema.actors.sql: Prevent OU loops at DB
	level Database trigger to prevent actor.org_unit from being parent of self Actually detects any loops, even those above the current point

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-07  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search.pm: Make
	spell-checking case insensitive As it stands, if you search for a proper noun using lower case, but
	manage to trigger the "did you mean" functionality, all the words
	are 'corrected' even if just the case is wrong.  However, we are
	stripping out the best correction precisely because it is the same
	word, different case.  It is a bit confusing to explain, but here is
	an example: daniel potatoe gets corrected to: Daniela potato This happens because the current spell check is case sensitive, so
	'daniel' is spelled wrong, but then we remove 'Daniel' from the list
	of corrections (presumably to avoid possibly suggesting terms which
	would yield the same exact result set).  So, we either need to make the spell-check itself case insensitive,
	or stop removing the re-cased corrections.  Since the catalog search
	itself is already case-insensitive, I think it makes sense that the
	spell check should follow suit.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0579.schema.fix_checkout_overrides.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_checkout_overrides.sql: 
	Stamping upgrade script for "INDB Circ Matrix + Checkout Overrides
	Fix"

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-07  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.fix_checkout_overrides.sql: 
	Unwrapped upgrade script for checkout overrides Replace the function.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-06  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/100.circ_matrix.sql: INDB Circ Matrix +
	Checkout Overrides Fix Move most failures to after matchpoint lookup.  This prevents "no
	duration rule" errors on overridable errors.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-15  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0578.schema.part_holds_bib_report.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.part_holds_bib_report.sql: Stamping
	upgrade script for "Fix part holds in reporter.hold_request_record"

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-15  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.part_holds_bib_report.sql: 
	Unwrapped upgrade script

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-15  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/reporter-schema.sql: Fix part holds in
	reporter.hold_request_record Specifically, make them show a bib id, instead of null.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-14  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/web/opac/skin/default/js/holds.js: Corrected the logic of
	format string building for metarecord holds and...  made hold possiblity checking for metarecord holds respect the
	format string (so you can't place holds on formats for which there
	will never be anything targetable) Made possible by much concerted effort from Mike Rylander

	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-14  Bill Erickson <berick@esilibrary.com>

	*
	Open-ILS/src/sql/Pg/upgrade/0563.data.collections_exempt_perm.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.data.collections_exempt_perm.sql: 
	Stamped upgrade script for collections_exempt_perm

	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-03  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.data.collections_exempt_perm.sql: 
	Un-stamped upgrade script for collection exempt perm

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-03  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/web/js/ui/default/actor/user/register.js: Permission to
	control patron-collections-exempt Adds a new permission 'UPDATE_PATRON_COLLECTIONS_EXEMPT' which
	controls who can toggle the circ.collections.exempt user setting in
	the patron registration interface.

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-14  Mike Rylander <mrylander@gmail.com>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	ion.pm: Correct CDBI thinko -- search_where is smart about
	wantarray, search is not

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-13  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/upgrade/0576.fix_maintain_901_quoting.sql: for
	realz, this time

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-13  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/upgrade/0576.fix_maintain_901_quoting.sql: fix
	backporting thinko

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-12  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0576.fix_maintain_901_quoting.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_maintain_901_quoting.sql: pin
	an upgrade version for fix_maintain_901_quoting

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-12  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.fix_maintain_901_quoting.sql: 
	upgrade script for bugfix for lp#809540

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-12  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.functions.config.sql: lp#809540: quote
	replacement values properly in maintain_901() Prevents a failure if, for example, the tcn_value of a bib to be
	added or updated contains the string '\1'.

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-12  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/advanced.js,
	Open-ILS/web/opac/skin/default/xml/common/sidebar.xml: alert the
	user when the OPAC's Quick Search->Item Barcode function returns a
	pre-cataloged item

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-11  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js: append line
	items to table in specified order Prior to this patch, the order that line items were displayed in
	(e.g.) a purchase order view was effetively randomized based on the
	amount of time it would take for async calls to fetch additional
	line item details to return.

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-06  Mike Rylander <mrylander@gmail.com>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI/biblio.p
	m: Correct CDBI field name on biblio::peer_bib_copy_map

	Signed-off-by: Mike Rylander <mrylander@gmail.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-07  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: 
	Ignore part-mapped copies for mr/title/volume holds

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-24  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI/biblio.p
	m,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/dbi
	.pm: Add Class::DBI linking for monograph parts (and some for
	conjoined items AKA peer bibs)

	Signed-off-by: Mike Rylander <mrylander@gmail.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-24  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm: 
	Correct a documentation comment

	Signed-off-by: Mike Rylander <mrylander@gmail.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-24  Mike Rylander <mrylander@gmail.com>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	ion.pm: Filter out copies that have a monograph part designator when
	the hold is a non-P hold

	Signed-off-by: Mike Rylander <mrylander@gmail.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-28  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/holds.js,
	Open-ILS/web/opac/skin/default/xml/common/holds.xml: Suggest parts
	selection on failed parts-capable hold When a title has copy parts and the user does not select a specific
	part for the hold, treat it as a regular title hold.  If the title
	hold fails, suggest to the user that he/she should select a specific
	part, since that opens the door to a new set of potentially
	capturable copies, which allow the hold to be successfully placed.

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-07  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0573.schema.staff_search_find_no_copies
	.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.staff_search_find_no_copies.sql: 
	Stamping upgrade version number for staff_search_find_no_copies
	branch (backport)

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-06  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/300.schema.staged_search.sql: Allow staff
	search to find bibs sans copies AKA, no call number OR no call numbers with copies

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-06  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.staff_search_find_no_copies.sql: 
	Unwrapped upgrade script

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-17  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/copy_editor.js: in unified
	vol/copy editor disallow editing of item attributes when no copies
	except via templates

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-16  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Actor.pm: Delete
	protection - Ensure you can touch group Same protection editing a user seems to get: If you don't have the
	right group_application.user perm, reject

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-07-05  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm: 
	Can't use 0 in true/false, use defined instead This allows for setting renewals/grace period to 0 by force

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-02  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm: 
	Fix checkout on alternate patron barcode Specifically, when a non-primary patron barcode is used.  Such as
	via SIP2.  NOTE: This does not change the behavior of inactive cards, nor will
	stock Evergreen usage produce a situation where this fix comes into
	play. --miker

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-05  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/templates/password-reset/request-form.tt2,
	Open-ILS/src/templates/password-reset/reset-form.tt2: LP805971:
	Specify UTF8 encoding in password reset templates As reported by Liam Whalen in Launchpad bug 805971: "The file
	/openils/var/template/password-reset/reset-form.tt2 does not display
	utf-8 characters.  I modified it to include '<meta
	http-equiv="Content-Type" content="text/html; charset=UTF-8" />'
	inside the <head> tag, and the fr-CA version of the page now
	displays correctly." I duplicated the problem in Firefox 5 and confirmed that the
	addition of the META tag corrects the problem.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-07-01  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0571.schema.facet_normalizer.sql: 
	Normalize facet values Spotted by Lebbeous Fogle-Weekley, facet values were not being
	normalized.  This is due to changes in how facets are stored in
	2.1+.  This alternate implementation mirrors the way search_field
	index definitions work, which is a bit cleaner than inserting
	normalization into the field extraction process.

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-01  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0570.schema.fix-authsort.sql,
	Open-ILS/src/sql/Pg/upgrade/0yyy.schema.fix-authsort.sql: Stampping
	upgrade for authorsort fix from Lebbeous

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-30  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0yyy.schema.fix-authsort.sql: Fix the
	SVF authorsort field (metabib.record_attr->'authorsort') It's important not to include things like $0 that we wouldn't want
	in there.

	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-01  Mike Rylander <mrylander@gmail.com>

	* : commit 16e6d2959b6a39d3ffac1ae0b427061bff126b9b Author: Jason
	Etheridge <jason@esilibrary.com> Date:   Tue Jun 14 14:50:33 2011
	-0400


2011-06-14  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/util/print.js: when using
	params.data keys as print macros, render bare numbers correctly, and
	treat nulls as empty strings

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-28  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/upgrade/0569.schema.unapi-auri-fix.sql: Correct
	copy-paste-o spotted by Dan Scott

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-28  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/templates/default/acq/common/li_table.tt2: Michael
	Peters provided a patch to add some missing labels...  ... to a key acquisitions interface.  It works.  Also fixed some
	unclosed tags while I was at it.  Wasn't sure whether to copy and paste Michael's sign-off or what,
	but here's the link to his original patch for purists:

	https://launchpadlibrarian.net/74191964/0001-LP802578-Acquisitions-Batch-copy-update-missing-head.patch

	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-06-24  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/js/result_common.js: Fix broken
	images for items without ISBNs in search results The search results code happily sets the src attribute of the cover
	image to an empty string (as returned by cleanISBN()) if currentISBN
	has not been defined (which is generally the case if an item doesn't
	have an ISBN, such as a DVD or a thesis or an old book).  Protect against the empty string and set the src attribute to
	'/opac/images/blank.png' to avoid broken image indicators in search
	results.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Dan Scott <dan@coffeecode.net>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-27  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/main/constants.js,
	Open-ILS/xul/staff_client/server/cat/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties,
	Open-ILS/xul/staff_client/server/patron/holds.js: Saner behavior for
	Actions for Selected Holds -> Transfer to Marked Title * Transfer the actual selected title holds, rather than all title
	holds for the bibs referenced by those selected.  * middle layer method for changing the target and resetting
	specified holds * label change for clarity, Transfer All Title Holds

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-27  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/999.functions.global.sql,
	Open-ILS/src/sql/Pg/upgrade/0568.cache_visibility_speed_boost.sql: 
	Cleanup of missed commit from the original topic branch  (cherry picked
	from commit b22d801e97565fc64205bf67e5a55d44090e1408)

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-27  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/999.functions.global.sql,
	Open-ILS/src/sql/Pg/upgrade/0568.cache_visibility_speed_boost.sql: 
	Backport of cache visbility trigger speedup Backporting:  cdcbbbbc520e91f003b68d716dcd0d75a2b68971  27bed378975a1164232d0b922cd03ce7493dee82  f762b75ac430ed70365ebc0385d2c9d0da04ab26 from master

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-24  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ.pm: with scan
	missing pieces, retarget affected holds prior to recirculating to
	previous patron, lest the checkout reset the holds for us without
	retargeting

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-22  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: 
	retarget title holds after transfering to a new bib

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-24  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/extras/Makefile.install, README: Support Fedora 15 as
	a target in Makefile.install Add Fedora 15 to the Makefile.install as a simple clone of the
	Fedora 14 target for now. Correct Makefile.install target names in
	README, and point out that nothing special is required for Fedora 15
	for PostgreSQL 9 support.  While we're in the README, rip out the Dojo toolkit install info as
	packaged releases include Dojo now (we retain the developer
	instructions for installing Dojo manually for git users, of course).

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-13  Ben Webb <bjwebb67@googlemail.com>

	* Open-ILS/src/Makefile.am, Open-ILS/src/apachemods/Makefile.am,
	Open-ILS/src/perlmods/Makefile.am, Open-ILS/web/Makefile.am,
	Open-ILS/xul/staff_client/Makefile.am: Respect DESTDIR during the
	build process Add $(DESTDIR) to paths it is currently missing from Manually
	specify the apxs2 install location so that DESTDIR can be prepended
	Attempt to create the apache directory if it does not exist

	Signed-off-by: Ben Webb <bjwebb67@googlemail.com>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-24  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0566.schema.unAPI_XMLAGG_cleanup.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.unAPI_XMLAGG_cleanup.sql: 
	Stamped DB upgrade script for for XMLAGG cleanup

	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-24  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.schema.unAPI_XMLAGG_cleanup.sql: 
	Upgrade script for the XMLAGG cleanup

	Signed-off-by: Mike Rylander <mrylander@gmail.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-24  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/990.schema.unapi.sql: Address LP#801129, in-db
	unAPI failure Cleanup of improper use of XMLAGG in the unAPI stored procs first
	identified by Bill Erickson in
	https://bugs.launchpad.net/bugs/801129

	Signed-off-by: Mike Rylander <mrylander@gmail.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-23  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/Makefile.am: bump xulrunner version

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-22  Jason Stephenson <jstephenson@mvlc.org>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Trigger/Validator.pm: 
	Check if hold is really available in Trigger::Validator.  Add checks for shelf time and no fulfillment time in HoldIsAvailable
	in OpenILS::Application::Trigger::Validator.  We've had some issues with poorly migrated data and people messing
	with holds that causes the original logic to trigger for unfilled
	holds. Plus, the extra precaution of checking more precise
	conditions of an actually filled hold can't hurt, can it?


	Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-22  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Actor/Container.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/TemplateBatchBibUpdate.pm,
	Open-ILS/web/opac/common/js/config.js: Make bucket content retrieval
	authoritative LP#492036, we neeed all bucket methods to be authoritative.  Some
	already were, this finishes the job.

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-22  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/xul/staff_client/server/locale/en-US/patron.properties,
	Open-ILS/xul/staff_client/server/patron/search_result.js: LP#790639:
	Provide actual text, rather than id values in patron search results
	for various columns Cleaned up some tabs versus spaces and a needless trailing comma
	from original patch.  Not porting to master, hoping to use
	collab/phasefx/fm_columns instead.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Michael Peters <mrpeters@library.in.gov>

2011-06-21  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Serial.pm,
	Open-ILS/web/opac/skin/default/js/rdetail.js,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js,
	Open-ILS/xul/staff_client/server/serial/ssub_editor.js: Further
	clean-up of Serials interfaces When trying to come up with good tests, found a few bugs (imagine!).
	Some have been nagging for a while now.  1) For 'MFHDDrawn' event, make sure it runs if deleting the last
	serials data of any kind for that record (to unpopulate the menus
	properly) 2) Make sure global mfhd member (g.mfhd) is cleared in the same case
	(i.e. deleting the last serials data for that record) 3) Add a string to better indicate when no MFHD records are
	available for 'Legacy Record Entry' drop-down 4) Convert submitted empty drop-down values to 'null' as needed in
	distribution editor 5) Mark subscription 'start date' as a required field 6) Make serial virtual records better handle deleted 'legacy record
	entries' attached to distributions, and also expose non-deleted
	record entries even if in 'use_sdist_only' summary mode

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-17  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js: Better
	coordination of MFHD/SRE adding/deleting Adding or deleting MFHD records from the XUL menus requires
	coordinating the OPAC display, the XUL menus, and the Serial Control
	distribution editors.  The previous code frequently required some
	non-obvious manual refreshing to make it work.  This commit keeps them in sync using custom events instead.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-21  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/perlmods/t/14-OpenILS-Utils.t: Add unit tests for LP
	800269 - holdings for captions only Running "prove -l lib" in Open-ILS/src/perlmods shows that the two
	new unit tests pass, whereas they fail using the previously
	installed version of MFHD.pm. Good evidence that the fix from
	dbwells does indeed solve the reported bug.

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-21  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD.pm: MFHD compressed
	holdings short-circuit logic If you attempt to get compressed (or uncompressed) holdings from a
	MFHD record with only a caption, the code should short-circuit and
	return an empty list.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-21  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/xul/staff_client/server/skin/patron_display.css: 
	LP#783590 fix patron alert message highlighting


	Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-21  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0561.schema.tnf_index.sql: Reserve 0561
	(used in 2.0) to avoid confusion

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-17  Dan Scott <dan@coffeecode.net>

	* Open-ILS/examples/opensrf.xml.example: Set AC timeout value to 3
	seconds and describe tradeoffs As discussed on the Evergreen Development mailing list, the higher
	the AC timeout value, the greater the risk of a denial of service.
	30 is therefore too high to be comfortable as a default setting, so
	we're dropping it down to 3 as a compromise between the original
	value of 1 (which resulted in a number of request timing out where
	added content was actually available) and the much-less-safe 30.  In addition, we document inline the risk/reward of different values
	and provide some justification for the default value that we chose,
	so that Evergreen system administrators will have guidance when
	tweaking this setting.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-20  Dan Scott <dan@coffeecode.net>

	*
	Open-ILS/src/sql/Pg/upgrade/0559.schema.biblio.extract_located_uris
	.sql: DROP biblio.reingest_uris() after use We will hopefully only need to reingest URIs in bulk once, and can
	therefore DROP the biblio.reingest_uris() function after it has been
	successfully invoked.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-06-20  Dan Scott <dan@coffeecode.net>

	*
	Open-ILS/src/sql/Pg/upgrade/0559.schema.biblio.extract_located_uris
	.sql: Protect URI reingest from failure due to malformed XML In an ideal world, there would be no malformed XML. But our world is
	the real world of libraries, and while the well_formed_xml()
	protects against malformed XML in Evergreen 2.0 systems, in some
	cases bad XML has been able to find its way into Evergreen systems
	in the past.  A single biblio.record_entry row containing malformed XML in the
	marc column will prevent the call to reingest URIs from succeeding.
	By limiting the set of records to those with well-formed XML, we can
	increase the chance of the URI reingest succeeding at the cost of
	more processing time.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-06-14  Thomas Berezansky <tsbere@mvlc.org>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	ion.pm: Grace period is an interval. Convert to seconds.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-06-17  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0560.fix_opac_copy_vis_cache.sql: 
	lp#788763 - final upgrade script

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-06-17  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/999.functions.global.sql: lp#788763 - fix
	updating copy status, locations, and OU visibiilty

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-06-16  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Acq/Order.pm: 
	Repaired exchange rate PO activation bug Code was using the wrong hash key to read data from cstore request,
	resulting in a NULL debit amount when activating a PO with a
	different provider => fund currencies.  This resulted in POs that
	could not be activated.

	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0559.schema.biblio.extract_located_uris
	.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.biblio.extract_located_uris.sql: 
	Move the user/dbs/lp797304_lp797307 upgrade script into place with a
	number

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.biblio.extract_located_uris.sql: 
	Merging branch user/dbs/lp797304_lp797307  Cherry picking the following: commit 7be2a32620587af27de4316e42a308e913e9314c Author: Dan Scott
	<dan@coffeecode.net> Date:   Tue Jun 14 22:35:26 2011 -0400     Add a stored procedure to reingest problematic URIs     Assuming that href = label in asset.uri is a red enough flag for
	    the problem in LP 797307 where the perfectly good label was
	    being thrown away, reingest the unique set of records connected with
	    such asset.uri rows.       commit 39fe0c4a8a3074ff4c1e427ad9f00a0760bac260 Author: Dan Scott
	<dan@coffeecode.net> Date:   Tue Jun 14 21:54:51 2011 -0400     Add unwrapped upgrade script for biblio.extract_located_uris     See XXXX.biblio.extract_located_uris.sql for the upgrade script,
	    waiting to be signed off and committed.        create mode 100644
	 Open-ILS/src/sql/Pg/upgrade/XXXX.biblio.extract_located_uris.sql commit 7e6d2bfd7e9a5cbe57e4aacdf0b4b015a566883d Author: Dan Scott
	<dan@coffeecode.net> Date:   Tue Jun 14 21:34:15 2011 -0400     Avoid duplicate row issues in biblio.extract_located_uris     As there is currently no unique constraint on the non-ID columns
	    of asset.uri, ensure that we only select a single ID from the
	    tables until we dedupe the tables. Use an ORDER BY to grab the
	    matching row with the lowest ID so we can clear out the rows with
	higher IDs.       commit e79a805299ec734a29ee5bfa77dc74bc1fd208cd Author: Dan Scott
	<dan@coffeecode.net> Date:   Tue Jun 14 14:02:49 2011 -0400     Fix LP 797304 and 797307 - asset.uri parsing bugs     Per 797304: one would expect asset.uri.label to be populated
	    with the value of 856 $y, however, it was getting populated with
	    856 $u - perhaps as a result of the ordering of array entries in
	    XPATH() not matching the XPath expression. Instead of including 856
	    $u in the XPath expression for uri_label, just assign its value to
	    uri_label if uri_label is otherwise NULL.      Per 797307: biblio.extract_located_uris() tries to reuse an
	    existing active asset.uri entry rather than create a new row;
	    however, it does not handle the case where there is no public note
	    aka "use restriction" and will end up creating a duplicate row every
	    time the record is reingested. Teach it to handle NULL values
	properly.       (cherry picked
	from commit da70b778268afff19c3dd4f2e9e4c9e85cfeb7e3)

	Signed-off-by: Mike Rylander <mrylander@gmail.com>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-15  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/bill2.js: lp797321:
	Disable the Apply Payment button during payment processing to
	mitigate chance of duplicate payments.  I can't actually reproduce the creation of duplicate payments
	locally with trunk/2.x, but there are reports of it, and this
	doesn't seem to hurt.  Not a complete solution, but better than
	before

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-06-13  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/extras/Makefile.install: Resolve Squeeze installation
	problems with PostgreSQL 9.0 When you install OpenSRF on Debian Squeeze, one of the packages (apache2-prefork-dev) installs 8.4 versions of libpq5 and libpq-dev
	as dependencies. These conflict with the 9.0 versions that are
	required as dependencies for PostgreSQL 9.0 - so get them out of the
	way, pin the 9.0 versions of the packages, and reinstall
	apache2-prefork-dev.  We will probably need to do something similar for Lucid.

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-13  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/xul/staff_client/server/serial/batch_receive.js: Fix a
	serial batch receive problem reported by Sally Fortin That prevents receiving items when not using units in some cases.


	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-06-13  Dan Scott <dan@coffeecode.net>

	* Open-ILS/examples/opensrf.xml.example: Set a more generous AC
	timeout value A timeout value of 1 second is a bit too tight for many added
	content providers; set the default to 30 seconds to avoid too many
	artificial timeouts.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-07  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/editor_base.js,
	Open-ILS/xul/staff_client/server/serial/scap_editor.js,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js: Support for
	required fields in Serial Control editors Adds a basic check for any fields marked as 'required', and alerts
	and prevents submitting if they are blank.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-06-13  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/locale/en-US/cat.properties: 
	clearer label for not charging last patron when marking an item
	damaged

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-13  Galen Charlton <gmc@esilibrary.com>

	* : updated favicon to match staff client logo Favicon created by Michael Peters <mrpeters@library.in.gov>

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-13  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/upgrade/0557.schema.in-db_unapi_copy_related_vi
	sibility-1.sql,
	Open-ILS/src/sql/Pg/upgrade/0558.schema.in-db_unapi_copy_related_vi
	sibility-2.sql: Typo, we need commas

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-13  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0557.schema.in-db_unapi_copy_related_vi
	sibility-1.sql,
	Open-ILS/src/sql/Pg/upgrade/0558.schema.in-db_unapi_copy_related_vi
	sibility-2.sql: Backporting
	36b0a67a4520151082e72056893d92ad3bf797f1, in-db unAPI improvement

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-13  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties: more
	s/Foreign/Conjoined/ Items label changes

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-13  Jason Etheridge <jason@esilibrary.com>

	* : commit 23ba3ddad28e8fcc8019a7486a6a3faf671e627f Author: Jason
	Etheridge <jason@esilibrary.com> Date:   Mon Jun 13 10:35:29 2011
	-0400


2011-05-31  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/common/js/Cookies.js,
	Open-ILS/web/reports/oils_rpt_common.xhtml,
	Open-ILS/xul/staff_client/server/admin/cash_reports.xhtml,
	Open-ILS/xul/staff_client/server/admin/copy_locations.xhtml,
	Open-ILS/xul/staff_client/server/admin/hold_pull_list.xhtml,
	Open-ILS/xul/staff_client/server/admin/hold_pull_list_classic.xhtml
	, Open-ILS/xul/staff_client/server/admin/non_cat_types.xhtml,
	Open-ILS/xul/staff_client/server/admin/stat_cat_editor.xhtml,
	Open-ILS/xul/staff_client/server/patron/user_edit.xhtml: Remove all
	references to Cookie(s).js and Cookies.js Dojo toolkit is the new Cookie manager, so any lingering references
	to Cookie.js (a typo in any case) are no longer valid, and we no
	longer need to ship Cookies.js with Evergreen.  Cookie.js typo was reported by Steven Chan in LP 790429

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-07  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Use
	the new status.opac_visible attribute in search summary Until we exposed the OPAC visibility of the status element as set in
	config.copy_status, We previously had to hardcode the logic for
	whether a given copy should be displayed based on its status. Now we
	can simply use the status.opac_visible attribute to determine
	visibility.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-07  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/SuperCat.pm: Add
	opac_visible attribute to copy and serial unit statuses config.copy_status defines an opac_visible column, but that
	attribute was not being exposed in the holdings XML, so code that
	displayed copies and serial units based on the holdings XML had to
	hardcode the display based on the status ID or name instead of using
	the configured setting.  To simplify display logic, teach holdings XML about the opac_visible
	column and expose its value in the status element as a new
	opac_visible attribute.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-06  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Make
	copy status visibility match default config.copy_status settings Previous version of this patch had hardcoded copy status settings to
	0, 7, 12 to match the "Available" settings, rather than the OPAC
	visibility settings available from config.copy_status for each
	status.  Until config.copy_status.opac_visible translates into an
	opac_visible attribute on the status element in the holdings XML,
	this is probably the best we can do.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-05-30  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Plug
	the many OPAC visibility holes in search result item display Check volume and circ_lib and copy status OPAC visibility (and
	deleted status in the case of volumes) in addition to the existing
	copy and copy-location checks.  Worst hack is hard-coded copy status IDs of 0, 7, 12 - but this is
	currently used throughout the code, so one more can't hurt that much (OWWW).

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-13  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/updates/check: Updater apparently reads extensionVersion Without it no updates are ever found. :(

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-11  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0549.unnest_oils_xpath_table.sql,
	Open-ILS/src/sql/Pg/upgrade/0550.unnest_biblio_extract_metabib_fiel
	d_entry.sql,
	Open-ILS/src/sql/Pg/upgrade/0551.unnest_metabib_remap_metarecord_fo
	r_bib.sql,
	Open-ILS/src/sql/Pg/upgrade/0552.unnest_biblio_map_authority_linkin
	g.sql,
	Open-ILS/src/sql/Pg/upgrade/0553.unnest_action_hold_request_permit_
	test.sql,
	Open-ILS/src/sql/Pg/upgrade/0554.unnest_search_query_parser_fts.sql
	, Open-ILS/src/sql/Pg/upgrade/0555.unnest_oils_xpath_table.sql,
	Open-ILS/src/sql/Pg/upgrade/0556.unnest_biblio_extract_metabib_fiel
	d_entry.sql: Update upgrade files that had conflicting numbers 0549 and 0550 were taken by other commits over time.

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-11  Dan Scott <dan@coffeecode.net>

	* : commit 6976c0594ff133aef7b5958a07b75d88782f02fc Author: Thomas
	Berezansky <tsbere@mvlc.org> Date:   Wed Jun 8 14:07:48 2011 -0400


2011-06-07  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/server/cat/copy_editor.js: Correct error
	in call number owning library change Send IDs to the backend, not objects.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-10  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Mark invalid
	home ous as such in patron editor

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-10  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/locale/en-US/offline.properties: 
	missing string for MFHD deletion

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-08  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm: 
	Extend hold shelf expire date beyond closed dates If the shelf_expire_time on a hold would land on a closed date for
	the pickup library, push the expire time out to just beyond the
	close date range, similar to the circulation due date overlap logic.  In the current iteration, the time component of the date is pushed
	out to the end of the day (23:59:59).  If this is not generally the
	desired behavior, an org setting could be added to bypass this step
	so that the time matches "now" (i.e. capture time) instead.

	Signed-off-by: Bill Erickson <berick@esilibrary.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/copy_browser.js: honor
	ui.unified_volume_copy_editor setting with Add Volumes in Holdings
	Maintenance

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-01  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/copy_editor.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: make
	unified vol/copy editor honor required stat cats

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-07  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.functions.aggregate.sql,
	Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/300.schema.staged_search.sql,
	Open-ILS/src/sql/Pg/pgmemcache-ou_tree_traversal_cache.sql,
	Open-ILS/src/sql/Pg/upgrade/0549.unnest_oils_xpath_table.sql,
	Open-ILS/src/sql/Pg/upgrade/0550.unnest_biblio_extract_metabib_fiel
	d_entry.sql,
	Open-ILS/src/sql/Pg/upgrade/0551.unnest_metabib_remap_metarecord_fo
	r_bib.sql,
	Open-ILS/src/sql/Pg/upgrade/0552.unnest_biblio_map_authority_linkin
	g.sql,
	Open-ILS/src/sql/Pg/upgrade/0553.unnest_action_hold_request_permit_
	test.sql,
	Open-ILS/src/sql/Pg/upgrade/0554.unnest_search_query_parser_fts.sql: 
	Use native unnest() db function instead of explode_array() Per LP 789747, the custom explode_array() database function was
	found to generate significantly slower results for searches than
	using the native (and equivalent) unnest() array function. Given
	that unnest() has been part of PostgreSQL since 8.4 and Evergreen
	2.0 requires a minimum of PostgreSQL 8.4, this patch removes the
	definition of the explode_array() functions and replaces its usage
	with unnest().

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-03  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Prevent future
	dates of birth in patron editor The patron editor form allowed staff to enter a date of birth that
	takes place in the future. While it is theoretically conceivable
	(hah) that a library might register patrons that have yet to be
	born, it is unlikely enough that we will not even assign this
	behavior to an org-unit setting, but we will take the bold move of
	using a regular expression to prevent a future dates of birth at
	all.  Note that if a library system travels into the past, this will cause
	all sorts of problems in the patron editor interface (not to mention
	overdues). Please do not mix Evergreen and time travel.


	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-02  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: Fix false MFHD
	editing cues (LP #791974) The in-DB serial holdings use the same general display code as the
	MFHD records, but were falsely triggering MFHD administration
	widgets when in fact no MFHD record exists.  These holdings were
	already being marked, so this fix honors that mark.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-02  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: Tweak MFHD scoping Three changes: 1) Add a closure for 'entryNum' value (currently used for some
	display placement and menu-entry correlation) 2) Remove depth-climb to simplify code and better approximate copy
	scoping 3) Move 'here' assignment out of the foreach

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-27  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: Fix rendering of
	MFHD records when ownership is out of scope Dojo would die with a null reference error when an MFHD record was
	retrieved that was outside of the current OU search scope.  For
	example, if a given bib record had one linked MFHD record for BR1,
	and one linked MFHD record for BR4, the details page would choke
	trying to draw the MFHD holdings in a scope that only included BR1
	and end up drawing nothing. Ungood.  Moving the ownership check and invoking _holdingsDrawMFHD() only
	after ensuring that the record is within our scope resolves the
	problem.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-06  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/web/opac/common/js/config.js: LP 791546: advanced search
	ISBN/ISSN in .staff mode In 1.6, advanced search ISBN/ISSN searches always operated in .staff
	mode, returning results whether the results should have been visible
	to the user or not. This confused patrons who saw records to which
	they had no access.  In 2.0, this behaviour changed so that advanced search ISBN/ISSN
	searches never operated in .staff mode. This confused staff who were
	used to retrieving records via the ISBN/ISSN search when they wanted
	to add holdings for their own library to the records.  The pattern for addressing this problem and satisfying both use
	cases is the same - use the multiclass.query.staff method if we
	invoke the ISBN or ISSN searches with the .staff method name.  One could easily refactor many of the search method bodies in this
	module to use the exact same logic, keying off the method name to
	identify the identifier field and the .staff portion of the method
	name to determine whether to invoke .staff mode or not. For now we
	just address the ISBN and ISSN entry points.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-06-06  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: fix
	View Holds by preventing an empty IN list with cstore, and stubbing
	out part_holds

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>

2011-06-01  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.js,
	Open-ILS/xul/staff_client/server/circ/util.js: for the Circulate as
	Type column in xul lists, display the actual citm value instead of
	the code

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-06-01  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js: Fix
	Circulate as Type in the item editor.  The citm retrieval method was changed to use open-ils.fielder, which
	doesn't return actual fieldmapper objects, so when data.js went to
	convert the retrieved list to a hash, it broke.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-06-01  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/util/functional.js: Allow
	util.functional.convert_object_list_to_hash to handle more than
	fieldmapper-like objects

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-06-03  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/web/js/ui/default/acq/po/view_po.js: PO activation date
	display improvement Use the smarter Util.js date parsing code to prevent small time
	offsets in PO activation date display.

	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-03  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/copy_editor.js: tweak
	function name

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-03  Dan Scott <dan@coffeecode.net>

	* Open-ILS/xul/staff_client/server/cat/copy_editor.js: Refactor the
	"show copy notes button" functionality Collapse the duplicated code for showing / hiding the "show copy
	notes button" into a single method. Might make maintenance a bit
	easier some day.

	Signed-off-by: Dan Scott <dscott@laurentian.ca>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-01  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/copy_editor.js: fix the Copy
	Notes button in the unified vol/copy editor

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-03  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0547.data.perm_list_cleanup.sql: Clean
	up a few stock perm mistakes This upgrade file does cleanup for two errors: 1) accounts for spelling errors (Admin != Administrator) 2) adds a group missed in 0542, for upgraders

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-06-03  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/upgrade/0542.data.perm-list.misc-cat.sql: 
	Fixed and extended upgrade file 0542 (stock permissions) This upgrade file did not work on a multi-upgraded DB, as a bunch of
	new permissions and groups never made it into any upgrade.  The changes here are intended to both fix the upgrade and rectify
	the missing pieces, where needed.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-06-01  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Reporter.pm: 
	Whitespace cleanup in aisle 3 (O:A:Reporter)

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-01  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Reporter.pm: 
	LP#740466 Sort report folders by name Add order_by to Reporter.pm to sort report folders by name


	Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-01  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Serial.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Serial.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0543.data.reformat_generated_coverage.s
	ql: Serial holdings display consistency fix When holdings are sourced from both MFHD and the DB, display may be
	inconsistent due to a hard-coded ', ' in Serial.pm.  This patch
	works around the problem by storing generated_coverage as a JSON
	array instead of a string, leaving display formatting to the OPAC.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-06-01  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Serial.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Serial.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0543.data.reformat_generated_coverage.s
	ql: Revert "f424dd8" for bad commit message This reverts commit 997eef7b50acf10ec2afcb8d8933b75317e0410f.


2011-06-01  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Serial.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Serial.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0543.data.reformat_generated_coverage.s
	ql: f424dd8


2011-06-01  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0542.data.perm-list.misc-cat.sql: 
	Missing db upgrade number bump plus backport fix

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-06-01  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0542.data.perm-list.misc-cat.sql: Remove
	specific admin perms, reorganize seed file The various administrators already have 'EVERYTHING' at their
	respective levels, so no need to assign new perms there.  The seed
	file is now more consistently organized.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-01  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/upgrade/0542.data.perm-list.misc-cat.sql: 
	Change a few permission levels and assignments In an attempt to be consistent with existing perms, a few were moved
	to levels lower than 'Consortium', and ADMIN_SERIAL_ITEM is only in
	the 'Serial' group.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Push the grp perm
	mappings into the seed data

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/sql/Pg/upgrade/0542.data.perm-list.misc-cat.sql: 
	wrong group ids for system admin and global admin

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/sql/Pg/upgrade/0542.data.perm-list.misc-cat.sql: put
	CREATE_PURCHASE_REQUEST into Users, not Staff

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/sql/Pg/upgrade/0542.data.perm-list.misc-cat.sql: map
	these perms to stock perm groups

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0542.data.perm-list.misc-cat.sql: added
	other permissions missing in rel_2_1

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0542.data.perm-list.misc-cat.sql: some
	recent cataloging permissions, but I'm unsure about the new upgrade/
	script regime

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-31  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/web/opac/locale/en-US/opac.dtd: LP#739444 Incrementing
	opac.dtd copyright date


	Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-27  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/lang.dtd: indicate what date format
	to use for offline patron registration

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-27  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/server/circ/checkin.xul: Fix Hold
	Capture checkin mode oils_persist was trumping hardcoded values.  Also, change how
	checked is set/unset for reliability.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-26  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/web/opac/skin/default/xml/home/index_body.xml: Patch
	suggested by Jason Boyer for LP#788601 The <script> tag for the chrome frame message has a misplaced
	semicolon, which causes an odd looking display issue in Internet
	Explorer. I realize that ideally very few people will be using IE,
	but even if they're not interested in a quality browsing experience
	we should probably put our best face forward.   (cherry picked
	from commit bbc874ddb42ac05130ccfad92fc55ccebd6af882)

	Signed-off-by: Mike Rylander <mrylander@gmail.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-05-26  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_dists.xul,
	Open-ILS/xul/staff_client/server/serial/manage_subs.js,
	Open-ILS/xul/staff_client/server/serial/manage_subs.xul: Distinguish
	between 'Show Groups' checkboxes in Serial Control Two different checkboxes ended up with the same ID, which, as one
	might expect, kinda worked and kinda didn't.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-26  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_subs.js: Checking for
	'twisty' leads to false negatives in Serial Control Since a tree can be opened with a double-click, we can't rely on
	'twisty' being set to load the child data.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/circ/checkin.js,
	Open-ILS/xul/staff_client/server/circ/util.js: Don't rely on call
	number column being rendered before prefix/suffix/class columns.
	Also, remove prefix/suffix/class from the check-in interface, since
	those column definitions can make extra network calls and we want
	that interface to be as fast as possible.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: wrong
	target for parts holds in
	open-ils.circ.holds.retrieve_all_from_title

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-25  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/util/network.js: missed
	this way back when.  fix multiple event override handling (for
	ilsevent lacking events), re: lp#757634.  Also add some missing
	typeof's

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-25  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/support-scripts/authority_control_fields.pl.in: Fix
	authority linking script typo Problem reported by Ditty Mulder <dmu@iisg.nl>

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-25  Dan Wells <dbw2@calvin.edu>

	*
	Open-ILS/src/sql/Pg/upgrade/0538.data.at-event-def-acq-invoice-prin
	t.sql,
	Open-ILS/src/sql/Pg/upgrade/0540.schema.missing_serial_unit_trigger
	s.sql: upgrade_deps_block_check() is not in the branches at this
	point

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-24  Dan Scott <dan@coffeecode.net>

	*
	Open-ILS/src/sql/Pg/upgrade/0541.schema.call_number_honor_default_c
	lass.sql: Use the correct upgrade log format for rel_2_1

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-24  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0541.schema.call_number_honor_default_c
	lass.sql: Trivial line-wrapping patch for call number class defaults

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-24  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0541.schema.call_number_honor_default_c
	lass.sql: Make label_class on any new call numbers default to
	org_unit setting Evergreen 2.0 added a label_class column to the call number table
	with one major purpose being the generation of correct sort keys.
	You can also specify a default label class as an org unit setting.
	However: 1) There are no interface elements for setting the label class of an
	individual call number.  2) The default setting from the actor.org_unit_setting
	'cat.default_classification_scheme' value, if set, is not consulted
	(that is, not set in the call number table) when new call numbers
	are created.  These two facts together greatly reduce the utility of this very
	valuable feature, as all new call numbers end up in the 'Generic'
	class.  While #1 has been addressed in 2.1+, there is still work to be done
	in setting this class on import. Also, which interface parts (if
	any) make it back to 2.0 is subject to debate.  This commit addresses #2.  See lp #787150.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-24  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/210.schema.serials.sql,
	Open-ILS/src/sql/Pg/901.audit-tables.sql,
	Open-ILS/src/sql/Pg/upgrade/0540.schema.missing_serial_unit_trigger
	s.sql: Bring serial.unit in line with asset.copy

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-24  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/js/ui/default/actor/user/register.js: remove
	restriction on resetting pw to random number when Use Phone Password
	setting is active.  uEditMakeRandomPw will still get called for new
	users, but should get overwritten once a phone number is entered

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-23  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/circ/copy_status.js: wrong
	identifier and lingering copy/paste-o in code for Item Status -> Add
	Items

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-23  Mike Rylander <mrylander@gmail.com>

	* : commit 6c08984679fefb672a6dd0f14e937db60a006db2 Author: Mike
	Rylander <mrylander@gmail.com> Date:   Mon May 23 11:06:51 2011
	-0400


2011-05-23  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/examples/apache/eg.conf: Apply Apache file expiration to
	the current official Javascript content type At least on Ubuntu 10.04, Javascript files are generally delivered
	with a Content-Type header of 'application/javascript', not
	'application/x-javascript'.  This change applies the much shorter 18
	hour expiration to the affected files, rather than allowing them to
	default to 1 month.

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-20  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0538.data.at-event-def-acq-invoice-prin
	t.sql: Fix bad seed data in an A/T template The action_trigger event def template for printing acq invoices was
	syntatically broken.  The collapse filter isn't important per se,
	but it balances the extra [% END %] at the bottom of the template,
	and it was there originally, and I see no reason not to put it back.  Incidentally, maybe the database upgrade script in the commit will
	be the first in master to successfully use the new
	evergreen.upgrade_deps_block_check() function ? Reported by Sally Fortin.

	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-05-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/cat/copy_browser.js,
	Open-ILS/xul/staff_client/server/cat/copy_browser.xul: Restore the
	Replace Barcode option in Holdings Maintenance, as the Edit Item
	menu will only serve the same duty if the unified volume/copy editor
	is activated via org setting (otherwise, it's just the Item
	Attribute Editor).  klussier++ for the catch

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-20  Dan Wells <dbw2@calvin.edu>

	* : commit 71722c5b61cb3ca66f2b990a75289e5058a655f0 Author: Dan
	Wells <dbw2@calvin.edu> Date:   Fri May 20 11:27:53 2011 -0400


2011-05-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.xul,
	Open-ILS/xul/staff_client/server/skin/cat.css: align the batch edit
	menus in the vol creator.  mostly aesthetic, but can save horizontal
	real estate, so usability as well for horizontal vol/copy editor.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.xul,
	Open-ILS/xul/staff_client/server/cat/volume_copy_editor.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_editor.xul,
	Open-ILS/xul/staff_client/server/cat/volume_copy_editor_horiz.xul: 
	usability tweak for controlling screen real estate, in unified
	vol/copy editor don't embed the the Record Summary in the vol
	editor, but in the main wrapping UI.  Also move CN batch edit bar
	into groupbox

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_editor.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_editor_horiz.xul: 
	usability tweak, pull the Create button out of the embedded
	interfaces and into the wrapping UI for the horizontal variant of
	the unified vol/copy editor

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.xul,
	Open-ILS/xul/staff_client/server/cat/volume_editor.js,
	Open-ILS/xul/staff_client/server/cat/volume_editor.xul,
	Open-ILS/xul/staff_client/server/skin/cat.css: css hooks so we can
	hide class, affix, and part columns in volume creator/editor.  can
	help with screen real estate with the horizontal vol/copy editor

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_editor_horiz.xul: 
	usability tweak, spread the template bar across the top of both
	panes for the horizontal unified vol/copy creator/editor

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-20  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: Fix a
	problem with open-ils.circ.holds.retrieve_all_from_title Anoop Atre spotted this bug that's triggered by selecting "View
	Holds" from "Actions for Selected Record" in the catalog seen
	through the staff client.  Said method would error out like this: [2011-05-20 10:04:03] open-ils.circ [ERR
	:31866:CStoreEditor.pm:109:13058333633194115] editor[0|1] request
	error open-ils.cstore.direct.serial.issuance.id_list.atomic :
	{"subscription":[]} : Exception:
	OpenSRF::DomainObject::oilsMethodException 2011-05-20T10:04:03
	OpenILS::Utils::CStoreEditor
	/openils/lib/perl5/OpenILS/Utils/CStoreEditor.pm:412 <500>  Severe
	query error -- see error log for more details because when trying to gather issuance-type holds, it didn't
	properly test whether there actually were any subscriptions and
	issuances related to the bib record in question.

	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-05-20  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/holds.js,
	Open-ILS/web/opac/skin/default/xml/common/holds.xml: Revert "When
	placing holds on a bib with monographic part, require selection of a
	specific part" This reverts commit 69395e8c55db3a0993b2a48eb930ab55402d5c8d.  We must not force P-type holds as not all copies may not use parts.
	Imagine a situation where only one library breaks up a season of
	Seinfeld by using a part per DVD, and all others leave them bound
	and therefore need no part designations.

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-05-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/holds.js,
	Open-ILS/web/opac/skin/default/xml/common/holds.xml: When placing
	holds on a bib with monographic part, require selection of a
	specific part

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-19  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm: 
	order any monograph parts by sort key when placing holds

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-19  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/circ/util.js: CN prefix/suffix
	columns in xul-based hold interfaces

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-19  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties: label
	consistency in vol/item creator

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-19  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: add missing upgrade
	step to create staging schema

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-18  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Cat.pm: Add
	permission checking for updating and deleting volumes.  This addresses LP #784062 reported by Ben Shum, and I think others? Creating volumes was already covered.  The ability to delete volumes
	without permission would be less often an issue in practice since
	you would need permission to delete the volume's copies before you
	could delete the volume itself.  Anyway, this should square things.

	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-05-18  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm: 
	avoid error when generating fines on checkin Prevents "No active transaction to commit" error when checking in
	overdue loans.

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-05-18  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/server/circ/util.js: fix CN prefix/suffix
	display in XUL interfaces so we can handle any affix we come across

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-18  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/web/opac/extras/circ/alt_holds_print.html,
	Open-ILS/web/opac/extras/circ/alt_holds_print.js: Include call
	number prefix/suffix in display and sorting of holds for Print Full
	Pull List (Alternate strategy).  Also fix things so that we're
	sorting on the label_sortkey for call number, and not the label.
	So, for this interface, the hard-wired sort order is Copy Location
	Order (as defined by Admin -> Local Administration -> Copy Location
	Order), Call Number Prefix, Call Number Label, Call Number Suffix,
	and Hold Request time.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-17  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/spine_labels.js: have the
	call number checkbox for pocket labels include prefix/suffix.  A
	%call_number% macro is still available for the bare call number
	label without affixes

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-17  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/global_util.js: 
	Can't use encodeURI and decodeURI for everything with persist_helper
	(in particular, something like "%macro1% %macro2%" as a custom entry
	in the label interface), so try/catch them and fall back to the
	original behavior.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-17  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: only use the label
	to initialize call number browse

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-17  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/upgrade/0535.schema.authority_indexes.sql: 
	LP#783486: Improve authority lookup performance Testing showed that the two indexes added herein improve authority
	lookup performance radically; on a 16 GB RAM database server with
	1.1M records, lookup times decreased from 5500 ms to 0.223 ms.
	Recommended, would EXPLAIN ANALYZE again.

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-17  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0534.schema.fix_hold_permit_test.sql: 
	stop hold permit check from crashing if age protection in effect

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-16  Mike Rylander <mrylander@gmail.com>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/aut
	hority.pm: Ignore "deleted" authority records when using the
	tag-validation method

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-05-16  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/Date.pm: Borrow
	on_or_after() from MFHD/Caption.pm in MFHD/Date.pm

	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-16  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: 
	persist partial changes to new copies in vol/copy editor has new
	copies are gathered.  In other words, you can do something like enter 5 in the "# of
	Copies" field, enter the first barcode (say b1), edit an attribute
	(say, set Circulate = No), and then enter a second barcode (b2).
	Previously, the changes made to b1 would be lost as b2 was entered
	(or as other movement around the barcode entry textboxes happened)
	and both copies would get a Circulate = Yes, but now in this
	scenario, you would see 1 copy set to No and 1 copy set to Yes for
	the Circulate attribute.

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-16  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/lang.dtd: simpler language, and the
	behavior of this action is configurable

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-15  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/skin/cat.css: usability tweak

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-15  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: 
	default the label class according to library setting during vol
	creation

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-14  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/Makefile.am: More SVN to Git rigging Staff client Makefile can no longer build based on SVN.

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-14  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/xul/staff_client/external/prune_dirs.sh, README,
	build/tools/update.sh, build/tools/update_git_svn.sh: remove
	references to SVN now that we're using Git

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-14  Galen Charlton <gmc@esilibrary.com>

	* README: Trivial whitespace change  (cherry picked
	from commit 473bc4784377977cc16a4f61cd8961be0ffe40df)

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-13  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0533.schema.fix_age_circ.sql: add
	missing update script for change to circ age stored procedure  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20476
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-13  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Patch from Ben
	Ostrowsky (LP#782268) to simplify seed/example permission setup and
	move one step towards being able to rid ourselves of
	permission.perm_list.id git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20474
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-13  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/Caption.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/Date.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/Holding.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/test/mfhd.t,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/test/mfhddata.txt: A
	bevy of MFHD bug fixes (and test cases) 1) Remove hard-coded 'gap' text from format_part() 2) Honor $ypm## for chron_to_date() for annuals 3) Removed overly simple check on $w as digit 4) Allow for combined chronologies other than 2nd level 5) Make calendar changes trump $u counts 6) Honor issue restarts at calendar changes 7) Rudimentary support of $u counts for non-restarting issue
	numbering 8) Special interpretation of $yps for early winters (i.e. winter is
	the first season of the calendar year) 9) Teach chron_to_date() about early winters The last two points deserve some special attention.  A large number
	of journals consider 'Winter' to be the first season of the year, so
	Winter 2011 means (roughly) January 2011, not December 2011.
	However, there is no explicit way to indicate this in the standard,
	and also the code relies in many ways on the fact that 24
	(chronology code for winter) is greater than 21 (code for spring).
	To work around this, we are interpreting a certain ambiguous pattern
	in a particular way.  Specifically, if you set $w to a digit, then
	set $y to 'ps24,21,22,23' (or some variation with '24' as the first
	value), you will get this winter-first behavior.  Also, the season
	is treated internally as '20' then converted to '24' when processing
	is completed.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20471
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-13  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0532.schema.fix_copy_count_funcs.sql: 
	fix query in various copy count functions  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20469
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-13  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/upgrade/0531.schema.auditor_affixes.sql: for
	upgrade, let prefix and suffix in audit be null  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20467
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-13  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0531.schema.auditor_affixes.sql: add
	affix columns to acn auditor table  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20465
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm: 
	Patch from James Fournie addressing LP#781803: Multiple renewal
	fails on MAX_FINES circs git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20462
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	or.pm: Wrap proximity refreshing in a transaction to avoid timespans
	where there is no such information git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20456
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Vandelay.pm: Address
	LP#779975; Status of Available (0) not honored because 0==false --
	use ternary op with defined() instead git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20453
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-12  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Serial.pm: Add
	missing permission checks to Serial.pm git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20450
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-06  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/Makefile.am,
	Open-ILS/xul/staff_client/windowssetup.nsi: Misc updates to
	installer rigging Fewer spurious errors (extras.nsi, MUI_TEXT) More checks (makensis,
	unzip, branding) Slightly improved Welcome screen Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20447
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-06  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/windowssetup.nsi: Properly tag the
	branch for the staff client build as suggested by tsbere git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20445
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-06  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/Makefile.am: bump xulrunner version git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20444
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-05  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/nls/Searcher.js: Use valid
	JSON in Dojo i18n for Searcher.js Dojo i18n processing scripts require valid JSON (quoted keys in
	hashes), even though Dojo itself is more relaxed and accepts
	unquoted keys. So, do the i18n dance here.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20438
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-05-05  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.xul: Fix typo
	introduced in r20426 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20432
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-05  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	or.pm, Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/upgrade/0530.schema.actor-usr-index-phone-field
	s-more.sql: Patch from Niles Ingalls to make patron phone number
	searching more matchy.  With assistance from Mike Rylander on
	pointing out the needed indexes to keep search fast, and from Mike
	Peters on arranging a last minute DCO :-) Type numbers into a patron phone number field and get a match
	regardless of the punctuation actually used in the database.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20430
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-05  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/display.js,
	Open-ILS/xul/staff_client/server/patron/summary_overlay.xul,
	Open-ILS/xul/staff_client/server/patron/summary_overlay_horiz.xul: 
	Patch from Thomas Berezansky to do the following:     Add more "click to copy" fields     User's Name     All three phone numbers     Also fix issue where tooltip didn't clear when re-opening search
	    form      git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20428
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-05-05  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/global_util.js,
	Open-ILS/xul/staff_client/server/OpenILS/symbol_overlay.js,
	Open-ILS/xul/staff_client/server/OpenILS/symbol_overlay.xul,
	Open-ILS/xul/staff_client/server/cat/marcedit.xul,
	Open-ILS/xul/staff_client/server/skin/global.css: Add a feature
	authored by Joscha Filius for the International Institue of Social
	History: a diacritical palette for the MARC editor! Afelonne Doek of IISH wants the community to benefit from this code.
	To try it out, press control S in the marc editor (reguarly
	non-flat-text view).  You can insert the characters you see, and you can right click on
	entries in your palette to customize.  Customizations /should/
	persist through staff client restart (untested by me so far).  This should make cataloging in multiple (Western-ish) languages at
	once easier.  Below I copy and paste some of Joscha's message to the list where he
	introduced this code: > *Bugs:* > A known bug is that is you switch marc edit styles back
	and forth the > listener trigger won't work anymore. Also for a far
	as I know there is at > least another bug concerning layout which is
	as far as I know not the result > of my doing.  > > *Here comes a
	possibly nasty part*, to ensure that the diacriticals remain >
	intact throughout the persist I've changed global_util.js to URL
	encode and > URL decode all stored values. This might cause
	backwards incompatibility > with values that are already stored for
	other purposes without encoding.  > This needs to be checked.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20426
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-05  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* README: Remove redundant plpgsql install step from README PostgreSQL 9.0 includes plpgsql by default, and running the
	createlang plpgsql step throws an error that could concern the
	installer. Drop the step from the README.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20424
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/checkout.js: Patch from
	James Fournie improving due-date-editor usability by auto-checking
	the check box; LP#70956965 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20421
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/reporter/clark-kent.pl: Patch from Jason Boyer
	swapping the order of report and template name in emailed notices;
	LP#777273 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20418
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-04  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/sbsum_editor.js,
	Open-ILS/xul/staff_client/server/serial/scap_editor.js,
	Open-ILS/xul/staff_client/server/serial/siss_editor.js,
	Open-ILS/xul/staff_client/server/serial/sisum_editor.js,
	Open-ILS/xul/staff_client/server/serial/sssum_editor.js: Fix some
	Serial Control text boxes which were too small to use effectively.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20415
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: Only pass the label
	to the CN browse search API, that is all we care about for the key git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20411
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0529.data.merge_user-ou_settings.sql: 
	Collaboration patch from Joseph Lewis and Michael Peters addressing
	LP#758007, missing patron merge OU settings.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20408
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Addressing LP#732681
	at upgrade time -- make authority records useful for controlling
	bibs git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20404
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/pre_cat_fields.xul: Initial
	fix from Michael Peters addressing small-screen UI issues: LP#767507 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20401
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/apachemods/mod_idlchunk.c: Change an ERROR to a DEBUG
	log message in mod_idlchunk Reported by James Fournie at Sitka, this message was logged as an
	error when it is simply a debug message; we drop the level
	accordingly so that it will not appear in the Apache logs during the
	normal course of operations.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20398
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: Patch
	from Michael Peters to protect cut-in-line holds from staff without
	the appropriate permission git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20395
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/simple_auth.xul: 
	Patch from Ben Ostrowsky addressing button order: LP#754660 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20393
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: Prevent
	uninitialized var warnings in OpenILS::WWW::SuperCat::unapi Given a tag URI like tag:localhost,2011:biblio-record_entry/1 with
	no format, Evergreen was throwing uninitialized variable warnings
	and attempting to invoke "open-ils.supercat..formats" due to the
	unitialized $type variable, which resulted in an Apache error.  On the TT OPAC, this enables Zotero to successfully offer import of
	all entries on the search results page. On the AjaxPAC, it seems
	that Zotero parses the page before the unAPI hrefs have been
	supplied by JavaScript.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20391
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-03  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: Fix typo in fm_IDL.xml "oils_persist" namespace was missing an "s" in one instance,
	preventing autogen.sh from running.  Bug reported by Thomas Berezansky.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20389
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-05-03  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0528.schema.functions_assume_unicode.sq
	l, Open-ILS/src/support-scripts/authority_control_fields.pl.in: 
	Avoid data loss by setting MARC::Charset->assume_unicode(1) When using MARC::File::XML, MARC::Charset is used to perform
	character conversions; however, MARC::File::XML does not tell
	MARC::Charset that it is handling Unicode data. If we do not tell
	MARC::Charset that it is handling Unicode data, it can return an
	error which results in the loss of data (typically a subfield
	containing one or more characters which MARC::Charset does not have
	an equivalent mapping outside of Unicode).  This problem could be reproduced in authority_control_fields.pl with
	a subfield like "von Hans-Christian Müơller" - when this subfield
	was encountered without assume_unicode(1), a null string was
	returned for that subfield, and if the record was written back to
	the database due to an authority match being found in a different
	field, the only recourse was to restore the record from
	auditor.biblio_record_entry_history. The same sort of problems could
	occur for any other script or function that modifies the data being
	handed to it using MARC::File::XML and BinaryEncoding => UTF8.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20386
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-05-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Followup patch
	to the first listed in
	https://bugs.launchpad.net/evergreen/+bug/745123 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20383
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/sql/Pg/099.matrix_weights.sql,
	Open-ILS/src/sql/Pg/100.circ_matrix.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0527.schema.matrix-bib_level.sql,
	Open-ILS/web/opac/skin/default/xml/common/js_common.xml,
	Open-ILS/web/templates/default/conify/global/config/circ_matrix_mat
	chpoint.tt2,
	Open-ILS/web/templates/default/conify/global/config/hold_matrix_mat
	chpoint.tt2: Patch from Jason Stephenson ( LP#770261,
	https://bugs.launchpad.net/evergreen/+bug/770261 ) adding support
	for bibliographic level inspection in the hold and circ matrix
	matchpoint tests.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20381
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-02  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Serial.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Serial.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHDParser.pm,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/manage_items.js,
	Open-ILS/xul/staff_client/server/serial/manage_items.xul,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js: Add support
	for sre/distribution summary methods (including merge), advanced
	receiving, and unit-less receiving in the serial control items tab This commit includes three new minor features for the Serial Control
	interface.  First, you are now able to set the latent
	'summary_method' field on distributions, with the most significant
	new setting being 'merge with sre'.  This setting effectively
	combines the sre marc with the generated holdings to form a single
	unified statement.  Second, the previous 'receive' functionality has
	been renamed to 'advanced receive', and 'receive' will now show
	items from an entire subscription, but not allow you to receive
	directly into a specific unit (you can still receive into new/auto
	units).  Third, a basic menu entry has been added for receving into
	'no unit', allowing items to be received not forcing them to be
	unitized.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20379
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* README: debian backports url changed.  updated install docs in
	README to match git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20377
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Cat.pm: flesh
	stat_cat_entries in the call number tree method used by Holdings
	Maintenance, since those copies get shoved into the copy editor and
	we want stat cat entries to show up there git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20375
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/admin/stat_cat_editor.js: Fix bug
	and typo in stat cat editor Specifically, disabling the ability to select a stat cat type on no
	permissions on current type.  If you don't have permissions on ASSET you could never get to ACTOR.  If you picked ACTOR without rights you couldn't get back to ASSET.  Also, re-enable the library selector and new buttons when you do
	change to one you can add for.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20372
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: fix "undefined is
	in transit" https://bugs.launchpad.net/evergreen/+bug/773528 --- Fix bug squashing of params in checkin_via_barcode2 in circ/util.js.  Author: Jason Stephenson <jstephenson@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20369
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/adv_global.js: After
	investigation by Dan Scott, Michael Peters and Mike Rylander (a
	little), apos removal in advanced search normalization is considered
	harmful.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20365
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/copy_summary.xul,
	Open-ILS/xul/staff_client/server/patron/bill_details.js: Patch from
	Michael Peters, Jason Boyer and Jason Etheridge addressing
	LP#744244: bill_details.xul "Checkout or Renew Library" column is
	blank git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20362
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-05-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl,
	Open-ILS/src/support-scripts/authority_control_fields.pl.in,
	configure.ac: Remove hard-coded default bootstrap location from
	authority_control_fields.pl Let autoconf do its magic and we get away from one more hard-coded
	default.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20360
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Slight
	optimization for authority_control_fields.pl Instead of creating two CStoreEditors per bib record, reuse the
	global CStoreEditor for read operations; this way we only have to
	create a new CStoreEditor if a record has fields to authorize.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20357
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/AddedContent/OpenLibrary.pm: 
	Add excerpt AC and avoid rate-limiting for OpenLibrary content OpenLibrary added rate-limiting (100 cover requests per 5 minutes)
	for cover images requested by ISBN; using the OpenLibrary book API
	to pull the list of direct cover URLs avoids the rate limit.  Also, add excerpt added content calls for OpenLibrary.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20355
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <gitorious@coffeecode.net>

2011-04-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install, README: Update
	Makefile.install and README for PostgreSQL 9.0 Along with cleaning out references to Debian Etch, Debian Lenny,
	Ubuntu Hardy, add the Debian Squeeze, Ubuntu Lucid, and Fedora 14
	PostgreSQL 9.0 repo locations, and convert the README to Asciidoc
	syntax.  Remove references to Fedora 13 and genericize it for Fedora 14 (with
	the thought that Fedora 15 will probably be coming out soon). Also
	add PostgreSQL 9.0 packages as a target for the database server in
	Makefile.install.    git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20353
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dan@coffeecode.net>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-04-27  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/copy_details.js: Change barcode
	to link to item status For copy details change the barcode to a link to the item status.
	This only applies to the staff client itself due to an isXUL check
	first.  This allows for a staff member to get more details on the copy with
	a single click, rather than copy/paste of the barcode.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20350
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-27  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/marc_stream_importer.pl: Patch from
	Mike Rylander to support load-from-file as an alternative to
	load-from-network git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20348
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-27  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: One more
	strictly integer check for fleshing feeds in SuperCat Missed this one in r20336. Argh.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20339
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-04-27  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: Consolidate on
	checking for integers for -full / -uris The check for an integer when $flesh eq 'uris' was throwing errors
	and breaking authority browsing; rather than complicating matters
	further, use an explicit integer for the return value when the
	format ends with "-uris" so that we can simply test for an integer
	value greater than 0.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20336
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-04-27  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Prevent
	a MARC::File::XML error from killing authority_control_fields.pl
	batch Continuing to make this script bullet-proof, MARC::File::XML cares
	deeply about things like whether datafields have indicators and
	throws exceptions that, if not caught, kill a processing script -
	like this one.  Borrowing the approach from marc_export, wrap the new_from_xml()
	call in a try / otherwise block and roll on.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20333
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-04-26  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/circ/checkin_overlay.xul,
	Open-ILS/xul/staff_client/server/circ/util.js: Hold, Transit, and
	Hold/Transit Slips used to suppress the printer dialog, but we lost
	that when we moved to templated slips.  This adds a sticky Printer
	Prompt checkbox to Check In for controlling that behavior.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20329
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-26  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/print.js,
	Open-ILS/xul/staff_client/server/admin/printer_settings.js: Setting
	print.always_print_silent to false is a bad thing, since it trumps
	gPrintSettings.printSilent, and will cause a print dialog regardless
	of Printer Prompt or Auto-Print checkboxes.  Let's clear it instead
	when toggling it off, and if we find it lingering as false from past
	code, let's clear it then too.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20328
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-26  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Protect
	against errors returned by open-ils.search If open-ils.search returns an error rather than a result, prevent
	authority_control_fields.pl from bombing out completely; instead,
	flag the problem in STDERR and move on to the next record.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20324
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-26  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/myopac.js: set the cancel cause
	field when patrons cancel holds.  There's a holdsCancel function
	that also does this, but it never gets called by anything git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20321
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-26  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/checkin.js: fix disappearing
	cursor/caret for Check In git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20315
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-26  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Make
	authority_control_fields.pl resistant to database timeouts LP 771237 describes how on an underpowered system, the work that
	authority_control_fields.pl tries to do on a per-record basis may
	hit the CStore default timeout of 6 seconds for a transaction and
	automatically end the transaction, resulting in no work being
	committed once the script tries to update the bibliographic record.
	Searching each controlled field for a matching authority record can
	be costly in a database with millions of authority records.  To enable the script to accomplish its work on underpowered test
	systems, use a regular read-only CStoreEditor session to accomplish
	the lookups and create a separate CStoreEditor session to issue the
	update in a transaction if required.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20312
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-04-26  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0525.schema.phys-char-regression.sql: 
	LP#771187: fix syntax error in stored procedure def Author: Jason Stephenson <jstephenson@mvlc.org>  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20310
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-25  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0525.schema.phys-char-regression.sql: 
	Regression in pulling physical characteristics from a record in an
	SVF world, spotted by Jason Stephenson git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20308
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-25  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/WWW/AddedContent/OpenLibrary.pm,
	Open-ILS/web/opac/skin/default/css/layout.css: Use layout.css to
	control table of contents from OpenLibrary added content Rather than forcing people to edit OpenLibrary.pm to modify the
	inline CSS, use a class and rely on CSS from layout.css to make it
	easier to skin.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20304
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/actor/nls/register.js,
	Open-ILS/web/js/ui/default/actor/user/register.js,
	Open-ILS/web/templates/default/actor/user/register.tt2,
	build/i18n/po/register.js/register.js.pot: Extend i18n support for
	Register Patron interface Missed out on the Save / Show Fields dialogue in the previous
	commit; this gets us up to speed on the entire interface.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20302
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/actor/nls/register.js,
	Open-ILS/web/js/ui/default/actor/user/register.js,
	Open-ILS/web/templates/default/actor/user/register_table.tt2,
	build/i18n/po/register.js/register.js.pot: Add i18n support to the
	User Editor / registration interface Per LP # 754898, the Register Patron interface currently contains
	many hardcoded strings. Given that the previous patron registration
	interface supported translation, this is a regression in 2.0.  Accordingly, we extend the use of Dojo i18n support to provide the
	strings for buttons and a number of labels on the Register Patron
	interface. The bulk of the remaining text is provided by the
	fieldmapper definitions, which should in theory be translated
	automatically for us.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20301
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/po/AutoFieldWidget.js/AutoFieldWidget.js.pot,
	build/i18n/po/Searcher.js/Searcher.js.pot,
	build/i18n/po/TranslatorPopup.js/TranslatorPopup.js.pot,
	build/i18n/po/User.js/User.js.pot,
	build/i18n/po/XULTermLoader.js/XULTermLoader.js.pot,
	build/i18n/po/acq.js/acq.js.pot,
	build/i18n/po/admin.properties/admin.properties.pot,
	build/i18n/po/auth.properties/auth.properties.pot,
	build/i18n/po/authority.js/authority.js.pot,
	build/i18n/po/capture.js/capture.js.pot,
	build/i18n/po/cat.properties/cat.properties.pot,
	build/i18n/po/circ.properties/circ.properties.pot,
	build/i18n/po/common.properties/common.properties.pot,
	build/i18n/po/conify.dtd/conify.dtd.pot,
	build/i18n/po/conify.js/conify.js.pot,
	build/i18n/po/db.seed/db.seed.pot,
	build/i18n/po/fm_IDL.dtd/fm_IDL.dtd.pot,
	build/i18n/po/ils_events.xml/ils_events.xml.pot,
	build/i18n/po/lang.dtd/lang.dtd.pot,
	build/i18n/po/multiclass_search_help.html/multiclass_search_help.ht
	ml.pot, build/i18n/po/offline.properties/offline.properties.pot,
	build/i18n/po/opac.dtd/opac.dtd.pot,
	build/i18n/po/opac.js/opac.js.pot,
	build/i18n/po/patron.properties/patron.properties.pot,
	build/i18n/po/pickup_and_return.js/pickup_and_return.js.pot,
	build/i18n/po/pull_list.js/pull_list.js.pot,
	build/i18n/po/register.js/register.js.pot,
	build/i18n/po/reports.dtd/reports.dtd.pot,
	build/i18n/po/reports.js/reports.js.pot,
	build/i18n/po/reservation.js/reservation.js.pot,
	build/i18n/po/selfcheck.js/selfcheck.js.pot,
	build/i18n/po/serial.properties/serial.properties.pot,
	build/i18n/po/vandelay.dtd/vandelay.dtd.pot: Check in the POT files
	so that translation interface can be satisfied Backport of r20188 from trunk.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20300
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/Que
	ryParser.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/QueryParser.p
	m: address the empty-query case git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20296
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: Disable Save
	Columns in xul holds interface when Hold Details is being viewed.
	https://bugs.launchpad.net/evergreen/+bug/691599   Not the best fix,
	but the quickest fix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20293
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/QueryParser.p
	m: Address LP#730743, errant parens cause pain Specifically, we prune subplans that contain no nodes (empty
	parens), and avoid dropping out of the top level query context when
	we encounter a close-paren.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20290
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0524.data.toggle_unified_volume_copy_ed
	itor.sql, Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/server/cat/bib_brief.js,
	Open-ILS/xul/staff_client/server/cat/copy_browser.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js,
	Open-ILS/xul/staff_client/server/circ/copy_status.js: org unit
	setting for making unified Volume/Item interface optional.  fix the
	volume interface in its standalone incarnation, and tweak the label
	for editing items in holdings maintenance git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20288
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: Don't
	disable the Create Volume/Item button when building the data
	structure from the form.  If you have say, a <textbox> with on onchange event that disables a
	<button> and re-enables it shortly thereafter, and the onchange
	event was triggered by you clicking on said button while the textbox
	has focus/changes, then the disable action will prevent any click on
	the button from registering.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20286
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/server/index.xhtml: Turn off non-working
	print button for holds pull https://bugs.launchpad.net/evergreen/+bug/727983 Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20281
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-22  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: Add missing serial.distribution
	field to IDL git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20279
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Patch from
	James Fournie to sort statcats in their comboboxes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20276
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/bib
	lio.pm, Open-ILS/web/opac/skin/default/js/copy_details.js,
	Open-ILS/web/opac/skin/default/js/rdetail.js: Better call number
	prefix/support in opac.  The copy count status/location summary
	methods now group by prefix, label, suffix instead of just label.
	Still need to update
	rdetailShowCNBrowse/open-ils.search.callnumber.browse, which is
	being fed an array, [ prefix label, label, suffix label ] git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20274
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/cn_browse.js: Display prefix and
	suffix in CN browse of main OPAC git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20272
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-21  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/SIP/Patron.pm: check user
	'active' field in SIP charge_ok (and dependent) calls git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20269
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm,
	Open-ILS/xsl/CNBrowse2HTML.xsl: add marginal support for surfacing
	CN affixes in supercat and slimpac CN browse git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20267
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0523.data.default-copy-status.sql,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/cat/util.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: Add org
	unit settings for default status of newly added copies These two new org unit settings enable sites to control the default
	status of newly added copies. The defaults match the behaviour of
	the "Add Volumes" ("In Process") and "Fast Add" ("Available")
	interfaces as of Evergreen 1.6.1, but sites can choose to have the
	copies go directly to "Reshelving", "Available", or any other status
	defined in config.copy_status.  The org unit settings are:   * cat.default_copy_status_fast (for "Fast Add")   * cat.default_copy_status_normal (for "Add Volumes")  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20264
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-04-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ.pm: flesh parts
	in Items Out git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20262
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm,
	Open-ILS/xul/staff_client/server/circ/checkin.js,
	Open-ILS/xul/staff_client/server/circ/checkout.js,
	Open-ILS/xul/staff_client/server/circ/renew.js,
	Open-ILS/xul/staff_client/server/circ/util.js: send the volume along
	in the payload for circ functions.  Render CN prefixes/suffixes
	correctly in xul lists if they're not fleshed git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20261
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/locale/en-US/circ.properties,
	Open-ILS/xul/staff_client/server/locale/en-US/common.properties: 
	label tweaks to disambiguate prefix and suffix columns in checkin
	interface git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20260
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/Que
	ryParser.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/met
	abib.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/QueryParser.p
	m: Add support for facet and filter negation via "-" prefix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20256
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/Makefile.am: New targets for staff
	client Makefile rigrelease: Sets up branding/xulrunner-stub for release builds
	Includes a change to windowssetup.nsi to swap out image set rigbeta: Sets up branding/xulrunner-stub for beta builds Includes a
	change to windowssetup.nsi to swap out image set rebuild: Shortcut for re-using the same version/stamp as the last
	build Updated stamp target to add files for rebuild.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20254
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/direct_ingest.pl,
	Open-ILS/src/extras/import/direct_loader.pl,
	Open-ILS/src/extras/import/marcFilterDump.pl,
	Open-ILS/src/extras/import/marc_add_ids,
	Open-ILS/src/extras/marc2html,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Acq/Order.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Acq/Picklist.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Z3950.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/ass
	et.pm, Open-ILS/src/perlmods/lib/OpenILS/Application/Vandelay.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/Exporter.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/TemplateBatchBibUpdate.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/Vandelay.pm,
	Open-ILS/src/support-scripts/marc_export.in,
	Open-ILS/src/support-scripts/marc_stream_importer.pl: Always use
	BinaryEncodeing => "UTF-8" with MARC::File::XML git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20251
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/offline-blocked-list.pl: Patch from
	Jeff Davis addressing parameter usage issues git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20245
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/Makefile.am,
	Open-ILS/src/support-scripts/marc_export,
	Open-ILS/src/support-scripts/marc_export.in, configure.ac: add
	marc_export to list of scripts installed in /openils/bin  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20243
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.functions.general.sql,
	Open-ILS/src/sql/Pg/002.functions.aggregate.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql: Reorder some functions to
	avoid creation failure on an empty db; remove unused (and
	installation-killing) tsvector aggregate git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20242
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/marc_export: Create a 001 field if it
	doesn't exist in marc_export Real data has a way of surprising you sometimes, like by not having
	001 fields.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20241
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-20  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/marc_export: Teach marc_export how to
	export bibs for specified libraries Useful shortcut for getting the bibs for libraries based on the
	non-deleted callnumbers they have attached to non-deleted bibs.
	Doesn't guarantee that they also have either a visible copy or
	localized URI attached but whaddya want, magic? :) Usage: marc_export --library BR1 --library BR2  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20240
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-20  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/marc_export: Teac marc_export how to
	replace the 001 field value with the record ID This is option is probably more useful prior to 2.0 where we
	introduced the automated "munge control numbers" option, but new
	features go here, right? A site that wants to export their
	bibliographic records to send to a large library consortium for
	control number matching may find this a useful way to send out
	records with a local 001 record ID and get standard identifier
	control numbers back that they can add as a 035, per MARC standards.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20239
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm: 
	flesh parts on items for circ functions.  Hrmm, but this only works
	because unflesh_copy doesn't know about parts.  Do we need
	unflesh_copy on checkout/checkin/renew result payloads? git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20236
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/copy_editor.js: remove the
	infinite loop that batch volume template application was causing git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20235
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_editor.js: fix
	export templates, copy/paste-o git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20234
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js: More hotkey
	fixes - Invalidate keyset cache Thanks to
	http://forums.mozillazine.org/viewtopic.php?f=19&t=2048501, Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20230
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/util/network.js: Hotkey
	Fixes Attempt to be more robust/forceful on clearing hint text Reset hotkeys less often (such as *not* on operator change) Re-enable keyset properly Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20229
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/opac/nls/opac.js: Typo:
	Propeties/Properties git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20225
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: Use
	top level join instead of subquery in hold queue position query This is more readily optimized by the Postgres planer.  Note also, for very large data sets (lots of holds, on the order of
	100k+ active), the following is also advised:  ALTER TABLE action.hold_copy_map alter column target_copy SET
	 statistics 500, alter column hold set statistics 500; ANALYZE
	action.hold_copy_map; This gives the planner better data about the hold-copy-map
	n-distinct.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20222
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/cache-generator.sh: Store the cache hash file
	in LOCALSTATEDIR/web/ so it can be used from within apache via SSI git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20220
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/list.js: Fix
	dump-style printing by ensuring 'params' is defined before accessing
	it git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20217
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/Makefile.am, Open-ILS/src/extras/cache-generator.sh: 
	Add a wrapper for autogen.sh which generates a date+content hash for
	use in (browser) cache killing git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20214
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* : mark these as binary git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20212
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.client_menus.sql,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/auth/controller.js,
	Open-ILS/xul/staff_client/chrome/content/main/main.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_overlay.xu
	l, Open-ILS/xul/staff_client/chrome/content/util/file.js,
	Open-ILS/xul/staff_client/chrome/content/util/network.js,
	Open-ILS/xul/staff_client/chrome/locale/en-US/offline.properties,
	Open-ILS/xul/staff_client/chrome/skin/global.css,
	Open-ILS/xul/staff_client/chrome/skin/hotkeys/Default.keyset,
	Open-ILS/xul/staff_client/chrome/skin/hotkeys/Minimal.keyset,
	Open-ILS/xul/staff_client/chrome/skin/hotkeys/None.keyset,
	Open-ILS/xul/staff_client/chrome/skin/hotkeys/README,
	Open-ILS/xul/staff_client/chrome/skin/media/images/licenses.txt,
	Open-ILS/xul/staff_client/defaults/preferences/prefs.js: Menu
	Hotkeys and Toolbars Dynamic Hotkey sets New cataloging toolbar New updates to circ toolbar New menu items and updates to menus in admin menu area Toolbar/hotkey settings can be saved to workstation prefs from admin
	-> workstation administration Update org unit setting for button_bar to be a string, circ or cat
	by default to pick those two toolbars Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20209
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-19  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/autogen.sh: Print the path to files written by
	autogen in support of a cache-killing hash git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20206
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* : mark these as binary git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20204
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/custom_images/DCO,
	Open-ILS/xul/staff_client/custom_images/README,
	Open-ILS/xul/staff_client/windowssetup.nsi: More Installer Fun Define an Install Tag, defaulting to the product tag.  This will be
	used in the install location and registry setting for where we
	installed to.  Different install tags will mean different installs, so Trunk won't
	(by default) install over 2.1 (for example) Plus, include riggings for Mike Peter's new install images.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20200
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Mark cmc.label for
	translation, not cmc.name, in seed data git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20193
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: Mark cmf and cmc labels as
	translatable We went to the effort of extracting the translatable text from
	950.data.seed-values.sql, but had not marked the fields as
	translatable in the IDL. Now at least the out-of-the-box fields and
	classes will easily be able to have translations.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20190
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/Makefile: Add openils.widget.Searcher Dojo NLS to the
	i18n build Necessary for the "advanced" searchbar on the Evergreen AjaxPAC.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20186
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Correct
	encoding issue with authority_control_fields.pl Is there ever a time when MARC::File::XML would be invoked with
	anything other than BinaryEncoding => 'utf-8'? Not here, at least.
	Addresses LP# 764582.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20183
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/opensrf.xml.example,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/Que
	ryParser.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/fts
	.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/met
	abib.pm: Improvements to search tuning  * Move to in-core fts function, instead of the compat wrapper
	 provided by the tsearch2 contrib * Provide default cover density tuning (config file)  * Move default preferred language settings from storage to search,
	 where they make more sense More on the CD tuning:  Evergreen uses a cover density algorithm for calculating relative
	 ranking of matches.  There are several tuning parameters and
	 options available.  By default, no document length normalization is
	applied.  From the Postgres documentation on ts_rank_cd() (the
	function used by Evergreen):      Since a longer document has a greater chance of containing a
	     query term it is reasonable to take into account document size,
	     e.g., a hundred-word document with five instances of a search word
	     is probably more relevant than a thousand-word document with five
	     instances.  Both ranking functions take an integer
	     normalization option that specifies whether and how a document's
	     length should impact its rank. The integer option controls several
	     behaviors, so it is a bit mask: you can specify one or more
	behaviors using | (for example, 2|4).           0 (the default) ignores the document length          1 divides the rank by 1 + the logarithm of the document
	         length          2 divides the rank by the document length          4 divides the rank by the mean harmonic distance between
	         extents (this is implemented only by ts_rank_cd)          8 divides the rank by the number of unique words in
	         document          16 divides the rank by 1 + the logarithm of the number of
	         unique words in document          32 divides the rank by itself + 1      If more than one flag bit is specified, the transformations are
	     applied in the order listed.       It is important to note that the ranking functions do not use
	     any global information, so it is impossible to produce a fair
	     normalization to 1% or 100% as sometimes desired. Normalization
	option 32 (rank/(rank+1)) can be applied to scale all ranks into the
	     range zero to one, but of course this is just a cosmetic change; it
	will not affect the ordering of the search results.   In Evergreen, these options are set via search modifiers.  The
	 modifiers are mapped in the following way:      * #CD_logDocumentLength  => 1  :: rank / (1 +
	     LOG(total_word_count))   :: Longer documents slightly less
	     relevant * #CD_documentLength     => 2  :: rank /
	     total_word_count              :: Longer documents much less relevant
	* #CD_meanHarmonic       => 4  :: Word Proximity
	     :: Greater matched-word distance is less relevant * #CD_uniqueWords
	     => 8  :: rank / unique_word_count             :: Documents with
	     repeated words much less relevant * #CD_logUniqueWords     =>
	     16 :: rank / (1 + LOG(unique_word_count))  :: Documents with
	     repeated words slightly less relevant * #CD_selfPlusOne
	=> 32 :: rank / (1 + rank)                    :: Cosmetic
	normalization of rank value between 0 and 1  Adding one or more of these to the default_CD_modifiers list will
	 cause all searches that use QueryParser to apply them.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20181
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: one more fix,
	for Show in Catalog on issuance holds git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20179
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/common.properties: 
	display issuance label, not subscription label git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20177
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/common.properties,
	Open-ILS/xul/staff_client/server/patron/holds.js: add Part Holds to
	Actions for this Record -> View Holds.  Also add xul support for
	displaying issuance holds (needs testing) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20175
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/common.properties,
	Open-ILS/xul/staff_client/server/patron/holds.js: support Part Holds
	in xul lists git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20173
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: no
	need to flesh the record here git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20172
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: typo git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20169
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql: improve comments on a
	couple config tables Based on suggestions from Mike Rylander and Thomas Berezansky.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20165
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/008.schema.query.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/200.schema.acq.sql,
	Open-ILS/src/sql/Pg/999.functions.global.sql: minor improvements to
	database object comments * remove copyright, license verbiage, and C-style comment marking   from the comments; these can live in the SQL scripts * updated several copyright headers * minor improvements to documentation of a couple tables  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20164
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/build-db.sh,
	Open-ILS/src/sql/Pg/grab-db-comments.pl,
	Open-ILS/src/sql/Pg/sql_file_manifest,
	Open-ILS/src/sql/Pg/update-db-comments.sh: script to update DB
	object comments New script, update-db-comments.sh, to be run as part of upgrades to
	refresh comments on database schema objects.  Usage is:   update-db-comments.sh db-host db-port db-name db-user db-pass The helper script grab-db-comment.pl is what actually parses out the
	comment statements.  To avoid repetition, the list of default SQL scripts to use when
	initializing an Evergreen database has been moved to a new file
	called sql_file_manifest.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20163
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/util.js: fixes Edit Volumes
	action by flattening the volume objects before updating them git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20159
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.xul: in the MARC
	Editor, put the callnumber and barcode textboxes for Fast Item Add
	on a separate row git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20152
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/tests/check_entities.py,
	build/i18n/tests/check_properties.py: Enable relative paths in i18n
	testing scripts We were 98% of the way there; now we no longer need to cd into the
	same directory as the i18n testing scripts to run them with
	meaningful output. Should be useful for adding these to the CI
	server.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20149
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/tests/check_entities.py: Don't check .js files for
	entities Must have asked this script to check JS files for valid entities for
	a reason at some point in the dark past, but it couldn't have been a
	very good reason; we're getting a false positive that needs to be
	hushed now. Better to just stop looking for XML entities in
	JavaScript.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20146
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Empty strings in
	oils_i18n_gettext() throw i18n errors When you run 'make newpot', if you have an empty string in an
	oils_i18n_gettext() function, you'll see errors like: Error in line 1712 of SQL source file: 'NoneType' object has no
	attribute 'group' This satisfies the i18n build process and also serves as a more
	evident placeholder for expanded descriptions if someone feels so
	inclined in the future.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20140
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-17  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/print.js: Add new
	macros for print templates.  %-TRIM% Trims whitespace before the macro %TRIM-% Trims whitespace after the macro %SUBSTR(#)%...%SUBSTR_END% Take substring starting at position # to
	end of string.  If # is negative count backwards from end of string.  %SUBSTR(#,#)%...%SUBSTR_END% Same as previous, but limit to second
	provided number characters after start point.  If second number is
	negative, count backwards instead of forwards.  TRIM macros inside of SUBSTR will be replaced first, then SUBSTR,
	then TRIM outside of SUBSTR.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20138
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-16  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/copy_browser.js,
	Open-ILS/xul/staff_client/server/circ/copy_status.js: fix Add Items
	off of volumes by changing the label key in copy_shortcut to
	callnumber composite key git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20131
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-16  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: trace
	statements.  need to change how copy_shortcut is constructed in
	parent interfaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20130
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-16  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: trace
	statements git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20129
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-16  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: trace
	statements git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20128
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-16  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: 
	comment tweak git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20127
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-16  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.aggregate.sql: some tweaks to
	tsvector and friends to get the db schema to build cleanly git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20126
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0521.schema.u-no-uri-use.sql: Allow NULL
	"use restriction" fields for located URIs The asset.uri.use_restriction field, which is really a sort of
	public notes field for 856 fields, was grabbing the $u subfield
	(URL) as a sort of last-gasp effort to give it some data. However,
	the effect was rather odd and led to workarounds like Conifer's skin
	to avoid displaying the use restriction field if its value was
	identical to the URL, etc.  Instead, stop grabbing $u and handle the case where use_restriction
	column is NULL gracefully, just like the schema intended.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20124
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: Do
	not clear auri links in default skin The dojo orphan() call which attempted to wipe any non-located 856s
	was actually wiping the located 856s in the record detail display.  Removing the extra call makes this work in Firefox and Chromium, at
	least.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20121
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0520.schema.clear-old-asset-uris.sql: 
	Delete ##URI## call numbers and uri_call_number_map entries on bib
	reingest This approach will lead to some acn/auricnm ID inflation, but it
	works.  Addresses LP# 761130 (immortal ##URI## entries in asset.call_number)
	reported by Ben Shum and LP# 761085 (cannot delete bib with ##URI##
	volumes) reported by Jason Etheridge.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20118
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-15  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/build-oils-db.sh: prune unused script;
	purpose now served by eg_db_config.pl  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20116
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-15  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: Protect dumb
	JavaScript engines from having to deal with actual Unicode The holdings_xml format did not include an XML declaration, but
	adding that as we do here still does not make the Firefox and
	Chromium JS engines capable of consuming XML that contains Unicode
	content outside of the base ASCII range.  So, we invoke entityize() to convert anything outside of the realm
	of ASCII to XML entities. An alternative would be to invoke
	entityize() in OpenILS::Application::SuperCat::unAPI::acn but it's
	not clear if that would interfere with any other uses.  With this change, library names / copy location names with Unicode
	content can be displayed correctly on the search results page.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20113
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0519.schema.extract_all_fixed_fields_fr
	om_leader.sql: MORE: Properly support extracting MARC21 fixed fields
	from the leader, not just the 00x controlfields, in the "all fixed
	fields" version git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20106
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0518.schema.extract_fixed_fields_from_l
	eader.sql: Properly support extracting MARC21 fixed fields from the
	leader, not just the 00x controlfields git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20105
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0517.schema.multiple-9s-in-856.sql: 
	Support mulitiple subfield-9 values in a single 856 tag git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20102
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_sql.c: Protect pcrud-ish retrieve from an
	empty result set git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20095
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Restore URIs in marcxml-uris unAPI format At some point (r16750) we started doing a numeric comparison of
	$flesh instead of just checking to see if $flesh was defined; this
	returned false when $flesh == 'uris', preventing URIs from being
	included in the marcxml-uris unAPI format.  This restores URIs to marcxml-uris and so we can revert the extra
	BibTemplate call in rdetail_summary.xml.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20092
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Specify the holdings_xml unAPI format for URI calls The unAPI marcxml-uris format is not returning URIs at the moment.
	While we're getting that fixed, use the holdings_xml format to get
	the URI job done; requires an extra JS call, but that's better than
	not working at all.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20089
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	or.pm: Escape rather than filter SIMILAR TO metacharacters in patron
	crazy search The filtering I introduced in r19983 was overly aggressive, and
	included characters that weren't actually SIMILAR TO metacharacters.
	Instead, escape each character, carefully going through the list of
	metacharacters listed at

	http://www.postgresql.org/docs/8.4/interactive/functions-matching.htmlWorks for email addresses like "foo.bar+baz@example.com".  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20086
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-14  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/extras/circ/alt_holds_print.js,
	Open-ILS/xul/staff_client/server/patron/holds.js: Backport r20082
	from trunk Address LP #754880, where printing happens before the progress
	dialog can be cleared in the alternate holds pull list print
	interface Additionally, provide the usual "print page" button so that the list
	can be reprinted at will git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20083
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0516.schema.acq-marc-extract.sql: 
	upgrade script for consistency w/ schema change in r20073 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20080
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-14  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/quick_metarecord_map.sql: tweaks to
	quick_metarecord_map.sql * used version from wiki, which provides same results as the   previous version but performs better on large databases * now works without editing (a vacuum cannot run inside of a
	transaction) * don't do vacuum full, just a regular vacuum analyze [1]

	http://evergreen-ils.org/dokuwiki/doku.php?id=scratchpad:random_magic_spells#how_to_generate_metarecords_for_a_newly_loaded_bib_batch git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20076
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/200.schema.acq.sql: rely on search_path to
	locate the extract_marc_field() function which is now installed in
	the 'evergreen' schema by default git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20074
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-13  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/999.functions.global.sql,
	Open-ILS/src/sql/Pg/upgrade/0515.schema.copy-vis-cache.sql: Thinko
	in the delete query for copy visibility caching git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20071
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-13  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/met
	abib.pm: Protect search against all-deleted bibs by pinning the
	estimation ratios in that case git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20068
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-13  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/upgrade/0514.schema.unapi2-strip-whitespace.sql: 
	strip useless whitespace from XML output for transfer size reduction git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20066
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-13  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/upgrade/0513.schema.svf-in-unapi2.sql: add SVF
	data to in-db unAPI git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20064
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-12  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/upgrade/0510.schema.search_path.sql: repaired
	SQL upgrade syntax error git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20061
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Circ.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI/biblio.p
	m,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/dbi
	.pm, Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/010.schema.biblio.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/300.schema.staged_search.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/999.functions.global.sql,
	Open-ILS/src/sql/Pg/upgrade/0512.schema.multi-home-items.sql,
	Open-ILS/web/opac/common/js/config.js,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/advanced.js,
	Open-ILS/web/opac/skin/default/js/copy_details.js,
	Open-ILS/web/opac/skin/default/js/rdetail.js,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_cn_details.xml,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_extras.xml,
	Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/chrome/content/OpenILS/global_util.js,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.xul,
	Open-ILS/xul/staff_client/chrome/content/main/constants.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/util/exec.js,
	Open-ILS/xul/staff_client/chrome/content/util/widget_prompt.js,
	Open-ILS/xul/staff_client/chrome/content/util/widget_prompt.xul,
	Open-ILS/xul/staff_client/chrome/locale/en-US/offline.properties,
	Open-ILS/xul/staff_client/server/cat/copy_browser.js,
	Open-ILS/xul/staff_client/server/cat/copy_browser.xul,
	Open-ILS/xul/staff_client/server/cat/manage_multi_home_items.js,
	Open-ILS/xul/staff_client/server/cat/manage_multi_home_items.xul,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties: Add
	support for Multi-Homed Items (aka Foreign Bibs, aka Linked Items) Evergreen needs to support the ability to attach a barcoded item to
	  more than one bibliographic record.  Use cases include: 1. Barcoded E-Readers with preloaded content     * Readers would all be items attached to a single "master" bib
	    record in the traditional way, through call numbers that define
	    their ownership * Each reader, as a barcoded item, can be attached through
	    Multi-homed Items to records describing the list of preloaded
	    content * These attached Multi-homed Items can be added and removed as
	  content is swapped out on each reader 2. Dual-language items     * Cataloger decides which of several alternate languages is the
	    primary, and attaches the barcoded item to that record in the
	    traditional way * Alternate language records are attached to this item through
	  Multi-homed Items 3. "Back-to-back" books -- two books printed upside down relative to
	    one another, with two "front" covers * Cataloger decides which of the two titles is the primary, and
	    attaches the barcoded item to that record in the traditional way * Alternate title record is attached to this item through
	  Multi-homed Items 4. Bound Volumes -- Sets of individual works collected into a single
	    barcoded package * Cataloger decides which of the titles is the primary (or creates a
	    record for the collection as a whole), and attaches the barcoded
	    item to that record in the traditional way * Remaining title records for the collected peices are attached to
	this item through Multi-homed Items Functionality funded by Natural Resources Canada --
	http://www.nrcan-rncan.gc.ca/com/ Please see

	http://git.esilibrary.com/?p=evergreen-equinox.git;a=shortlog;h=refs/heads/multi_home for the full commit history.git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20057
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.functions.general.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/upgrade/0511.schema.fake_fkey_tgr-for-inherited
	-tables.sql: Add a trigger function to simulate FKEY constraints on
	inherited tables git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20054
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.functions.general.sql,
	Open-ILS/src/sql/Pg/010.schema.biblio.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/210.schema.serials.sql: Final cleanup for the
	base schema, re search_path ... I hope git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20051
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/010.schema.biblio.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/upgrade/0510.schema.search_path.sql: Fix
	functions stranded in the evergreen schema without a search path
	reference (ugly but mechanical) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20048
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-12  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/upgrade/0509.schema.better_maintain_901.sql: 
	add missing upgrade script  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20045
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-11  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* configure.ac: fix my overzealous editing of configure.ac  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20043
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-11  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: Let's not be picky
	about permissions here; an item needs to go where it needs to go :) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20041
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-10  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/bill_wizard.js,
	Open-ILS/xul/staff_client/server/patron/bill_wizard.xul: patch from
	jamesrf for lp#756880 for Grocery Billing Location in Bill Patron
	wizard git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20037
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-10  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/cat/util.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: for lp
	bug#756838, consistent copy status for new items.  jamesrf++ git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20034
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-08  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js: repaired bug in
	prepayment_required check.  property -> method git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20031
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-08  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js: For
	transit_slip template, %item_title%, %item_barcode%, etc. need to be
	in the Header, not the Line Item git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20028
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Add Net::IP dependency for
	Fedora per r20023 Required for the new ability of the Apache redirect module to
	optionally read redirect skin and domain from the library IP's
	configuration file git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20026
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-08  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/Redirect.pm: patch from Ben
	Ostrowsky (w/ input) to add support to the Apache redirect module to
	also optionally read redirect skin and domain from the library IP's
	configuration file.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20024
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-07  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/myopac.js: test for pre-cat
	slightly off in OPAC My Account, spotted by Steve Callender git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20018
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-07  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.functions.general.sql,
	Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql: further fixes to
	maintain_901 Now correctly handles &, <, or > appearing in the tcn_value or
	tcn_source.  Also introduces a trivial utility stored function,
	evergreen.xml_escape(): evergreen.xml_escape(TEXT) returns TEXT: converts '&', '<', and '>'
	to XML entities  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20015
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-07  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/marc2sre.pl.in: Enable marc2sre.pl to
	run reasonably fast with a large set of bibs Our previous iteration of marc2sre.pl used an ILIKE stanza beginning
	with a wildcard to match system control numbers without having to
	specify the institution's MARC code.  This worked, but was painfully
	slow in large bib sets as the database needed to use a bitmap index
	scan to find matches.  By adding a --prefix flag, the user can specify the institutional
	MARC code for the set of records and we can use an exact match
	against metabib.full_rec.value, which is immeasurably faster.  This
	is, of course, a problem if there are multiple institutional MARC
	codes in use for a given set of bibliographic records.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20013
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-06  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/Makefile.am, Open-ILS/src/extras/import/marc2are.pl,
	Open-ILS/src/extras/import/marc2are.pl.in,
	Open-ILS/src/extras/import/marc2bre.pl,
	Open-ILS/src/extras/import/marc2bre.pl.in,
	Open-ILS/src/extras/import/marc2sre.pl,
	Open-ILS/src/extras/import/marc2sre.pl.in,
	Open-ILS/src/extras/import/parallel_pg_loader.pl,
	Open-ILS/src/extras/import/parallel_pg_loader.pl.in, configure.ac: 
	install command-line MARC import tools in @prefix@/bin (corrected version after dealing with apparent git stash breakage) No longer need to keep the source tree around to use marc2are.pl,
	marc2sre.pl, marc2bre.pl, and parallel_pg_loader.pl.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20011
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-06  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/marc2sre.pl: Improve error handling in
	marc2sre.pl when bib ID is not found If we can't find a bibliographic record ID to use in our load, then
	skip that MFHD record and move on to the next one. Using the counter
	gives sites a chance to identify which record caused the problem.  Aside: bitmap index scans for leading '%' LIKE searches make the
	--bibfield / --bibsubfield extremely slow in large datasets. If at
	all possible, avoid this path! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20007
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-06  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0508.schema.maintain_901_amp_fix.sql: 
	fix crash when importing/saving bib with '&' in TCN value Also fix similar glitch if ampersand is present in the TCN source.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20004
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-06  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/Makefile.am: bump xulrunner version git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@20002
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-06  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/SIP/Patron.pm: Patch from Thomas
	Berezansky to support patron priv expiration information in SIP2 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19999
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-06  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/items.js,
	Open-ILS/xul/staff_client/server/patron/items_overlay.xul: add Item
	Attribute Editor to patron Items Out git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19995
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-06  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/marc2sre.pl: Make the bib record lookup
	in marc2sre.pl more specific Don't strip the identifier down to a bare integer if we are doing a
	lookup of the value in the bib record. Otherwise, identifiers such
	as ABC1001 and ABC001 will overlap ('%001' will return both
	records).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19994
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-06  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/marc2sre.pl: Whitespace git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19992
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-06  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/marc2sre.pl: Overhaul the marc2sre.pl
	script for importing MFHD records Add --bibfield / --bibsubfield options to support retrieving the bib
	record ID by searching the specified field/subfield for the
	identifier, instead of assuming that the identifier =
	biblio.record_entry.id. Avoiding the lookup will be much faster, but
	some sites want to start clean with their bibliographic record IDs,
	so this supports them.  Remove the need for passing in the owning user's password and simply
	do a lookup by username in the actor.usr table. This is a bit more
	secure as the password isn't exposed on the command line and you can
	easily set someone else as the owner of the records without having
	to know their password.  Add significant internal help via Pod::Usage.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19990
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-05  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	or.pm: Prevent patron search from returning horrible errors on
	regexian input Add a utility method, _clean_regex_chars(), to filter common regex
	characters out of input values.  When these characters are passed to
	database SIMILAR searches, strange things (generally ugly errors)
	can happen - so filter them out.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19984
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-04  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/editor_base.js,
	Open-ILS/xul/staff_client/server/serial/serctrl_main.xul,
	Open-ILS/xul/staff_client/server/skin/serial.css: More robust fix
	for edit highlighting in Serial Control View git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19981
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-04  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/editor_base.js: Fix edit
	highlighting in Serial Control View git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19976
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-04  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/xul/staff_client/server/patron/search_form_horiz_overlay.x
	ul: reorder tabindex for horizontal patron search.  non-flex the
	search button.  thanks to sylvar and others for poking git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19969
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-04  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/result_common.js: tweak to
	default suggestion for low-hits search Rather than show a suggestion for every word in the original search
	phrase, only display suggestions for words not found in the
	dictionary.  For example, rather than having a search for "Amesh
	paradise" return a suggestion of "Amish paraders", return "Amish
	paradise" as the suggestion (assuming the default dictionaries are
	used).   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19965
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-04  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/po/view_po.js: order line items in
	PO display by line item ID Order was effectively random otherwise.  Use case from at least one
	library indicates this change, but doesn't preclude later work to
	make the sort order more flexible.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19963
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-04-04  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js: re-fix
	senator's fixes that I mangled  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19961
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-04  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/auth/controller.js,
	Open-ILS/xul/staff_client/chrome/content/main/main.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/util/network.js: Client
	Permission Overhaul Menu/Toolbar commands can have a perm= attribute added, containing a
	space-seperated list of permissions.  Without it they stay enabled
	at all times (or disabled if they are manually disabled in the
	file).  With it they disable unless the user has at least one
	permission listed.  In addition, made *all* new or active windows get UI updates when
	changing operators, including updated menu enable/disable.  Will need a check on the permissions from previous commit, and
	probably a pile more from those who understand what needs what.    git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19960
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-04  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	Add some permissions for testing   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19959
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-04  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	Move labels/accesskeys back onto menuitem nodes Apparently command labels override everything else, rather than the
	other way around.  Set at location failitates easier labels by context (different
	menus, shorter labels on toolbar, etc).    git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19958
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-04  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	Move most label/accesskeys to command nodes The following entries had multiple menu items with differing labels.
	I picked one for each to be the "default" on the command node.  The
	others were left on the menuitems.  cmd_edit_copy_buckets (edit/cat) cmd_edit_volume_buckets (edit/cat,
	commented out) cmd_edit_record_buckets (edit/cat) cmd_circ_checkout
	(circ/circ/search) cmd_copy_status (circ/cat/search) cmd_search_opac
	(circ/cat/search) cmd_search_tcn (cat/search) cmd_search_bib_id
	(cat/search) Side note: cmd_replace_barcode exists on edit, circ, and cat, but
	used one label for all three.    git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19957
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-04  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	Remove key attribute from command nodes They don't appear to do anything, unlike label/accesskey settings.  Menus don't read them for display, keys in the keyset refer in the
	opposite direction.    git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19956
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-04  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js: Rig
	command_tab on *everything* Will make attempts to customize the toolbar a lot easier.  Also
	makes things more consistent.    git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19955
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-04-04  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/booking/capture.js,
	Open-ILS/web/js/ui/default/booking/pull_list.js,
	Open-ILS/web/js/ui/default/booking/reservation.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/server/patron/display.js: Backport r19942
	from trunk Booking: This should a) make booking interfaces behave better when a
	staff login session times out and is replaced by use of a re-auth
	dialog, and b) wrap booking interfaces in a <browser> element with
	the attendant back/forward/reload buttons that most similar
	interfaces already had.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19943
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-04  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Money.pm: pass
	cvv2 value to CC processor git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19941
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-04  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/extras/circ/alt_holds_print.html: Backport
	r19937 from trunk Ben Ostrowsky pointed out that the alt holds (pull list) printing
	interface was trying to include AutoIDL.js from an incorrect path.  I don't believe that file should be included at all, so now I've
	removed the broken line.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19938
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/upgrade/0507.schema.unapi-rewrite.sql: Teach
	in-db unAPI to avoid redundant xmlns declarations, including those
	already embedded in MARCXML git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19936
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-02  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/006.schema.permissions.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/upgrade/0506.schema.tree-ish_function_row_estim
	ates.sql: Add realistic row estimates to tree-ish functions (default
	is 1000) so that callers can make better plans in complex queries git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19931
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-01  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	ion.pm: Patch from Thomas Berezansky to address unneccessary fine
	generation and avoid unchecked division by zero; details and DCO at
	https://bugs.launchpad.net/evergreen/+bug/747533 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19928
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-04-01  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/Que
	ryParser.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/QueryParser.p
	m: Better search normalization de-duping when 'params' are used This patch addresses search normalization deduping at two levels.
	We now verify that both the function and the params are the same
	before excluding a normalization, both when the normalization is
	first added to the set and when the SQL is being built (since
	currently multiple sets may be involved).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19925
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-31  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/met
	abib.pm: Use identifer indexes for older ISxN API methods (LP Bug
	#728671) There are three logic layers involved in the older ISxN 'quick
	searches': the OPAC, the search API, and the storage API.  The
	approach of this patch is to update the search API (which in turn
	fixes the OPAC), and ignore/deprecate the storage API for these
	identifiers.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19921
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-31  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/timestamp.js,
	Open-ILS/xul/staff_client/server/circ/checkout.js,
	Open-ILS/xul/staff_client/server/circ/renew.js: Logic error trying
	to merge the date component of one date object with the time
	component of another.  We were trying to use the time object and
	update it piecemeal, which resulted in non-sensical dates that were
	forced to wrap.  For example, if the date object was to set to March
	31, 2011, and we tried .setMonth(3) on it to change it to April,
	that would result in an April 31st, which doesn't exist, and the
	date thus moves forward a certain number of days into May.  This affects Check Out, dedicated Renew interface, and the various
	date picking functions in Items Out and Holds interfaces.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19918
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-30  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/actor/user/register_table.tt2: 
	Patch from Thomas Berezansky; see
	https://bugs.launchpad.net/bugs/745123 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19916
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-30  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: add item columns
	to xul-based holds lists  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19913
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/actor/user/register_table.tt2: 
	Change label to "Reset Password" and get button out of tab ordering In a keyboard-intensive patron input workflow, pressing tab should
	not place focus on the "Reset Password" button; the password is
	automatically generated at dialog creation time. Setting tabIndex to
	-1 disables tab focus for the button.  Also, the button has been relabeled to "Reset Password" to be
	consistent with the previous button.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19909
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js,
	Open-ILS/web/templates/default/actor/user/register_table.tt2: 
	Restore the Reset Password button on patron editor Per LP 488243, the Reset Password button that existed on the old XUL
	patron editor was lost in the transition to the new Dojo patron
	editor. Jason Stephenson stepped up and offered a patch to restore
	the functionality.  Developer's Certificate of Origin 1.1 By making a contribution to this project, I certify that: (a) The contribution was created in whole or in part by me and I     have the right to submit it under the open source license     indicated in the file; or (b) The contribution is based upon previous work that, to the best     of my knowledge, is covered under an appropriate open source     license and I have the right under that license to submit that     work with modifications, whether created in whole or in part     by me, under the same open source license (unless I am     permitted to submit under a different license), as indicated     in the file; or (c) The contribution was provided directly to me by some other     person who certified (a), (b) or (c) and I have not modified     it.  (d) I understand and agree that this project and the contribution     are public and that a record of the contribution (including all     personal information I submit with it, including my sign-off) is     maintained indefinitely and may be redistributed consistent with     this project or the open source license(s) involved.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19908
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>

2011-03-30  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0505.schema.force_facets_to_NFC.sql: fix
	typo in facet_force_nfc definition  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19904
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-03-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0505.schema.force_facets_to_NFC.sql: 
	Force facet values to Unicode NFC to reduce spurious non-matches git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19900
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/SIP/Patron.pm: Inspired by a 1.6
	patch from Brandon Uhlman to collect the set of holds not ready for
	pickup, 2.0+ style git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19895
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-29  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/offline/offline.pl: in the case of multiple xact
	event error responses, capture the first for staff client reporting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19892
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-29  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js: repair
	coded_value_map staff client menu entry.  was somehow lost in a
	merge, perhaps git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19891
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/upgrade/0504.schema.parts_and_cnaffix.sql: 
	Missed function in upgrade script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19888
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-29  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/search_form.js: fix error
	with profile filter and horizontal patron search interface git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19886
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/lib/OpenILS/Application/AppUtils.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Cat.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Cat/AssetCommon.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Circ.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Serial.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI/asset.pm
	,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI/biblio.p
	m,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/dbi
	.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	ion.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/bib
	lio.pm, Open-ILS/src/perlmods/lib/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Const.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/010.schema.biblio.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/upgrade/0504.schema.parts_and_cnaffix.sql,
	Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/js/ui/default/conify/global/config/acn_prefix.js,
	Open-ILS/web/js/ui/default/conify/global/config/acn_suffix.js,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/copy_details.js,
	Open-ILS/web/opac/skin/default/js/holds.js,
	Open-ILS/web/opac/skin/default/js/myopac.js,
	Open-ILS/web/opac/skin/default/js/rresult.js,
	Open-ILS/web/opac/skin/default/xml/common/holds.xml,
	Open-ILS/web/opac/skin/default/xml/myopac/myopac_holds.xml,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_cn_details.xml,
	Open-ILS/web/templates/default/conify/global/biblio/monograph_part.
	tt2,
	Open-ILS/web/templates/default/conify/global/config/acn_prefix.tt2,
	Open-ILS/web/templates/default/conify/global/config/acn_suffix.tt2,
	Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/chrome/content/OpenILS/global_util.js,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.xul,
	Open-ILS/xul/staff_client/chrome/content/main/constants.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul,
	Open-ILS/xul/staff_client/chrome/content/util/browser.js,
	Open-ILS/xul/staff_client/chrome/content/util/list.js,
	Open-ILS/xul/staff_client/chrome/content/util/widgets.js,
	Open-ILS/xul/staff_client/chrome/locale/en-US/offline.properties,
	Open-ILS/xul/staff_client/server/cat/bib_brief.js,
	Open-ILS/xul/staff_client/server/cat/bib_brief.xul,
	Open-ILS/xul/staff_client/server/cat/copy_browser.js,
	Open-ILS/xul/staff_client/server/cat/copy_browser.xul,
	Open-ILS/xul/staff_client/server/cat/copy_editor.js,
	Open-ILS/xul/staff_client/server/cat/copy_editor.xul,
	Open-ILS/xul/staff_client/server/cat/spine_labels.js,
	Open-ILS/xul/staff_client/server/cat/util.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.xul,
	Open-ILS/xul/staff_client/server/cat/volume_copy_editor.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_editor.xul,
	Open-ILS/xul/staff_client/server/cat/volume_copy_editor_horiz.xul,
	Open-ILS/xul/staff_client/server/cat/volume_editor.js,
	Open-ILS/xul/staff_client/server/cat/volume_editor.xul,
	Open-ILS/xul/staff_client/server/circ/copy_status.js,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties,
	Open-ILS/xul/staff_client/server/locale/en-US/circ.properties,
	Open-ILS/xul/staff_client/server/locale/en-US/common.properties,
	Open-ILS/xul/staff_client/server/patron/util.js: Monograph Parts;
	Unified vol/copy wizard; Call Number affixes; Instant Detail  * Monograph Bibliographic Parts - One MARC record should be able to
	   support all volumes associated with the title, subdivide records in
	   multiple ways, and the ability to support holds on individual Parts.   * Unified Volume/Copy Wizard - The ability to enter call number,
	   barcode number, and all copy information on the same screen.  Also,
	   the ability to include some information associated with the call
	   number, such as classification scheme, prefix and suffix, in the
	   item template feature of the Unified Volume/Copy Wizard.   * Call Number Affixes - Delimiting the call number so that the
	   prefix and suffix reside in separate fields.  This prefix and
	   suffix should display in the OPAC as part of the call number and
	   should also be available for use in spine labels.   * Instant Detail for One Record Hit List - When searching for
	   records in the staff client, the ability to immediately land on the
	   bibliographic record instead of the search results screen when there
	   is only on matching search result in the system.  This enhancement
	   does not change the way search results are returned in the public
	catalog.  These features were sponsored by the Massachusetts Library Network
	Cooperative.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19884
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-29  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/met
	abib.pm: bug 744687: fix multi-field MARC expert search Fixes bug where a bib that has multiple subfields meeting one
	condition of a 2+ field MARC expert search could end up in the
	results list even if it didn't meet the other conditions (currently
	multi-field MARC expert searches use implicit 'AND').   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19881
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-03-28  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/SuperCat.pm: Fix
	call-number sorting for non-generic sort keys (LP Bug #737819) Selecting on 'label' but sorting on 'label_sortkey' did not work
	properly.  Instead, we will now find the single best call number we
	can based on the label given, then both select and sort based on
	that call number's sort key.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19878
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-28  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xsl/oilsMARC21slim2HTML.xsl: MARC View print problem
	workaround (LP Bug #742033) Certain printers were failing to print from the MARC View in the
	staff client.  Adding a simple title to the view ended up being a
	successful workaround, and is unlikely to have negative consequences
	in any case.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19875
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-28  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/po/offline.properties/en-CA.po: Address LP 744393:
	Arabic text in en-CA offline.properties A translator appears to have mistakenly added Arabic text to the
	en-CA offline.properties file in Launchpad. This commit corrects
	those translations and completes the translation of the file for
	2.0.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19873
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-28  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/bill2.js,
	Open-ILS/xul/staff_client/server/patron/bill2.xul: fix up receipt
	options persistence in billing interface; implement # of receipts
	option (not perfect if using print dialogs; non-blocking and not
	necessarily queued up)  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19869
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-28  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/admin/printer_settings.js: clear
	print.always_print_silent instead of setting it to false in the
	Printer Settings Editor  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19868
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-25  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/admin/adminlib.js: fixes things
	like the stat cat editor, since that extra param now changes the
	return signature of the method  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19863
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-25  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js: 
	data.lookup was broken for cases where data.list[key] didn't exist
	for a given key  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19861
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-25  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg.conf: Avoid Apache warnings resulting
	from duplicate NameVirtualHost directives Benjamin Shum reported that the Apache warnings that have been a
	part of Evergreen's default configuration on Apache start for ages
	could be avoided by commenting out the "NameVirtualHost: *80" line
	in eg.conf. Testing confirmed that the directive was not necessary
	on Ubuntu, Debian, or Fedora. As this warning has been the cause for
	unnecessary concern on the part of many new adopters of Evergreen,
	getting rid of it appears to be a nice usability win.  Thanks Ben! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19858
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-24  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/windowssetup.nsi: Shortcuts for all
	users, not just current user.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19856
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/common/js/opac_utils.js: have checkILSEvent
	handle events that aren't in ils_events.xml  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19853
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-22  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/Que
	ryParser.pm: Honor the 'active' flag in QueryParser.pm for
	search.relevance_adjustment entries.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19850
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-22  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Build libjs from source for
	now until the Perl threading problem can be reliably tested The previous commit changed JavaScript::SpiderMonkey to be built
	without thread safety, but on Fedora we had been installing the
	js-devel package (which was threaded). As you can't build a
	non-threaded JavaScript::SpiderMonkey on top of a threaded libjs,
	for now we'll make Fedora build a non-threaded libjs from source
	just like the other distros.  Note that the problem with threaded JavaScript::SpiderMonkey
	surfaced on Debian Lenny when targeting holds. Lenny has
	libthreads-perl 1.71, but a number of fixes have been committed to
	subsequent versions
	(http://cpansearch.perl.org/src/JDHEDDEN/threads-1.82/Changes) - so
	threading support might be reliable on more current distros. Once we
	have a reliable test, we might be able to go back to the packaged
	version of libjs.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19847
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-22  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/tools/update_db.sh: Another layer of escaping for the
	escapes in the DB update script Apologies for the previous patch that led to breakage; I "tested" in
	a script in which I had already hardcoded the answer I wanted after
	running into problems with the previous version of the script. Not
	good testing practice.  Thanks to Bill Erickson for suggesting the extra escapes. Tested in
	a clean environment this time, and it works.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19844
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Remove thready building --
	we do not use threads anyway, and it breaks JS::SM git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19841
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/tools/update_db.sh: Enable update_db.sh to handle upgrading
	databases with release version When '0475' is mixed with '1.6.0.4', the latter wins as far as a
	plain MAX() operator goes. Ensuring that the version is all digits
	should help avoid the release version numbers in the
	config.upgrade_log table.  Thanks to Thomas Berezansky for suggesting a SIMILAR TO operator
	variation that led to this approach.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19838
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/crontab.example: correcting bad timespecs in the
	example crontab git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19834
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-21  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: no, this was
	correct.  doh :)  the list version uses paging, but we're counting
	the entire set git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19831
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-21  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: this "count"
	method gets the same parameters as the list version git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19828
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-19  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI/action.p
	m,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI/config.p
	m,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	ion.pm, Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/100.circ_matrix.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0503.schema.grace_periods.sql,
	Open-ILS/src/support-scripts/fine_generator.pl,
	Open-ILS/web/js/ui/default/conify/global/config/circ_matrix_matchpo
	int.js,
	Open-ILS/web/templates/default/conify/global/config/circ_matrix_mat
	chpoint.tt2,
	Open-ILS/web/templates/default/conify/global/config/rule_recurring_
	fine.tt2: In-database Grace intervals As it stands the grace period for a transaction is only specified on
	the fine generator script, but fines can be generated on checkin as
	well without one. As a result any checkin results in grace periods
	being negated.  The attached patch adds in-db grace periods for all non-booking
	transactions, removing the grace period from the fine generator cron
	job script and placing it on the circulation. Grace periods are set
	on the recurring fine rule with an override available on the circ
	matchpoint, identical to how renewal count can be overridden from
	the duration rule already. These grace periods are respected on
	checkin fine generation as well as on the fine generator cron job
	script.  The upgrade script will assume, by default, a grace period of 1, but
	has a \set line to change this. It will also update all circulations
	without a checkin by default, but another \set will allow disabling
	of that.  [ NOTE: for the history of the patch, see:
	https://bugs.launchpad.net/evergreen/+bug/732679 ]   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19824
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-03-18  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Make sure "ol" propagates through BibTemplate subject search links
	for OPAC range hiding git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19813
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/Makefile.am,
	Open-ILS/xul/staff_client/windowssetup.nsi: Switch to AccessControl
	plugin, more reliable.  Only fetches it when needed.  Also make NSIS Less...verbose. Warnings/errors only.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19811
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/Fieldmapper.pm: added
	field_safe attr to ccs, aout, and crahp classes;  capture field_safe
	attr during IDL parsing git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19808
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-18  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/web/opac/skin/default/js/holds.js: Intelligent Metarecord
	Format Selection for Holds Previous to this commit, Evergreen would show all possible record
	formats when promoting a T-type hold to an M-type. This change
	causes the middle layer method to respect the Hard Boundary of the
	pickup library when considering what constituent records within a
	metarecord will contribute formats.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19806
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-03-18  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_sql.c: Allow the "result_field" to be
	used as the default alias in the output column of a row or set
	returning transform git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19800
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-17  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* : Pre-modified xulrunner-stub files + icons Icons courtesy of Mike Peters, or so my note alongside them says.  The pre-modified stubs are built on the 1.9.2.15 build of xulrunner.
	They should continue to work on future 1.9.2 builds.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19798
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-17  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/Makefile.am: Copy is not valid. How I
	missed that before I don't know.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19797
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-17  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/windowssetup.nsi: Default to no license
	page (for the staff client installer) Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19796
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-17  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0502.data.defacto_OCLC_local_cn_fields.
	sql: Treat call number fields 090 and 092 as local LC and Dewey
	(respectively) based on de facto standards.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19791
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0501.data.QP_language_vs_item_lang.sql: 
	Make a back-compat version of item_lang for QP git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19789
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-16  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Money.pm: make
	payment receipt print/email run inside a transaction.  instead of
	using authoritative, force the xact for reasons mentioned in the
	comments git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19783
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/holds.js: Addresses LP bug
	#736167, correctly populate hold format list for Advanced Options git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19777
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0500.schema.search_path_mangling.sql: 
	upgrade script matching r19759-r19761 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19773
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-16  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/renew.js: dedicated renewal
	interface should use receipt printer git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19770
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/2.0.3-2.0.4-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0499.schema.generic_CN_normalizer.sql: 
	Patch from Steve Callendar addressing CN sort order on page 0 (and
	before) of CN browse git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19767
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	ion.pm: Patch from Steve Callendar addressing holdability tests for
	copies git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19764
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.functions.general.sql,
	Open-ILS/src/sql/Pg/002.functions.general.sql,
	Open-ILS/src/sql/Pg/build-db.sh: Set default db schema search path
	to public,pg_catalog With the addition of the 'evergreen' schema, we discovered that all
	of the unqualified database objects were being created in the
	'evergreen' schema if the database user name was 'evergreen' (as the
	default search path is "$user",public we started matching "$user").  Thomas Berezansky proposed a variation of the function provided here
	for changing database settings. By creating the function in the
	first schema file, the subsequent connections pick up the new
	default search path and all works blissfully as it once did.  Long term, we should probably move towards explicitly qualified
	database objects.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19760
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/reingest-1.6-2.0.pl: teach the 1.6-2.0
	reingest generator about "tnf"-tag rows for title sorting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19753
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-15  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/Makefile.am,
	Open-ILS/xul/staff_client/external/aa_per_machine.js,
	Open-ILS/xul/staff_client/external/make_updates.sh,
	Open-ILS/xul/staff_client/extras.example.nsi,
	Open-ILS/xul/staff_client/windowssetup.nsi: Misc. changes to
	installer including: 1 - Fix profile manager links 2 - Add tag at top (currently "Trunk")
	for easy changing 3 - Add optional extras.nsi for easy additions of
	extra install/uninstall lines 4 - Run uninstaller if installing to a
	directory with one (old style OR new style) 5 - Allow license
	    override and only show license page if one defined Ex. With
	    NSIS_EXTRAOPTS set to "-DPRODUCT_LICENSE=some/path" Or to disable
	use "-DPRODUCT_LICENSE" 6 - Similar to devbuild, allow for
	    registration per-machine by default This includes needing to not
	wipe out the folder this is stored in 7 - Make "Everyone" able to
	    write to the install folder when: Autoupdate is an option     Per-machine registration is an option 8 - Make silent uninstall
	function Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19751
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-15  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/main/ws_info.xul: Default
	workstation name to something sensible.  Like the computer's hostname. But not localhost.  Author: Thomas Berezansky <tsbere@mvlc.org>   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19748
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-15  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/reports/oils_rpt_folders.js: Prevent creation of
	report folders with empty folder names Addresses LP # 720755. Clicking the "Create Folder" button when no
	folder name has been supplied is now a no-op.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19742
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/fieldmapper/OrgUtils.js: until futher
	investigation, roll back the changes of == to ===, since it was
	causing unexpected changes in behavior.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19739
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: class cxt has no field named
	'field_class', removing from IDL git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19738
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/web/templates/default/conify/global/config/record_attr_def
	inition.tt2, Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	More menu work for record attr/coded map config  UIs menu entry for config.coded_value_maps, updated menu label and page
	title for config.record_attr_definition page; in some cases (that
	probabl need investigating), widget.validate function is not
	defined.  in those cases, don't attempt to call the function git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19737
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/fieldmapper/Fieldmapper.js,
	Open-ILS/web/js/dojo/fieldmapper/IDL.js,
	Open-ILS/web/js/dojo/fieldmapper/OrgUtils.js: Pure whitespace (tabs
	to spaces) for dojo.fieldmapper git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19733
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/fieldmapper/Fieldmapper.js,
	Open-ILS/web/js/dojo/fieldmapper/IDL.js,
	Open-ILS/web/js/dojo/fieldmapper/OrgUtils.js,
	Open-ILS/web/js/dojo/fieldmapper/dojoData.js,
	Open-ILS/web/js/dojo/fieldmapper/hash.js: Apply jshint suggestions
	for cleanup to dojo.fieldmapper Mostly consisting of missing semicolons and avoiding the
	redeclaration of variables (generally for iterators) within the same
	function scope.  Some tightening of null and '' checks to avoid
	implicit type-casting.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19731
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-13  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/search_form.js,
	Open-ILS/xul/staff_client/server/patron/search_form_overlay.xul: 
	Normalize patron profile search function in "Search for Patrons" UI Use util.widgets.make_menulist for a more consistent approach to
	generating the menulist and use a row/label/hbox layout to normalize
	the appearance of the patron profile filter in the search menu.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19729
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-13  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/patron/search_form.js,
	Open-ILS/xul/staff_client/server/patron/search_form_overlay.xul,
	Open-ILS/xul/staff_client/server/patron/search_result.js: Apply
	patch to add a patron profile filter to the "Search for Patrons" UI Thanks to Michael Peters <mrpeters@library.in.gov> and Thomas
	Berezansky <tsbere@mvlc.org> for their work on this additional
	functionality to the patron search UI, supplied as a patch in LP#
	715837.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19728
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-13  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.english.pg81.fts-config.sql,
	Open-ILS/src/sql/Pg/000.english.pg82.fts-config.sql,
	Open-ILS/src/sql/Pg/000.english.pg83.fts-config.sql,
	Open-ILS/src/sql/Pg/000.english.pg84.fts-config.sql: Remove
	unsupported versions of PostgreSQL FTS configs We don't support anything below PostgreSQL 9.0, so let's get this
	deadwood out of the way lest anyone get confused.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19725
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-12  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.english.pg84.fts-config.sql,
	Open-ILS/src/sql/Pg/000.english.pg90.fts-config.sql,
	Open-ILS/src/sql/Pg/002.functions.aggregate.sql,
	Open-ILS/src/sql/Pg/002.functions.general.sql,
	Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/build-db.sh: Clean up build errors when
	creating/recreating database schema Dropping the evergreen schema cascaded and wiped out some previously
	defined functions, so move it ahead of the other functions. (And
	maybe we can start moving those public functions into the evergreen
	schema?) DROP AGGREGATE IF EXISTS exists on any version of PostgreSQL that we
	care about for Evergreen 2.0, so we can use it to avoid false errors
	during schema creation.  FTS config was complaining about public.english_nostop in the ALTER
	statement, so remove the schema qualification. This seems to have
	been there for a long time? Use IF EXISTS when dropping the unapi schema to avoid an error.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19722
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-12  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/upgrade/0498.lowercase_via_perl.sql: Use valid
	DDL for forgotten index on actor.card git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19719
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-12  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	or.pm, Open-ILS/src/perlmods/lib/OpenILS/Application/Vandelay.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Reporter/SQLBuilder.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/Reporter/transforms.pm,
	Open-ILS/src/sql/Pg/002.functions.general.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/build-db.sh,
	Open-ILS/src/sql/Pg/upgrade/0498.lowercase_via_perl.sql: Resolve
	inconsistent results when invoking LOWER() in C vs. UTF8 locale
	databases As reported by the Fundamental Science Library of Armenia, patron
	searches were not retrieving patrons who were known to be part of
	the patron database.  While the initial approach to solve this problem used an
	encode_utf8() call to encode the data before passing it on to the
	database, this turned out to break the patron search function in
	other environments.  Testing by Dan Wells confirmed that the LOWER() function returned
	different results when invoked against text in a database created
	with LC_CTYPE=C vs a database created with LC_CTYPE=*.UTF-8. As the
	patron search function used a Perl lc() function call to convert the
	incoming data to lowercase, the success of the call depended on the
	LC_CTYPE value of the database.  To avoid this problem in the future, we define our own
	evergreen.lowercase() function that can reliably produce lowercase
	text for characters outside the Latin1 range, and we convert our
	indexes and function calls to use that function consistently.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19716
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-11  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/CreditCard.pm: 
	only append street2 to CC payment address if no address is provided
	by the caller git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19712
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-11  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/financial/claim_eligible.js: 
	Backport r19709 from trunk Acq: The "Claim-Ready Items" interface did not render correctly for
	> 1 item The problem was racy async rendering logic. Now we look at our whole
	result set and build our table accordingly at the end.  This interface should probably learn about paging one day in order
	to handle large result sets.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19711
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* README: Update the README to include explict LC_CTYPE/LC_COLLATE
	db settings git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19707
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: LANG=C results in SQL_ASCII
	encoding by default for PostgreSQL, which isn't cool We want LC_CTYPE=C and LC_COLLATE=C, and SERVER_ENCODING=UTF8.  The
	docs have been adjusted as 8.4 and up now offer database-level
	--lc-ctype / --lc-collate options for createdb command.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19704
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-11  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Actor.pm: use the
	existing util method for mvr-izing, since it handles some additional
	important steps (e.g. capturing doc_id) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19701
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	or.pm: Ensure incoming query values to patron search are
	UTF8-encoded Addresses the problem reported with searching for patrons with
	Armenian names, where Unicode query params were getting corrupted on
	its way to the database.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19698
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-10  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/CreditCard.pm: 
	add patron barcode to CC transaction description for payment record
	keeping/tracking git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19696
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-10  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/locale/en-US/common.properties,
	Open-ILS/xul/staff_client/server/main/ws_info.xul: This is tsbere's
	work:

	http://git.mvlcstaff.org/?p=tsbere/ILS.git;a=shortlog;h=refs/heads/emptywsComplain when trying to register an empty Workstation ID Client-side only, no server side validation.   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19693
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-03-10  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm,
	Open-ILS/web/js/dojo/openils/booking/nls/pickup_and_return.js,
	Open-ILS/web/js/ui/default/booking/populator.js: Backport r19682
	from trunk Booking: don't bail out completely on COPY_ALERT_MESSAGE when
	returning items Provide overridability.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19683
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-10  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/admin/org_unit_settings.js,
	Open-ILS/xul/staff_client/server/admin/org_unit_settings.xhtml: as
	an alternate/addition to applying per-setting permissions, use the
	existing VIEW_ORG_SETTINGS permission as a general gateway into the
	org settings UI git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19678
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-09  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/Makefile: 'newpo' in install_all_locales was wiping out
	all fr-CA translations Long story short, we would rather have install_all_locales fail
	loudly than silently wipe out fr-CA.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19669
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-09  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0497.patron_registration.sql,
	Open-ILS/web/css/skin/default/register.css,
	Open-ILS/web/js/dojo/openils/actor/nls/register.js,
	Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js,
	Open-ILS/web/js/ui/default/actor/user/register.js,
	Open-ILS/web/templates/default/actor/user/register.tt2,
	Open-ILS/web/templates/default/actor/user/register_table.tt2: Patch
	from Thomas Berezansky: The attached patch adds a collection of settings for patron
	registration, as well as a new display mode.  The new display mode is "Suggested" compared to "Required" or "All".
	It shows everything "Required" does, but also shows fields flagged
	as "Suggested", stat cats, and surveys.  To control this and other things are the settings. They come in a
	few general categories, named ui.patron.edit.<fmclass>.<fmfield>.?
	where ? is one of the following: require - Flag the field as required when it otherwise wouldn't be.
	show - Show the field like required fields, but don't actually
	require it.  suggest - Show the field with required/shown fields in
	"show suggested fields" mode example - An example string for a field
	regex - A regular expression for validating a field Not all fields have all of the above options by default, although
	the initial list is the main limiter compared to the code side.  Also included are the following settings:
	ui.patron.edit.au.dob.calendar - If true, shows the calendar widget
	for the date of birth field ui.patron.edit.phone.example - Example
	for all phone fields without their own ui.patron.edit.phone.regex -
	Regex validator for all phone fields without their own
	ui.patron.edit.default_suggested - Default to showing suggested
	fields instead of all fields git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19664
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-09  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/myopac.js: Draw pre-cataloged
	items (author and title) in My Account checkedout screen Two problems: FETCH_MODS_FROM_COPY returns an object, so we weren't
	getting to the point of fetching the raw copy itself, and there was
	some confusion about pre-cataloged vs. non-cataloged items that is
	hopefully straightened out now.  Addresses LP # 723895 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19658
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-09  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/bill2.js: Fix LP bug
	#727432, "overpaying with patron credit can generate a double
	credit" git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19650
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/ResolverResolver.pm: 
	Correct implementing function name for
	open-ils.resolver.delete_cached_holdings A non-existent function had been registered, which blew up in
	AUTOLOAD and caused ugly errors to be logged to the unix log.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19648
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/ResolverResolver.pm: 
	Be more defensive when parsing SFX target results SFX in the wild has been observed returning targets for getFullTxt
	requests that have no target URLs, which makes it rather impossible
	to provide a link to the full text resource. Skip such targets (and
	for good measure, skip them if they don't have a name either).  Also, change from the SID "conifer" to the more generic and accurate
	"evergreen".  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19647
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0496.data.search_indexes.sql: Add
	missing ampersand to ind1 attribute in identifier index xpaths This addresses LP # 731564. Thanks to Dan Wells for identifying
	(hah) the identifier xpath problem! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19643
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-08  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Money.pm: 
	Address LP bug #724583, "Paying Bills with Patron Credit does not
	always decrease patron Credit" git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19640
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-07  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: More data ordering
	issues git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19638
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-07  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Insert order
	matters, moving down git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19636
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-07  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/100.circ_matrix.sql: 
	config.videorecording_format_map moved to SVF git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19634
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-07  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql: Accidentally removed
	during SVF merge, put it back git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19632
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-07  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* README: We now require PG 9.0+, say as much in the README git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19629
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-07  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Driver/Pg/Que
	ryParser.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/met
	abib.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/QueryParser.p
	m, Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/100.circ_matrix.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/800.fkeys.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0495.schema.svf-phase-one.sql,
	Open-ILS/web/opac/common/js/config.js,
	Open-ILS/web/opac/locale/en-US/conify.dtd,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/web/opac/skin/craftsman/xml/advanced/advanced_global.xml,
	Open-ILS/web/opac/skin/craftsman/xml/result/filtersort.xml,
	Open-ILS/web/opac/skin/default/js/adv_global.js,
	Open-ILS/web/opac/skin/default/xml/advanced/advanced_global.xml,
	Open-ILS/web/opac/skin/default/xml/result/filtersort.xml,
	Open-ILS/web/templates/default/conify/global/config/coded_value_map
	.tt2,
	Open-ILS/web/templates/default/conify/global/config/record_attr_def
	inition.tt2,
	Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/chrome/content/main/constants.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/server/cat/copy_editor.js: Backport SVF
	merge to 2.1 This change will require Postgres 9.0 or later.  See
	http://markmail.org/thread/6szksfrygfpt7wmz for the initial proposal
	and design.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19625
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-07  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoGrid.js: Fix cloning of
	AutoField widgets: LP #728055 Cloning Action/Trigger event definitions was not working properly,
	as all values were being copied from the original object using their
	display strings rather than the underlying values.  Bill Erickson suggested a fix in IRC that works, so full credit to
	him for this change! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19591
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-05  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0494.data.search_indexes.sql: Correct
	search index definitions for subject|complete and identifier|bibcn Dan Wells reported in LP# 729385 that the index definitions for
	subject|complete and identifier|bibcn were not working, and traced
	the problem to a change in how indexes are generated in 2.0+.
	Dropping the trailing '//text()' on these two indexes addresses the
	problem.  Sites upgrading from a previous version of Evergreen 2.0 will want
	to refresh the indexes after applying this schema change to enable
	searches against subject|complete and identifier|bibcn to work.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19588
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-04  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: Respect a
	setting of depth=0. In particular, this fixes holdings requests for
	branch-level searches with an 'Everything' scope.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19584
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: SRU: Restructure
	the hash returned from open-ils.supercat.biblio.search_aliases By returning explicit index and title elements from the method, we
	can backport cleanly to 2.0 and set the stage for pulling the title
	element directly from the database in 2.1 and beyond.  In addition, the enriched object enables us to get rid of the
	hardcoded nested qualifier map for bibs, and also enables us to fix
	the explain document for SRU for authority records.  Finally, we also fix the mappings of SRU qualifiers to Evergreen
	search aliases (in many cases we had been quietly falling back to
	plain kw searches, which was not cool).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19575
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: Add complete set
	of Evergreen search aliases and attributes to SRU explain Original "pull from database" code had limited the search aliases to
	those that were qualified; now we pull all of them, and if they are
	not qualified, we qualify them as "eg".  In addition, for some of the non-index attributes (sort, direction,
	site, available), restore the descriptive title that was previously
	available.  Slightly longer term we will add a "description" column
	to config.metabib_search_alias to store this information.  Also, we had always been using the global %qualifier_map in
	return_sru_explain(), even though the intention was to enable the
	authority explain index to pass in an overriding set of values. This
	commit breaks the authority SRU explain, but as it had been
	incorrectly dumping the bib explain, this brings us a step closer to
	proper explain support for authorities.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19574
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-03  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_auth.c: when using the force-reload
	option to reset timeout, propagate the ws_ou and wsid values from
	the cached user object into the reloaded user object git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19570
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-03  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Utils/MFHD/test/mfhd.t: Enable
	MFHD tests to find their testdata When the MFHD tests wrapped in mfhd.t are invoked from outside of
	the directory, they tests failed to find the mfhddata.txt file.
	Judicious use of the __FILE__ special literal and
	File::Basename::dirname() avoids that problem. Now we just need to
	munge @INC to ensure that testlib.pm can be resolved (and hope that
	no conflicts ever turn up).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19568
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-03  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: Draw SRU search
	indexes from config.metabib_search_alias We had hardcoded search indexes for SRU, but thanks to the work of
	Mike Rylander, it is fairly easy to remove that brittle code and
	replace it with code that polls the contents of
	config.metabib_search_alias and dumps it into the explain document.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19566
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-03  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: Whitespace
	consistency for O:WWW:SuperCat.pm git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19565
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-02  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/SuperCat.pm: Call
	number sorting "before" the context needs to be segregated based on
	directly on the label, "here-and-after" on the bytea version.
	Testing bears this out, but more eyes would be appreciated.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19561
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-02  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0493.data.interval-descriptions.sql: Add
	example intervals to some library setting descriptions Based on a patch provided by Michael Peters
	<mrpeters@library.in.gov> in Launchpad bug 717308, provide examples
	of intervals in several descriptions that lacked them.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19559
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/WWW/EGWeb.pm: Prevent an
	unitialized variable warning when loading OpenILS::WWW::EgWeb git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19557
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/MANIFEST,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/Method.pm.in,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/Web.pm.in,
	Open-ILS/src/perlmods/t/15-OpenILS-WWW.t, configure.ac: Remove dead
	code: OpenILS::WWW::Web and OpenILS::WWW::Method modules git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19556
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-01  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Actor.pm: update
	cached user after email/password update; repaired
	recently-introduced typo on user transaction retrieval method git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19553
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-01  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Actor.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/src/perlmods/lib/OpenILS/Utils/CStoreEditor.pm: various
	small useful additions capture of authtime in CStoreEditor some holds retrieval de-fleshing
	options a total_count field added to user opac vital stats api git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19550
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-03-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Trigger/Reactor.pm: 
	Add a TT helper to encode email headers in UTF-8 This can and should be used to encode any headers (To, From,
	Subject, etc) in an email that might include text outside of the
	ASCII 7-bit range. Names of people or libraries, for example, that
	might otherwise come out garbled.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19547
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-25  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/admin/org_unit_settings.js: 
	Updated org selector code in org setting UI Removed some ad-hoc org-unit tree widget code and replaced with the
	a standard solution from the openils dojo user lib.  Pass the auth on org value retrieval to pick up perm-protected
	settings.  Use STAFF_LOGIN for context selector perm, since each setting has
	its own perm that is checked before fetching.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19544
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-25  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0492.data.update_cn_label_sortkey.sql: 
	make sure asset.call_number.label_sortkey is up to date git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19541
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-24  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/acq/picklist/brief_record.tt2: typo
	fix "Pat, I'd like to buy a vowel"  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19538
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-02-24  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0491.function.maintain_901_fix_regex.sq
	l: Fix regex in maintain 901c The previous regex would delete any 901 fields *and* any fields
	which followed.  Since the 901 is typically the last field, this
	problem didn't surface during testing.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19535
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-24  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI/action.p
	m,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/CDBI/actor.pm: 
	added missing columns to CDBI table definitions  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19532
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-02-24  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Per Robert
	Soulliere, it can be necessary in some cases to clean out bad data
	from action.reservation_transit_copy before applying the missing
	fkeys to said table.  https://bugs.launchpad.net/evergreen/+bug/721450 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19530
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-23  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm: clear
	out the hold_copy_map entries for holds cancelled via the
	clear-shelf processes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19526
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0490.schema.staff-client-copy-counts.sq
	l: include copy/call_number deletedness in staff-version copy counts git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19523
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Add 830
	as a controllable bibliographic field in authority linking script Per http://www.loc.gov/marc/bibliographic/bd830.html, bibliographic
	830 should be controlled by authority 130. The "common cataloging
	practice" in 830 of omitting non-filing characters may cause some
	entries to not be linked that otherwise would be.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19519
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg_vhost.conf,
	Open-ILS/src/perlmods/lib/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/perlmods/lib/OpenILS/WWW/SuperCat.pm: Working SRU
	search for various authority records We now have search indexes for:   * ID   * name   * subject   * title   * topic O:WWW:SuperCat::sru_search has been refactored somewhat to reduce
	code duplication between the authority SRU and the bibliographic
	SRU.  This SRU interface lives, by default, at
	http://hostname/opac/extras/sru_auth Explain output is still a bit wonky in the configInfo section.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19515
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Utils/TagURI.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/990.schema.unapi.sql,
	Open-ILS/src/sql/Pg/build-db.sh,
	Open-ILS/src/sql/Pg/upgrade/0489.schema.unapi2.sql: Backporting
	unAPI v2, the bono edition, from trunk  * Add unapi schema, functions and initial transform setup  * General purpose tag URI parser  * upgrade script and build-db.sh integration git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19513
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/Makefile: Correct the install location for Dojo i18n
	bundles We had been converting xx-YY into xx/yy for a directory structure,
	but current evidence shows that it should be xx-yy. Hard to believe
	we've overlooked this for so long. Also, with the exception of the
	en-ca/en-gb/en-us locales, we should probably trim the locale to
	just xx - but that's a different problem, and let's just focus on
	getting this working to begin with.  Addresses Launchpad # 723489 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19508
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-22  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: dojo.js has to be loaded from the
	same domain as the page, unless it's a cross-domain build git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19504
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	ion.pm: Make sure we continue looping in situations where there is
	only one copy git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19498
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.english.pg90.fts-config.sql: Add support
	for 9.0 in initial db creation scripts git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19496
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Addressing LP bug:
	https://bugs.launchpad.net/evergreen/+bug/721450 If a series-class index definition has been removed, the data
	remains in the field entry table.  This is because there was no fkey
	previously.  We need to clean that data out so that the fkey can be
	validated during upgrade.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19493
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: 
	Whitespace - convert mix of tabs/spaces to pure spaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19488
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Switch
	to BT.textContent() for Opera compatibility The BT.textContent() method abstracts away some of the browser
	differences for us. Most importantly, it makes Opera happy.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19487
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Money.pm: ws_ou
	may be null in an opac context, fall back to home org git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19484
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Money.pm: allow
	users to see their own payments w/o perm git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19483
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Actor.pm: retain
	ability for a user to see his/her own payments and open transactions git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19482
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Actor.pm: More user
	transaction retrieval API cleanup Use consistent xact fleshing mechanism for circulations both for
	less/cleaner code and to consistently take advantage of CSToreEditor
	for authoritative support.  Added .flesh option to transaction history api calls, consistent
	with non-history version.  Added a have_payments history call so we can limit retrieval to
	xacts that had at least 1 payment When making sub-req calls to payment API calls, call .authoritative
	as appropriate git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19481
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/lib/OpenILS/Application/Storage/Publisher/act
	ion.pm: Backport r19470 from trunk Booking: fix the targeter in the
	I'm-reserving-this-exact-resource-with-this- exact-barcode case.  It should have always worked like this. This should better mirror
	the behavior in the holds targeter when placing a copy-level hold.
	Basically don't fail to target a resource for a reservation later
	just because it's not in an available status right at this moment.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19471
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-17  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/body.xml,
	Open-ILS/web/opac/skin/default/xml/home/index_body.xml: Avoid
	mixed-content warnings due to HTTP link for Google Chrome Frame We're hardcoding this to HTTPS for now to avoid the mixed-content
	warnings that occur when content location is https:// and the linked
	script is at http:// but a config-aware patch probably wouldn't be a
	bad idea.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19467
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-17  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/common/js/opac_utils.js: vestigial 2nd param to
	session.retrieve from opac now actually changes the behavior (see
	r19447) in an unexpected way, remove git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19465
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-17  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/circ/selfcheck/selfcheck.js: CSS hook
	for check-in failures with selfcheck git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19463
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-17  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/external/developers.js: who needs this
	much noise in the javascript console? javascript.options.strict =
	false git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19462
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-17  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0488.function.maintain_901_tcn.sql: 
	Teach maintain_901 trigger to respect the "Use record ID for TCN"
	global flag Rather than relying on the Perl layer to set the correct TCN on the
	way in, do it as part of the in-database indexing to ensure that we
	have consistent results no matter how the record gets into the
	database.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19459
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/BibTemplate.js: Patch based on work
	by Dan Wells to improve Opera BibTemplate support git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19456
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Circulate.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/100.circ_matrix.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0487.circ_matrix_fallthrough.sql,
	Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js,
	Open-ILS/web/js/dojo/openils/widget/AutoGrid.js,
	Open-ILS/web/js/dojo/openils/widget/EditPane.js,
	Open-ILS/web/js/dojo/openils/widget/nls/AutoFieldWidget.js,
	Open-ILS/web/js/ui/default/conify/global/config/circ_matrix_matchpo
	int.js,
	Open-ILS/web/templates/default/conify/global/config/circ_matrix_mat
	chpoint.tt2: Patch from Thomas Berezansky to implement circulation
	matchpoint value fallthrough, whereby specific rules can inherit
	values from generic rules.  Background, taken from
	https://bugs.launchpad.net/evergreen/+bug/635463: Theory: Make the things returned (circulate, duration_rule,
	recurring_fine_rule, max_fine_rule, hard_due_date,
	total_copy_hold_ratio, available_copy_hold_ratio and renewals) "fall
	through" when set to NULL.  The circ matrix edit screen has had some changes too, partially for
	showing "Inherited" in some places where appropriate, partially for
	field ordering and editing display and consistency. The fields that
	show up earlier contribute to tests that will be applied to the
	circulation attempt, while the "results" that do not change what
	rows are considered are grouped at the end.  Pros: You can override a subset of those fields with a specific rule while
	allowing broader rules to fill in the holes.  This may result in
	less duplication of information across rules, making things easier
	to maintain.  Thus, this may result in less rules in general, and
	thus less processing time on sorting them overall.  Cons: Manually figuring out the specifics of what will happen will take
	more time/effort.  Changing a single rule may have a greater
	unintended effect on other rules.  Staff would need training for
	when to have a rule fall through and when to set it specifically.
	More time to return from the DB for any rule that is "falling
	through" to broader rules.  Examples for the following org tree: CONS -SYSA --LIBC --LIBD -SYSB --LIBE --LIBF Implementing the following "business" rules: At the CONS level: By default, everything circulates, uses DFLT_DUR
	duration, DFLT_RFINE recurring fine, and DFLT_MFINE max fine.  Circ
	Modifier "book" uses the duration BOOK_DUR Reference flagged
	materials don't circulate At the SYSA level there are no special rules.  At the SYSB level the max fine should be SYSB_MFINE.  At the LIBC level the recurring fine is LIBC_RFINE At the LIBD level circ modifier "book" uses the DFLT_DUR duration
	instead of "BOOK_DUR" At the LIBE level reference flagged materials circulate.  At the LIBF level there are no special rules.  The current method would require the following circ rules to
	implement those business rules: CIRC_LIB CIRC_MOD REFERENCE CIRC? DURATION_RULE RECURRING_FINE
	MAX_FINE CONS NULL NULL TRUE DFLT_DUR DFLT_RFINE DFLT_MFINE CONS
	NULL TRUE FALSE DFLT_DUR DFLT_RFINE DFLT_MFINE CONS book NULL TRUE
	BOOK_DUR DFLT_RFINE DFLT_MFINE CONS book TRUE FALSE BOOK_DUR
	DFLT_RFINE DFLT_MFINE SYSB NULL NULL TRUE DFLT_DUR DFLT_RFINE
	SYSB_MFINE SYSB NULL TRUE FALSE DFLT_DUR DFLT_RFINE SYSB_MFINE SYSB
	book NULL TRUE BOOK_DUR DFLT_RFINE SYSB_MFINE SYSB book TRUE FALSE
	BOOK_DUR DFLT_RFINE SYSB_MFINE LIBC NULL NULL TRUE DFLT_DUR
	LIBC_RFINE DFLT_MFINE LIBC NULL TRUE FALSE DFLT_DUR LIBC_RFINE
	DFLT_MFINE LIBC book NULL TRUE BOOK_DUR LIBC_RFINE DFLT_MFINE LIBC
	book TRUE FALSE BOOK_DUR LIBC_RFINE DFLT_MFINE LIBD book NULL TRUE
	DFLT_DUR DFLT_RFINE DFLT_MFINE LIBD book TRUE FALSE DFLT_DUR
	DFLT_RFINE DFLT_MFINE LIBE NULL NULL TRUE DFLT_DUR DFLT_RFINE
	SYSB_MFINE LIBE book NULL TRUE BOOK_DUR DFLT_RFINE SYSB_MFINE 16 circ rules total.  The new method would require the following circ rules to implement
	those business rules: CIRC_LIB CIRC_MOD REFERENCE CIRC? DURATION_RULE RECURRING_FINE
	MAX_FINE CONS NULL NULL TRUE DFLT_DUR DFLT_RFINE DFLT_MFINE CONS
	book NULL NULL BOOK_DUR NULL NULL CONS NULL TRUE FALSE NULL NULL
	NULL SYSB NULL NULL NULL NULL NULL SYSB_MFINE LIBC NULL NULL NULL
	NULL LIBC_RFINE NULL LIBD book NULL NULL DFLT_DUR NULL NULL LIBE
	NULL TRUE TRUE NULL NULL NULL 7 circ rules total.  Starting with the above, lets assume that SYSA wants to change their
	recurring fine to SYSA_RFINE.  LIBC's recurring fine is to be
	unchanged.  The current method requires the following changes: ADD the following entries: CIRC_LIB CIRC_MOD REFERENCE CIRC?
	DURATION_RULE RECURRING_FINE MAX_FINE SYSA NULL NULL TRUE DFLT_DUR
	SYSA_RFINE DFLT_MFINE SYSA NULL TRUE FALSE DFLT_DUR SYSA_RFINE
	DFLT_MFINE SYSA book NULL TRUE BOOK_DUR SYSA_RFINE DFLT_MFINE SYSA
	book TRUE FALSE BOOK_DUR SYSA_RFINE DFLT_MFINE UPDATE the LIBD entries: CIRC_LIB CIRC_MOD REFERENCE CIRC?
	DURATION_RULE RECURRING_FINE MAX_FINE LIBD book NULL TRUE DFLT_DUR
	SYSA_RFINE DFLT_MFINE LIBD book TRUE FALSE DFLT_DUR SYSA_RFINE
	DFLT_MFINE 4 rules added, 2 changed, total is now 20 rules.  The new method would require the following changes: ADD the following entry: CIRC_LIB CIRC_MOD REFERENCE CIRC?
	DURATION_RULE RECURRING_FINE MAX_FINE SYSA NULL NULL NULL NULL
	SYSA_RFINE NULL 1 rule added, 0 changed, total is now 8 rules.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19454
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Patch from Thomas
	Berezansky to make many older OU setting types i18n friendly git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19452
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Patch from Jason
	Stephenson to realign trunk permission numbering with 2.0 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19450
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-16  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_auth.c: added option to
	open-ils.auth.session.retrieve to return the full cached object,
	which includes the auth time (cache timeout) of the cached user
	object git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19448
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Money.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/080.schema.money.sql,
	Open-ILS/src/sql/Pg/upgrade/0486.schema.mccp-order-number.sql: 
	back-port 19443: capture credit card order_number for online
	payments git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19444
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-13  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Teach
	authority_control_fields.pl about record ranges Passing --record 10,000 times at the command line sucks, and --all
	is not particularly realistic for large databases. Adding --start_id
	and --end_id makes this script more usable.  Also provide reasonably full POD documentation, and rely on
	Pod::Usage to provide help based on it when help is requested or
	passed in options don't make sense.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19440
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/reporter-schema.sql,
	Open-ILS/src/sql/Pg/upgrade/0485.schema.reporter_strip_isbns.sql: 
	Normalize ISBNs by stripping hyphens in search methods and in
	reporter.materialized_simple_record We weren't normalizing ISBNs in search or in
	reporter.materialized_simple_record which required users to exactly
	match the form of the ISBN as entered in the MARC record to get a
	successful search result - pretty hit or miss.  The longer term fix in 2.0 and above is to make the ISBN search
	search against the identifier|isbn index, which also gets
	ISBN10/ISBN13 equivalence goodness.  But this patch will be
	relatively easy to backport through to 1.6.1 and plugs some of the
	holes in our exposed APIs and search points in the short term.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19433
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-11  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/Makefile.am: bump xulrunner version git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19431
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-11  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0484.sql.pg-90-compat.sql: Postgres 9.0
	is more strict about variable names in functions. We will probably
	hit more of these, but these in particular break the OPAC.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19428
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-10  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/100.circ_matrix.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0483.dynamic_weights_fix.sql: Patch from
	Thomas Berezansky addressing his recent dynamic circ/hold field
	weighting patch.  Due to an oversight of auto-casting on my part dynamic weighting may
	incorrectly order similar rows that differ only in org unit or
	permission group.  Bad me for not testing for that case before now.  The attached patch should fix this. All it does is replace two
	functions, and in them replaces one INT variable with a NUMERIC(6,2)
	and a pile of integer constants with numeric constants (by virtue of
	adding .0 to them).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19423
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-09  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/serial/editor_base.js,
	Open-ILS/xul/staff_client/server/serial/manage_items.xul,
	Open-ILS/xul/staff_client/server/serial/sbsum_editor.js,
	Open-ILS/xul/staff_client/server/serial/scap_editor.js,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js,
	Open-ILS/xul/staff_client/server/serial/siss_editor.js,
	Open-ILS/xul/staff_client/server/serial/siss_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sisum_editor.js,
	Open-ILS/xul/staff_client/server/serial/sitem_editor.js,
	Open-ILS/xul/staff_client/server/serial/sssum_editor.js,
	Open-ILS/xul/staff_client/server/serial/sstr_editor.js,
	Open-ILS/xul/staff_client/server/serial/ssub_editor.js: Reduce
	hard-coded strings in Serial Control interfaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19420
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-09  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/lib/OpenILS/Application/Circ.pm: allow item
	status update if either status-specific perm is allowed or
	UPDATE_COPY is allowed.  fire off related A/T events after the
	initial transaction has been committed git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19415
	dcc99617-32d9-48b4-a31d-7c20da2025e4


2011-02-09  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* tweak selector used for font_helper() CSS classes Makes the flat-text MARC editor respect the global font settings,
	resolving bug https://bugs.launchpad.net/evergreen/+bug/678078   git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_1@19412
	dcc99617-32d9-48b4-a31d-7c20da2025e4

	Signed-off-by: Galen Charlton <gmc@esilibrary.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

